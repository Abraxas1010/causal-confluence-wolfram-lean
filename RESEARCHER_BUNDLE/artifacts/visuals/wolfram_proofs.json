{"meta":{"generatedAt":"2025-12-27T00:23:58.706Z","seed":"wolfram-wpp-umap-v1","vectorSignature":{"schema":"Φ/v1","weights":{"A":1,"B":0.7,"C":0.3,"D":0.2},"seed":"wolfram-wpp-umap-v1","umap":"umap-js","pins":{"umap":"umap-js"},"providers":{},"digest":"0ff97cb21fd4a701ab833da455463ce80fb8273ec70707b0d0da78abbe56ee18","phiDigest":"f858eb3704a293a77c863fabd0c5cf4e291b47c2d204f4fddc31a7726d075935"},"source":"lean/HeytingLean/WPP/Wolfram","notes":"UMAP embedding of Wolfram/WPP declarations (feature vectors derived from Lean source text)."},"items":[{"id":"HeytingLean.WPP.Wolfram.System.pathsAtDepth","name":"HeytingLean.WPP.Wolfram.System.pathsAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":35,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":0,"parenDepth":3,"length":282},"snippet":"def pathsAtDepth : Nat → Finset (List sys.EventData × HGraph V)\n  | 0 => {([], sys.init)}\n  | n + 1 =>\n      (pathsAtDepth n).biUnion (fun p =>\n        (sys.stepEdges p.2).image (fun e => (p.1 ++ [e.1], e.2)))\n","pos":{"x":0.24330418108140978,"y":0.28003580718049825},"pos3":{"x":0.21138792692473293,"y":0.2190068907052555,"z":0.7044847221052128}},{"id":"HeytingLean.WPP.Wolfram.System.mem_pathsAtDepth_len","name":"HeytingLean.WPP.Wolfram.System.mem_pathsAtDepth_len","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":42,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":6,"parenDepth":1,"length":798},"snippet":"lemma mem_pathsAtDepth_len {n : Nat} {p : List sys.EventData} {t : HGraph V} :\n    (p, t) ∈ sys.pathsAtDepth n → p.length = n := by\n  classical\n  -- generalize over `(p,t)` so the IH applies to predecessor paths\n  revert p t\n  induction n with","pos":{"x":0.3725105711525121,"y":0.7501311803503656},"pos3":{"x":0.5982646194381162,"y":0.10092629614204392,"z":0.2632522333181009}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepStates_of_mem_stepEdges","name":"HeytingLean.WPP.Wolfram.System.mem_stepStates_of_mem_stepEdges","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":62,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":286},"snippet":"lemma mem_stepStates_of_mem_stepEdges {s t : HGraph V} {ed : sys.EventData} :\n    (ed, t) ∈ sys.stepEdges s → t ∈ sys.stepStates s := by\n  intro h\n  refine Finset.mem_image.mpr ?_\n  exact ⟨(ed, t), h, rfl⟩\n","pos":{"x":0.28733318532172986,"y":0.21973581850714197},"pos3":{"x":0.20926230185011277,"y":0.2425116112089902,"z":0.8709447765816749}},{"id":"HeytingLean.WPP.Wolfram.System.image_snd_pathsAtDepth_eq_statesAtDepth","name":"HeytingLean.WPP.Wolfram.System.image_snd_pathsAtDepth_eq_statesAtDepth","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":69,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":1,"exists":0,"eq":3,"tactics":17,"parenDepth":3,"length":2520},"snippet":"theorem image_snd_pathsAtDepth_eq_statesAtDepth : ∀ n,\n    (sys.pathsAtDepth n).image Prod.snd = sys.statesAtDepth n := by\n  classical\n  intro n\n  induction n with\n  | zero =>","pos":{"x":0.516719808181402,"y":0.6400603670033852},"pos3":{"x":0.6672691513821244,"y":0.1950136815950983,"z":0.5591484034135188}},{"id":"HeytingLean.WPP.Wolfram.System.pathCountAtDepth","name":"HeytingLean.WPP.Wolfram.System.pathCountAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":119,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":2,"length":253},"snippet":"def pathCountAtDepth (n : Nat) (t : HGraph V) : Nat :=\n  ((sys.pathsAtDepth n).filter (fun p => p.2 = t)).card\n\n/-! ## Branchial graphs (siblings share a predecessor) -/\n\n/-- Unordered sibling-pairs among the children of a state (self-pairs removed). -/","pos":{"x":0.1642589467570107,"y":0.15053897693393237},"pos3":{"x":0.13137162767232205,"y":0.12476094382886238,"z":0.9698726824854085}},{"id":"HeytingLean.WPP.Wolfram.System.siblingEdges","name":"HeytingLean.WPP.Wolfram.System.siblingEdges","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":125,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":166},"snippet":"def siblingEdges (s : HGraph V) : Finset (Sym2 (HGraph V)) :=\n  ((sys.stepStates s).sym2).filter (fun z => ¬ z.IsDiag)\n\n/-- The branchial edges at exact depth `n`. -/","pos":{"x":0.5038681100523306,"y":0.49744877404677407},"pos3":{"x":0.5277627048980836,"y":0.23289222310204583,"z":0.8028576780506217}},{"id":"HeytingLean.WPP.Wolfram.System.branchialEdgesAtDepth","name":"HeytingLean.WPP.Wolfram.System.branchialEdgesAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":129,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":0,"parenDepth":2,"length":204},"snippet":"def branchialEdgesAtDepth : Nat → Finset (Sym2 (HGraph V))\n  | 0 => ∅\n  | n + 1 => (sys.statesAtDepth n).biUnion (fun s => sys.siblingEdges s)\n\nend Finite\n","pos":{"x":0.2805467493647446,"y":0.20777442775364002},"pos3":{"x":0.2233579533419575,"y":0.22505283720836505,"z":0.851885441078083}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph","name":"HeytingLean.WPP.Wolfram.CausalGraph","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":23,"family":"CausalGraph","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":117},"snippet":"structure CausalGraph where\n  n : Nat\n  edge : Fin n → Fin n → Prop\n\nnamespace CausalGraph\n","pos":{"x":0.8829115830702832,"y":0.5507147375835874},"pos3":{"x":0.7634146080378764,"y":0.5360025523922555,"z":0.4511610011032477}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.Iso","name":"HeytingLean.WPP.Wolfram.CausalGraph.Iso","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":30,"family":"CausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":110},"snippet":"def Iso (g₁ g₂ : CausalGraph) : Prop :=\n  ∃ e : Fin g₁.n ≃ Fin g₂.n, ∀ i j, g₁.edge i j ↔ g₂.edge (e i) (e j)\n","pos":{"x":0.8606999499411437,"y":0.9833980007681292},"pos3":{"x":0.9848450049340939,"y":0.37991298392759465,"z":0.7288369660773576}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.Iso.n_eq","name":"HeytingLean.WPP.Wolfram.CausalGraph.Iso.n_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":33,"family":"CausalGraph","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":221},"snippet":"lemma Iso.n_eq {g₁ g₂ : CausalGraph} : Iso g₁ g₂ → g₁.n = g₂.n := by\n  intro h\n  rcases h with ⟨e, _⟩\n  -- Cardinalities of finite types agree under an equivalence.\n  simpa [Fintype.card_fin] using (Fintype.card_congr e)\n","pos":{"x":0.8383900948282811,"y":0.6160540308793656},"pos3":{"x":0.7630706988025227,"y":0.4627746333101929,"z":0.4737753381607638}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.not_Iso_of_n_ne","name":"HeytingLean.WPP.Wolfram.CausalGraph.not_Iso_of_n_ne","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":39,"family":"CausalGraph","features":{"implies":1,"not":1,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":456},"snippet":"lemma not_Iso_of_n_ne {g₁ g₂ : CausalGraph} (h : g₁.n ≠ g₂.n) : ¬ Iso g₁ g₂ := by\n  intro hiso\n  exact h (Iso.n_eq hiso)\n\nend CausalGraph\n","pos":{"x":0.5658212560431857,"y":0.5597203317232043},"pos3":{"x":0.6482535865095029,"y":0.2678338770650502,"z":0.7212399620535118}},{"id":"HeytingLean.WPP.Wolfram.System.causalGraphOf","name":"HeytingLean.WPP.Wolfram.System.causalGraphOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":56,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":205},"snippet":"def causalGraphOf (es : List sys.Event) : CausalGraph where\n  n := es.length\n  edge := fun i j =>\n    i.1 < j.1 ∧ (es.get i).Causes (sys := sys) (es.get j)\n\nend System","pos":{"x":0.6388490255456916,"y":0.7365357067258778},"pos3":{"x":0.7923291958430968,"y":0.2707632612635222,"z":0.497005178881775}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":26,"family":"LabeledCausalGraph","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":246},"snippet":"structure LabeledCausalGraph (V : Type u) where\n  n : Nat\n  label : Fin n → Fin n → Multiset (Expr V)\n\nnamespace LabeledCausalGraph\n","pos":{"x":0.9090582669528684,"y":0.6126345821774981},"pos3":{"x":0.764372579537381,"y":0.5277358062472468,"z":0.5938955311679261}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.edge","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.edge","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":35,"family":"LabeledCausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":134},"snippet":"def edge (g : LabeledCausalGraph V) (i j : Fin g.n) : Prop :=\n  g.label i j ≠ 0\n\n/-- Forget labels to obtain a plain `CausalGraph`. -/","pos":{"x":0.7123999763073467,"y":0.8835030422901288},"pos3":{"x":0.9371014139008275,"y":0.2746933790387631,"z":0.2745902081840192}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.forget","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.forget","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":39,"family":"LabeledCausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":308},"snippet":"def forget (g : LabeledCausalGraph V) : CausalGraph :=\n  { n := g.n\n    edge := fun i j => g.edge i j }\n\nend LabeledCausalGraph\n","pos":{"x":0.6485727127781991,"y":0.7945704071796055},"pos3":{"x":0.8664406966344752,"y":0.22792765686201108,"z":0.32074404623862107}},{"id":"HeytingLean.WPP.Wolfram.System.Event.causeWitnesses","name":"HeytingLean.WPP.Wolfram.System.Event.causeWitnesses","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":53,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":91},"snippet":"def Event.causeWitnesses (e₁ e₂ : sys.Event) : Multiset (Expr V) :=\n  e₁.output ∩ e₂.input\n","pos":{"x":0.687025534782229,"y":0.8909218010181423},"pos3":{"x":1,"y":0.26720795739476555,"z":0.24740391874243947}},{"id":"HeytingLean.WPP.Wolfram.System.causeWitnesses_ne_zero_iff_causes","name":"HeytingLean.WPP.Wolfram.System.causeWitnesses_ne_zero_iff_causes","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":56,"family":"System","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":11,"parenDepth":2,"length":991},"snippet":"lemma causeWitnesses_ne_zero_iff_causes (e₁ e₂ : sys.Event) :\n    e₁.causeWitnesses (sys := sys) e₂ ≠ 0 ↔ e₁.Causes (sys := sys) e₂ := by\n  classical\n  constructor\n  · intro hne\n    rcases Multiset.exists_mem_of_ne_zero hne with ⟨x, hx⟩","pos":{"x":0.5577390765729394,"y":0.6647145550468958},"pos3":{"x":0.7142645381087988,"y":0.21906993619674775,"z":0.5644472327335245}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":79,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":210},"snippet":"def labeledCausalGraphOf (es : List sys.Event) : LabeledCausalGraph V where\n  n := es.length\n  label := fun i j =>\n    if i.1 < j.1 then\n      (es.get i).causeWitnesses (sys := sys) (es.get j)\n    else","pos":{"x":0.6838030864606724,"y":0.7912195782228344},"pos3":{"x":0.8799969853330296,"y":0.2653876079445728,"z":0.29793203396138457}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_edge_iff","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_edge_iff","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":87,"family":"System","features":{"implies":0,"not":1,"and":2,"or":0,"forall":0,"exists":0,"eq":0,"tactics":5,"parenDepth":2,"length":900},"snippet":"theorem labeledCausalGraphOf_forget_edge_iff (es : List sys.Event) (i j : Fin es.length) :\n    (labeledCausalGraphOf (sys := sys) es).forget.edge i j ↔ (sys.causalGraphOf es).edge i j := by\n  classical\n  by_cases hlt : i.1 < j.1\n  · -- `i<j`: nonempty intersection ↔ `Causes`\n    have hcauses :","pos":{"x":0.5724227626649351,"y":0.6247886238569982},"pos3":{"x":0.6923099608455374,"y":0.24518712709834758,"z":0.6476561996114254}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_iso_causalGraphOf","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_iso_causalGraphOf","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":102,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":333},"snippet":"theorem labeledCausalGraphOf_forget_iso_causalGraphOf (es : List sys.Event) :\n    CausalGraph.Iso (labeledCausalGraphOf (sys := sys) es).forget (sys.causalGraphOf es) := by\n  refine ⟨Equiv.refl _, ?_⟩\n  intro i j\n  simpa using labeledCausalGraphOf_forget_edge_iff (sys := sys) es i j\n","pos":{"x":0.15183480636309438,"y":0.20979928677793172},"pos3":{"x":0.12866948714254298,"y":0.10750671197521348,"z":0.8422817575744663}},{"id":"HeytingLean.WPP.Wolfram.Properties.ConfluentNF","name":"HeytingLean.WPP.Wolfram.Properties.ConfluentNF","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":33,"family":"Properties","features":{"implies":4,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":261},"snippet":"def ConfluentNF : Prop :=\n  ∀ ⦃s₁ s₂ : HGraph V⦄,\n    sys.Reachable s₁ → sys.NormalForm s₁ →\n    sys.Reachable s₂ → sys.NormalForm s₂ →\n    HGraph.Iso s₁ s₂\n","pos":{"x":0.9814506571965532,"y":0.7221496934566284},"pos3":{"x":0.7215507227369693,"y":0.531959316924418,"z":0.8918276645340368}},{"id":"HeytingLean.WPP.Wolfram.Properties.CausalInvariant","name":"HeytingLean.WPP.Wolfram.Properties.CausalInvariant","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":40,"family":"Properties","features":{"implies":5,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":435},"snippet":"def CausalInvariant : Prop :=\n  ∀ ⦃es₁ es₂ : List sys.Event⦄ ⦃t₁ t₂ : HGraph V⦄,\n    sys.Evolves sys.init es₁ t₁ → sys.NormalForm t₁ →\n    sys.Evolves sys.init es₂ t₂ → sys.NormalForm t₂ →\n    CausalGraph.Iso (sys.causalGraphOf es₁) (sys.causalGraphOf es₂)\n","pos":{"x":0.9898240176082226,"y":0.7153607404781652},"pos3":{"x":0.6924900339064893,"y":0.526529438910164,"z":0.8374826321701113}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.sigma2","name":"HeytingLean.WPP.Wolfram.Counterexamples.sigma2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":57,"family":"Counterexamples","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":4,"parenDepth":2,"length":392},"snippet":"def sigma2 (a b : V) : Fin 2 → V :=\n  Fin.cases a (fun _ : Fin 1 => b)\n\n@[simp] lemma sigma2_zero (a b : V) : sigma2 (V := V) a b 0 = a := by\n  simp [sigma2]\n","pos":{"x":0.2913687453648615,"y":0.2899249623425488},"pos3":{"x":0.26220698915973245,"y":0.1933667187427039,"z":0.8324349154648271}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.inj_sigma2","name":"HeytingLean.WPP.Wolfram.Counterexamples.inj_sigma2","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":69,"family":"Counterexamples","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":10,"tactics":13,"parenDepth":2,"length":686},"snippet":"lemma inj_sigma2 {a b : V} (h : a ≠ b) : Function.Injective (sigma2 (V := V) a b) := by\n  intro i j hij\n  cases i using Fin.cases with\n  | zero =>\n      cases j using Fin.cases with\n      | zero => rfl","pos":{"x":0.40569868720129953,"y":0.5310474144748146},"pos3":{"x":0.49946888794457517,"y":0.1587411358448159,"z":0.6466523452844997}},{"id":"HeytingLean.WPP.Wolfram.CE1.P","name":"HeytingLean.WPP.Wolfram.CE1.P","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":95,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":24},"snippet":"abbrev P : Type := Fin 2","pos":{"x":0.8568958991750191,"y":0.28080357726068145},"pos3":{"x":0.7711585396296613,"y":1,"z":0.5485834883623067}},{"id":"HeytingLean.WPP.Wolfram.CE1.V","name":"HeytingLean.WPP.Wolfram.CE1.V","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":96,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":25},"snippet":"abbrev V : Type := Fin 3\n","pos":{"x":0.848402701461197,"y":0.26935500594666595},"pos3":{"x":0.7729326973152892,"y":0.9898517646946615,"z":0.5579971074477802}},{"id":"HeytingLean.WPP.Wolfram.CE1.rule","name":"HeytingLean.WPP.Wolfram.CE1.rule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":98,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":128},"snippet":"def rule : Rule P where\n  lhs := ([([0] : Expr P), [0, 1]] : List (Expr P))\n  rhs := ([[0, 1], ([1] : Expr P)] : List (Expr P))\n","pos":{"x":0.193243788135797,"y":0.049898617666616116},"pos3":{"x":0.022817347399579132,"y":0.2266405103870094,"z":0.7716455755113436}},{"id":"HeytingLean.WPP.Wolfram.CE1.init","name":"HeytingLean.WPP.Wolfram.CE1.init","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":102,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":73},"snippet":"def init : HGraph V :=\n  ([[0], [0, 1], [1, 2], [0, 2]] : List (Expr V))\n","pos":{"x":0.23844805607162584,"y":0.016681394995813278},"pos3":{"x":0,"y":0.2720824529904373,"z":0.8251959017143806}},{"id":"HeytingLean.WPP.Wolfram.CE1.sys","name":"HeytingLean.WPP.Wolfram.CE1.sys","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":105,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":109},"snippet":"def sys : System V P where\n  rules := [rule]\n  init := init\n\nlocal instance : DecidableEq V := inferInstance\n","pos":{"x":0.8556438327759781,"y":0.33569879489182763},"pos3":{"x":0.793465638174784,"y":0.990149597210751,"z":0.601983137047825}},{"id":"HeytingLean.WPP.Wolfram.CE1.e12","name":"HeytingLean.WPP.Wolfram.CE1.e12","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":111,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":153},"snippet":"def e12 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 1\n    inj := inj_sigma2 (V := V) (a := (0 : V)) (b := (1 : V)) (by decide) }\n","pos":{"x":0.017228723975937776,"y":0.18069527042288683},"pos3":{"x":0.10012075525589714,"y":0.03462605566965498,"z":0.9742248727373359}},{"id":"HeytingLean.WPP.Wolfram.CE1.e13","name":"HeytingLean.WPP.Wolfram.CE1.e13","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":116,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":153},"snippet":"def e13 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 2\n    inj := inj_sigma2 (V := V) (a := (0 : V)) (b := (2 : V)) (by decide) }\n","pos":{"x":0.024122825291745458,"y":0.1935868499717603},"pos3":{"x":0.14153718598707787,"y":0.019084883646530347,"z":0.9558899999535948}},{"id":"HeytingLean.WPP.Wolfram.CE1.e23","name":"HeytingLean.WPP.Wolfram.CE1.e23","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":121,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":153},"snippet":"def e23 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 1 2\n    inj := inj_sigma2 (V := V) (a := (1 : V)) (b := (2 : V)) (by decide) }\n","pos":{"x":0.03037823289781489,"y":0.17695300983444842},"pos3":{"x":0.10429560794249847,"y":0.015745372813942053,"z":0.890248868044097}},{"id":"HeytingLean.WPP.Wolfram.CE1.s0","name":"HeytingLean.WPP.Wolfram.CE1.s0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":126,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":29},"snippet":"def s0 : HGraph V := sys.init","pos":{"x":0.8498708277107928,"y":0.30686930604418183},"pos3":{"x":0.8072715275421671,"y":0.9914074911737122,"z":0.6321998480143141}},{"id":"HeytingLean.WPP.Wolfram.CE1.s1","name":"HeytingLean.WPP.Wolfram.CE1.s1","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":127,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":68},"snippet":"def s1 : HGraph V := ([[1], [0, 1], [1, 2], [0, 2]] : List (Expr V))","pos":{"x":0.2192517124971297,"y":0.023390621234700763},"pos3":{"x":0.013085543350994436,"y":0.28347536016408165,"z":0.7592855774630526}},{"id":"HeytingLean.WPP.Wolfram.CE1.s2","name":"HeytingLean.WPP.Wolfram.CE1.s2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":128,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":69},"snippet":"def s2 : HGraph V := ([[2], [0, 1], [1, 2], [0, 2]] : List (Expr V))\n","pos":{"x":0.21526771258426491,"y":0},"pos3":{"x":0.009507836796481844,"y":0.27780315395189153,"z":0.7775329771541676}},{"id":"HeytingLean.WPP.Wolfram.CE1.pair_le","name":"HeytingLean.WPP.Wolfram.CE1.pair_le","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":130,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":3,"length":439},"snippet":"private lemma pair_le {a b : Expr V} {s : HGraph V} (hab : a ≠ b) (ha : a ∈ s) (hb : b ∈ s) :\n    (([a, b] : List (Expr V)) : HGraph V) ≤ s := by\n  have hnot : a ∉ ({b} : HGraph V) := by\n    simpa using hab\n  have hb_le : ({b} : HGraph V) ≤ s :=\n    (Multiset.singleton_le.2 hb)","pos":{"x":0.1761928103496917,"y":0.34090080082638136},"pos3":{"x":0.16886514549276785,"y":0.1396179978666941,"z":0.5179852652465086}},{"id":"HeytingLean.WPP.Wolfram.CE1.e12_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.e12_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":141,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":7,"parenDepth":3,"length":563},"snippet":"lemma e12_app_s0 : e12.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  -- simplify `e12.input`\n  -- goal: instantiated LHS ≤ init\n  have ha : ([0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 1] : Expr V) ∈ init := by simp [init]","pos":{"x":0.14649077323296214,"y":0.38727963629231954},"pos3":{"x":0.22707078104053746,"y":0.10547856991500472,"z":0.47992021465605195}},{"id":"HeytingLean.WPP.Wolfram.CE1.e13_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.e13_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":152,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":442},"snippet":"lemma e13_app_s0 : e13.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  have ha : ([0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 2] : Expr V) ∈ init := by simp [init]\n  have hab : ([0] : Expr V) ≠ ([0, 2] : Expr V) := by decide\n  simpa [System.Event.input, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename, e13, sys, rule]","pos":{"x":0.15804690250512463,"y":0.37064755269882416},"pos3":{"x":0.20522072687860582,"y":0.12064336010086114,"z":0.47580210504903053}},{"id":"HeytingLean.WPP.Wolfram.CE1.e23_app_s1","name":"HeytingLean.WPP.Wolfram.CE1.e23_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":160,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":434},"snippet":"lemma e23_app_s1 : e23.Applicable (sys := sys) s1 := by\n  dsimp [System.Event.Applicable, s1, sys]\n  have ha : ([1] : Expr V) ∈ s1 := by simp [s1]\n  have hb : ([1, 2] : Expr V) ∈ s1 := by simp [s1]\n  have hab : ([1] : Expr V) ≠ ([1, 2] : Expr V) := by decide\n  simpa [System.Event.input, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename, e23, sys, rule]","pos":{"x":0.16790326645371714,"y":0.35598272691807525},"pos3":{"x":0.19375272635027585,"y":0.12693139463863948,"z":0.5136283659377153}},{"id":"HeytingLean.WPP.Wolfram.CE1.e12_apply_s0","name":"HeytingLean.WPP.Wolfram.CE1.e12_apply_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":168,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e12_apply_s0 : e12.apply (sys := sys) s0 = s1 := by\n  decide\n","pos":{"x":0.549154640104238,"y":0.9587125285322322},"pos3":{"x":0.939786596574044,"y":0.1634934644358412,"z":0.03597558813458733}},{"id":"HeytingLean.WPP.Wolfram.CE1.e13_apply_s0","name":"HeytingLean.WPP.Wolfram.CE1.e13_apply_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":171,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e13_apply_s0 : e13.apply (sys := sys) s0 = s2 := by\n  decide\n","pos":{"x":0.5457751909639104,"y":0.935966158116619},"pos3":{"x":0.9536154945050895,"y":0.1735000735331226,"z":0.009286094236242208}},{"id":"HeytingLean.WPP.Wolfram.CE1.e23_apply_s1","name":"HeytingLean.WPP.Wolfram.CE1.e23_apply_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":174,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e23_apply_s1 : e23.apply (sys := sys) s1 = s2 := by\n  decide\n","pos":{"x":0.5444906637592536,"y":0.9338181489730191},"pos3":{"x":0.9603744418026342,"y":0.18108037199661203,"z":0.03006724129163968}},{"id":"HeytingLean.WPP.Wolfram.CE1.idx_eq_zero","name":"HeytingLean.WPP.Wolfram.CE1.idx_eq_zero","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":177,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":1,"length":234},"snippet":"private lemma idx_eq_zero (e : sys.Event) : e.idx = ⟨0, by decide⟩ := by\n  apply Fin.ext\n  have : e.idx.1 < 1 := by\n    have h : e.idx.1 < sys.rules.length := e.idx.isLt\n    dsimp [sys] at h\n    exact h","pos":{"x":0.47116043534164476,"y":0.8336851063629447},"pos3":{"x":0.7679258744389423,"y":0.10980903977539798,"z":0.11409001940599527}},{"id":"HeytingLean.WPP.Wolfram.CE1.mem_input_singleton","name":"HeytingLean.WPP.Wolfram.CE1.mem_input_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":185,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":3,"parenDepth":1,"length":259},"snippet":"private lemma mem_input_singleton (e : sys.Event) : ([e.σ 0] : Expr V) ∈ e.input (sys := sys) := by\n  have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename]\n","pos":{"x":0.5012908667899124,"y":0.8560641678365419},"pos3":{"x":0.8102640060604719,"y":0.1445088170328278,"z":0.1497128606763543}},{"id":"HeytingLean.WPP.Wolfram.CE1.mem_input_pair","name":"HeytingLean.WPP.Wolfram.CE1.mem_input_pair","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":189,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":3,"parenDepth":1,"length":261},"snippet":"private lemma mem_input_pair (e : sys.Event) : ([e.σ 0, e.σ 1] : Expr V) ∈ e.input (sys := sys) := by\n  have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename]\n","pos":{"x":0.5143751489659376,"y":0.8515089651110354},"pos3":{"x":0.8091772323667752,"y":0.13859871704608262,"z":0.1261109592919734}},{"id":"HeytingLean.WPP.Wolfram.CE1.s2_normalForm","name":"HeytingLean.WPP.Wolfram.CE1.s2_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":193,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":10,"tactics":16,"parenDepth":2,"length":1167},"snippet":"lemma s2_normalForm : sys.NormalForm s2 := by\n  intro e happ\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s2 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  have hσ0 : e.σ 0 = (2 : V) := by\n    -- the only singleton in `s2` is `[2]`","pos":{"x":0.32099444183570486,"y":0.6196395764165504},"pos3":{"x":0.49497930663188194,"y":0.10109716699486909,"z":0.4471316147532891}},{"id":"HeytingLean.WPP.Wolfram.CE1.s0_not_normalForm","name":"HeytingLean.WPP.Wolfram.CE1.s0_not_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":225,"family":"CE1","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":89},"snippet":"lemma s0_not_normalForm : ¬ sys.NormalForm s0 := by\n  intro hn\n  exact hn e13 e13_app_s0\n","pos":{"x":0.5757205785626798,"y":0.48861466922055596},"pos3":{"x":0.5918950388932225,"y":0.29342465453542854,"z":0.8164183681686655}},{"id":"HeytingLean.WPP.Wolfram.CE1.s1_not_normalForm","name":"HeytingLean.WPP.Wolfram.CE1.s1_not_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":229,"family":"CE1","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":89},"snippet":"lemma s1_not_normalForm : ¬ sys.NormalForm s1 := by\n  intro hn\n  exact hn e23 e23_app_s1\n","pos":{"x":0.56447969997966,"y":0.5045444188977313},"pos3":{"x":0.5775731717072954,"y":0.2837730287278418,"z":0.8159156325551088}},{"id":"HeytingLean.WPP.Wolfram.CE1.apply_eq_of_sigma_eq","name":"HeytingLean.WPP.Wolfram.CE1.apply_eq_of_sigma_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":233,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":8,"parenDepth":1,"length":374},"snippet":"private lemma apply_eq_of_sigma_eq {e e' : sys.Event} (hσ : e.σ = e'.σ) (s : HGraph V) :\n    e.apply (sys := sys) s = e'.apply (sys := sys) s := by\n  have hidxe : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  have hidxe' : e'.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e')\n  simp [System.Event.apply, System.Event.input, System.Event.output, hσ, hidxe, hidxe', sys, rule]\n","pos":{"x":0.37894416520083996,"y":0.7495708019385888},"pos3":{"x":0.6186716359607417,"y":0.08395606644041705,"z":0.23855503229684022}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma0_eq_of_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.sigma0_eq_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":239,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":255},"snippet":"private lemma sigma0_eq_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0) :\n    e.σ 0 = (0 : V) := by\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s0 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  simpa [s0, init, sys] using hmem0'\n","pos":{"x":0.17001351470027254,"y":0.1838957248405985},"pos3":{"x":0.14981624363399423,"y":0.1125553289937656,"z":0.8979617891164985}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma1_eq_one_or_two_of_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.sigma1_eq_one_or_two_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":245,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":2,"forall":0,"exists":0,"eq":8,"tactics":12,"parenDepth":2,"length":873},"snippet":"private lemma sigma1_eq_one_or_two_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0) :\n    e.σ 1 = (1 : V) ∨ e.σ 1 = (2 : V) := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  have hmem01' : ([e.σ 0, e.σ 1] : Expr V) ∈ s0 :=\n    Multiset.mem_of_le happ (mem_input_pair (e := e))\n  have hmem0x : ([0, e.σ 1] : Expr V) ∈ s0 := by","pos":{"x":0.3135395137891367,"y":0.5570238803849387},"pos3":{"x":0.4490469658364238,"y":0.07856679390577863,"z":0.5578599715043099}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e12_of_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e12_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":269,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":6,"parenDepth":2,"length":365},"snippet":"private lemma sigma_eq_e12_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0)\n    (hσ1 : e.σ 1 = (1 : V)) : e.σ = e12.σ := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  funext i\n  cases i using Fin.cases with\n  | zero => simp [e12, hσ0]","pos":{"x":0.2436386749423633,"y":0.4694079516664827},"pos3":{"x":0.3443975786530993,"y":0.09606740156553663,"z":0.7234138223519113}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e13_of_app_s0","name":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e13_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":280,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":6,"parenDepth":2,"length":365},"snippet":"private lemma sigma_eq_e13_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0)\n    (hσ1 : e.σ 1 = (2 : V)) : e.σ = e13.σ := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  funext i\n  cases i using Fin.cases with\n  | zero => simp [e13, hσ0]","pos":{"x":0.25699440308429017,"y":0.47651052129282206},"pos3":{"x":0.3636192809383385,"y":0.08717614030115428,"z":0.6833418241191852}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma0_eq_of_app_s1","name":"HeytingLean.WPP.Wolfram.CE1.sigma0_eq_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":291,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":244},"snippet":"private lemma sigma0_eq_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ 0 = (1 : V) := by\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s1 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  simpa [s1] using hmem0'\n","pos":{"x":0.142497470986589,"y":0.17768764367577194},"pos3":{"x":0.1385842854248545,"y":0.10274551098334637,"z":0.9231808378760828}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma1_eq_two_of_app_s1","name":"HeytingLean.WPP.Wolfram.CE1.sigma1_eq_two_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":297,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":3,"parenDepth":2,"length":462},"snippet":"private lemma sigma1_eq_two_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ 1 = (2 : V) := by\n  have hσ0 : e.σ 0 = (1 : V) := sigma0_eq_of_app_s1 (e := e) happ\n  have hmem01' : ([e.σ 0, e.σ 1] : Expr V) ∈ s1 :=\n    Multiset.mem_of_le happ (mem_input_pair (e := e))\n  have hmem1x : ([1, e.σ 1] : Expr V) ∈ s1 := by","pos":{"x":0.10443550304705436,"y":0.31052280107367364},"pos3":{"x":0.23866809899974642,"y":0.06998387003421572,"z":0.71885863482897}},{"id":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e23_of_app_s1","name":"HeytingLean.WPP.Wolfram.CE1.sigma_eq_e23_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":307,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":7,"parenDepth":2,"length":411},"snippet":"private lemma sigma_eq_e23_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ = e23.σ := by\n  have hσ0 : e.σ 0 = (1 : V) := sigma0_eq_of_app_s1 (e := e) happ\n  have hσ1 : e.σ 1 = (2 : V) := sigma1_eq_two_of_app_s1 (e := e) happ\n  funext i\n  cases i using Fin.cases with","pos":{"x":0.24876060983918724,"y":0.4802056738910608},"pos3":{"x":0.37193837113590944,"y":0.0802448473232889,"z":0.6593889208617646}},{"id":"HeytingLean.WPP.Wolfram.CE1.final_nf_eq_s2","name":"HeytingLean.WPP.Wolfram.CE1.final_nf_eq_s2","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":319,"family":"CE1","features":{"implies":2,"not":0,"and":1,"or":1,"forall":0,"exists":0,"eq":25,"tactics":36,"parenDepth":2,"length":2328},"snippet":"private lemma final_nf_eq_s2 {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s0 es t → sys.NormalForm t → t = s2 := by\n  intro hev hnf\n  cases hev with\n  | nil =>\n      exact (s0_not_normalForm hnf).elim","pos":{"x":0.35700352090489273,"y":0.5890137406324509},"pos3":{"x":0.5215133300851077,"y":0.1000070639271154,"z":0.5399264328979005}},{"id":"HeytingLean.WPP.Wolfram.CE1.terminatingFrom_init","name":"HeytingLean.WPP.Wolfram.CE1.terminatingFrom_init","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":369,"family":"CE1","features":{"implies":0,"not":0,"and":2,"or":2,"forall":0,"exists":0,"eq":22,"tactics":33,"parenDepth":1,"length":2409},"snippet":"theorem terminatingFrom_init : System.TerminatingFrom (sys := sys) s0 := by\n  refine ⟨2, ?_⟩\n  intro es t hev\n  cases hev with\n  | nil =>\n      simp","pos":{"x":0.3806380816793967,"y":0.6062238745847567},"pos3":{"x":0.5209718203644267,"y":0.0844960587573799,"z":0.49247248588544934}},{"id":"HeytingLean.WPP.Wolfram.CE1.confluentNF","name":"HeytingLean.WPP.Wolfram.CE1.confluentNF","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":423,"family":"CE1","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":4,"parenDepth":1,"length":344},"snippet":"theorem confluentNF : Properties.ConfluentNF (sys := sys) := by\n  intro s₁ s₂ hr₁ hn₁ hr₂ hn₂\n  rcases hr₁ with ⟨es₁, hev₁⟩\n  rcases hr₂ with ⟨es₂, hev₂⟩\n  have hs₁ : s₁ = s2 := final_nf_eq_s2 (es := es₁) (t := s₁) hev₁ hn₁\n  have hs₂ : s₂ = s2 := final_nf_eq_s2 (es := es₂) (t := s₂) hev₂ hn₂","pos":{"x":0.45523221762541033,"y":0.821318394893666},"pos3":{"x":0.7505476339444087,"y":0.11876844363318295,"z":0.15152542342783998}},{"id":"HeytingLean.WPP.Wolfram.CE1.not_causalInvariant","name":"HeytingLean.WPP.Wolfram.CE1.not_causalInvariant","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":432,"family":"CE1","features":{"implies":0,"not":2,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":13,"parenDepth":2,"length":1358},"snippet":"theorem not_causalInvariant : ¬ Properties.CausalInvariant (sys := sys) := by\n  intro hci\n  -- Two terminating evolutions to the same normal form `s2`:\n  --   short: `[e13]`  (length 1)\n  --   long:  `[e12, e23]` (length 2)\n  have hn2 : sys.NormalForm s2 := s2_normalForm","pos":{"x":0.4799988628004805,"y":0.518764303258051},"pos3":{"x":0.541483122560147,"y":0.2196005457995373,"z":0.7294601716090194}},{"id":"HeytingLean.WPP.Wolfram.CE2.P","name":"HeytingLean.WPP.Wolfram.CE2.P","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":462,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":24},"snippet":"abbrev P : Type := Fin 2","pos":{"x":0.8797805781471999,"y":0.29592622105757027},"pos3":{"x":0.7587364978365193,"y":0.9845447377899488,"z":0.524289690282691}},{"id":"HeytingLean.WPP.Wolfram.CE2.V","name":"HeytingLean.WPP.Wolfram.CE2.V","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":463,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":25},"snippet":"abbrev V : Type := Fin 2\n","pos":{"x":0.873751973555279,"y":0.28816406408218415},"pos3":{"x":0.7498907154999126,"y":0.9942760529992426,"z":0.5055946592272378}},{"id":"HeytingLean.WPP.Wolfram.CE2.rule","name":"HeytingLean.WPP.Wolfram.CE2.rule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":465,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":112},"snippet":"def rule : Rule P where\n  lhs := ([[0, 1], [1, 0]] : List (Expr P))\n  rhs := ([([0] : Expr P)] : List (Expr P))\n","pos":{"x":0.20988968354478665,"y":0.060120630596813364},"pos3":{"x":0.015880443695108163,"y":0.24765644250592017,"z":0.8146838454774726}},{"id":"HeytingLean.WPP.Wolfram.CE2.init","name":"HeytingLean.WPP.Wolfram.CE2.init","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":469,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":76},"snippet":"def init : HGraph V :=\n  ([[0, 1], [1, 0], ([0] : Expr V)] : List (Expr V))\n","pos":{"x":0.22549361075294685,"y":0.011229714960304423},"pos3":{"x":0.013606201738174704,"y":0.2762192821220974,"z":0.7806560604294492}},{"id":"HeytingLean.WPP.Wolfram.CE2.sys","name":"HeytingLean.WPP.Wolfram.CE2.sys","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":472,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":109},"snippet":"def sys : System V P where\n  rules := [rule]\n  init := init\n\nlocal instance : DecidableEq V := inferInstance\n","pos":{"x":0.8678547986966711,"y":0.3199085841813703},"pos3":{"x":0.7907728341664164,"y":0.9784889207757467,"z":0.5968137924186375}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_id","name":"HeytingLean.WPP.Wolfram.CE2.e_id","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":478,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":154},"snippet":"def e_id : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 1\n    inj := inj_sigma2 (V := V) (a := (0 : V)) (b := (1 : V)) (by decide) }\n","pos":{"x":0.05926831772245361,"y":0.19021451036696832},"pos3":{"x":0.13538016311309706,"y":0.04098009669929636,"z":0.8951179229576325}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_swap","name":"HeytingLean.WPP.Wolfram.CE2.e_swap","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":483,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":156},"snippet":"def e_swap : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 1 0\n    inj := inj_sigma2 (V := V) (a := (1 : V)) (b := (0 : V)) (by decide) }\n","pos":{"x":0.05655009908903874,"y":0.19689425117663809},"pos3":{"x":0.12104515267775323,"y":0.03895217622660636,"z":0.9027256241512581}},{"id":"HeytingLean.WPP.Wolfram.CE2.s0","name":"HeytingLean.WPP.Wolfram.CE2.s0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":488,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":29},"snippet":"def s0 : HGraph V := sys.init","pos":{"x":0.8733787507214987,"y":0.31806072366219407},"pos3":{"x":0.7862960883873172,"y":0.9730963699014175,"z":0.5831790118070044}},{"id":"HeytingLean.WPP.Wolfram.CE2.nf1","name":"HeytingLean.WPP.Wolfram.CE2.nf1","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":489,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":50},"snippet":"def nf1 : HGraph V := ([[0], [0]] : List (Expr V))","pos":{"x":0.23764164353114378,"y":0.023818106119136474},"pos3":{"x":0.03757576265919105,"y":0.254373845324932,"z":0.8141627235454194}},{"id":"HeytingLean.WPP.Wolfram.CE2.nf2","name":"HeytingLean.WPP.Wolfram.CE2.nf2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":490,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":51},"snippet":"def nf2 : HGraph V := ([[0], [1]] : List (Expr V))\n","pos":{"x":0.24558944799366708,"y":0.0025996355995602746},"pos3":{"x":0.03839620574367213,"y":0.26008320119165135,"z":0.7817889246551051}},{"id":"HeytingLean.WPP.Wolfram.CE2.sigma_eq_e_id_or_swap","name":"HeytingLean.WPP.Wolfram.CE2.sigma_eq_e_id_or_swap","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":492,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":1,"forall":0,"exists":0,"eq":21,"tactics":31,"parenDepth":3,"length":1266},"snippet":"private lemma sigma_eq_e_id_or_swap (e : sys.Event) : e.σ = e_id.σ ∨ e.σ = e_swap.σ := by\n  cases hσ0 : e.σ 0 using Fin.cases with\n  | zero =>\n      have hσ1 : e.σ 1 = (1 : V) := by\n        cases hσ1 : e.σ 1 using Fin.cases with\n        | zero =>","pos":{"x":0.341414972915229,"y":0.577755540863134},"pos3":{"x":0.4836661672108985,"y":0.10346381866626414,"z":0.5209341801599687}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_id_app","name":"HeytingLean.WPP.Wolfram.CE2.e_id_app","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":532,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":11,"parenDepth":3,"length":875},"snippet":"lemma e_id_app : e_id.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  -- LHS has two distinct length-2 edges which are both present in `init`.\n  have ha : ([0, 1] : Expr V) ∈ init := by simp [init]\n  have hb : ([1, 0] : Expr V) ∈ init := by simp [init]\n  have hab : ([0, 1] : Expr V) ≠ ([1, 0] : Expr V) := by decide","pos":{"x":0.15838162114429638,"y":0.4470079131067466},"pos3":{"x":0.277367266800261,"y":0.09213985469697117,"z":0.42344169045565166}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_swap_app","name":"HeytingLean.WPP.Wolfram.CE2.e_swap_app","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":548,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":11,"parenDepth":3,"length":753},"snippet":"lemma e_swap_app : e_swap.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  have ha : ([1, 0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 1] : Expr V) ∈ init := by simp [init]\n  have hab : ([1, 0] : Expr V) ≠ ([0, 1] : Expr V) := by decide\n  have hle : (([[1, 0], [0, 1]] : List (Expr V)) : HGraph V) ≤ init := by","pos":{"x":0.14572430493663718,"y":0.4324740982237303},"pos3":{"x":0.2664934923318933,"y":0.08517696034230501,"z":0.4410362167623756}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_id_apply","name":"HeytingLean.WPP.Wolfram.CE2.e_id_apply","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":562,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e_id_apply : e_id.apply (sys := sys) s0 = nf1 := by\n  decide\n","pos":{"x":0.5512657775217246,"y":0.9433188382136736},"pos3":{"x":0.9472059215579024,"y":0.1716331443452308,"z":0}},{"id":"HeytingLean.WPP.Wolfram.CE2.e_swap_apply","name":"HeytingLean.WPP.Wolfram.CE2.e_swap_apply","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":565,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":71},"snippet":"lemma e_swap_apply : e_swap.apply (sys := sys) s0 = nf2 := by\n  decide\n","pos":{"x":0.566783140205368,"y":0.9525912947048069},"pos3":{"x":0.9210721472467965,"y":0.1905124461588892,"z":0.05592934213894676}},{"id":"HeytingLean.WPP.Wolfram.CE2.idx_eq_zero","name":"HeytingLean.WPP.Wolfram.CE2.idx_eq_zero","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":568,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":1,"length":234},"snippet":"private lemma idx_eq_zero (e : sys.Event) : e.idx = ⟨0, by decide⟩ := by\n  apply Fin.ext\n  have : e.idx.1 < 1 := by\n    have h : e.idx.1 < sys.rules.length := e.idx.isLt\n    dsimp [sys] at h\n    exact h","pos":{"x":0.4547317986733185,"y":0.8481374668460981},"pos3":{"x":0.7641738516544371,"y":0.11567043796111368,"z":0.1372076183559958}},{"id":"HeytingLean.WPP.Wolfram.CE2.apply_eq_of_sigma_eq","name":"HeytingLean.WPP.Wolfram.CE2.apply_eq_of_sigma_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":576,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":8,"parenDepth":1,"length":374},"snippet":"private lemma apply_eq_of_sigma_eq {e e' : sys.Event} (hσ : e.σ = e'.σ) (s : HGraph V) :\n    e.apply (sys := sys) s = e'.apply (sys := sys) s := by\n  have hidxe : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  have hidxe' : e'.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e')\n  simp [System.Event.apply, System.Event.input, System.Event.output, hσ, hidxe, hidxe', sys, rule]\n","pos":{"x":0.37875810477125343,"y":0.7581081068124722},"pos3":{"x":0.6378975401411044,"y":0.07748397447012881,"z":0.24365863534176654}},{"id":"HeytingLean.WPP.Wolfram.CE2.nf1_normalForm","name":"HeytingLean.WPP.Wolfram.CE2.nf1_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":582,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":2,"length":410},"snippet":"lemma nf1_normalForm : sys.NormalForm nf1 := by\n  intro e happ\n  -- LHS requires length-2 expressions; `nf1` has only length-1 expressions.\n  have hmem : ([e.σ 0, e.σ 1] : Expr V) ∈ nf1 :=\n    Multiset.mem_of_le happ (by\n      have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)","pos":{"x":0.08794039766383568,"y":0.33096838092871733},"pos3":{"x":0.26650690495241225,"y":0.038556538349562214,"z":0.6577282510693214}},{"id":"HeytingLean.WPP.Wolfram.CE2.nf2_normalForm","name":"HeytingLean.WPP.Wolfram.CE2.nf2_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":591,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":2,"length":333},"snippet":"lemma nf2_normalForm : sys.NormalForm nf2 := by\n  intro e happ\n  have hmem : ([e.σ 0, e.σ 1] : Expr V) ∈ nf2 :=\n    Multiset.mem_of_le happ (by\n      have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n      simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename])","pos":{"x":0.07231838626845764,"y":0.34064420871331025},"pos3":{"x":0.2633601095633562,"y":0.02564392423270363,"z":0.6657368199498526}},{"id":"HeytingLean.WPP.Wolfram.CE2.length_eq_one_of_nf","name":"HeytingLean.WPP.Wolfram.CE2.length_eq_one_of_nf","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":599,"family":"CE2","features":{"implies":2,"not":2,"and":0,"or":2,"forall":0,"exists":0,"eq":15,"tactics":23,"parenDepth":2,"length":1454},"snippet":"private lemma length_eq_one_of_nf {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s0 es t → sys.NormalForm t → es.length = 1 := by\n  intro hev hnf\n  -- `s0` is not a normal form because `e_id` is applicable.\n  have hs0 : ¬ sys.NormalForm s0 := by\n    intro hn","pos":{"x":0.34403736531896484,"y":0.5469009103988569},"pos3":{"x":0.4712199366255915,"y":0.11644027895109375,"z":0.5719702827830481}},{"id":"HeytingLean.WPP.Wolfram.CE2.edge_iff_false_of_len_eq_one","name":"HeytingLean.WPP.Wolfram.CE2.edge_iff_false_of_len_eq_one","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":634,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":11,"parenDepth":2,"length":599},"snippet":"private lemma edge_iff_false_of_len_eq_one (es : List sys.Event) (hlen : es.length = 1)\n    (i j : Fin (sys.causalGraphOf es).n) : (sys.causalGraphOf es).edge i j ↔ False := by\n  constructor\n  · intro h\n    have hi_lt : i.1 < 1 := by\n      have : i.1 < es.length := i.isLt","pos":{"x":0.21437362766629206,"y":0.5192847280540256},"pos3":{"x":0.3422448681294791,"y":0.051149834195257544,"z":0.564278987769229}},{"id":"HeytingLean.WPP.Wolfram.CE2.terminatingFrom_init","name":"HeytingLean.WPP.Wolfram.CE2.terminatingFrom_init","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":651,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":3,"forall":0,"exists":0,"eq":10,"tactics":16,"parenDepth":2,"length":1130},"snippet":"theorem terminatingFrom_init : System.TerminatingFrom (sys := sys) s0 := by\n  refine ⟨1, ?_⟩\n  intro es t hev\n  cases hev with\n  | nil =>\n      simp","pos":{"x":0.3072163924127291,"y":0.5935463532433407},"pos3":{"x":0.4555903172354065,"y":0.0881520883529148,"z":0.5024619591917149}},{"id":"HeytingLean.WPP.Wolfram.CE2.causalInvariant","name":"HeytingLean.WPP.Wolfram.CE2.causalInvariant","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":679,"family":"CE2","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":12,"parenDepth":3,"length":880},"snippet":"theorem causalInvariant : Properties.CausalInvariant (sys := sys) := by\n  intro es₁ es₂ t₁ t₂ hev₁ hn₁ hev₂ hn₂\n  have hlen1 : es₁.length = 1 := length_eq_one_of_nf (es := es₁) (t := t₁) hev₁ hn₁\n  have hlen2 : es₂.length = 1 := length_eq_one_of_nf (es := es₂) (t := t₂) hev₂ hn₂\n  have hlen : (sys.causalGraphOf es₁).n = (sys.causalGraphOf es₂).n := by\n    simp [System.causalGraphOf, hlen1, hlen2]","pos":{"x":0.1809308943039212,"y":0.4711840858697376},"pos3":{"x":0.31351292546416365,"y":0.09971911675054015,"z":0.43407620724459567}},{"id":"HeytingLean.WPP.Wolfram.CE2.not_confluentNF","name":"HeytingLean.WPP.Wolfram.CE2.not_confluentNF","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":698,"family":"CE2","features":{"implies":0,"not":2,"and":0,"or":1,"forall":0,"exists":0,"eq":33,"tactics":54,"parenDepth":5,"length":3119},"snippet":"theorem not_confluentNF : ¬ Properties.ConfluentNF (sys := sys) := by\n  intro hconf\n  have hr1 : sys.Reachable nf1 := by\n    refine ⟨[e_id], ?_⟩\n    refine System.Evolves.cons (sys := sys) (s := s0) (es := []) (t := nf1) e_id e_id_app ?_\n    simpa [e_id_apply] using (System.Evolves.nil (sys := sys) nf1)","pos":{"x":0.3459705039800234,"y":0.5700788296292083},"pos3":{"x":0.48663810622589976,"y":0.10676238736809017,"z":0.5444208885148114}},{"id":"HeytingLean.WPP.Wolfram.confluence_causal_invariance_independent","name":"HeytingLean.WPP.Wolfram.confluence_causal_invariance_independent","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":779,"family":"confluence_causal_invariance_independent","features":{"implies":2,"not":2,"and":1,"or":0,"forall":2,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":709},"snippet":"theorem confluence_causal_invariance_independent :\n    (¬ (∀ {V P : Type} (sys : System V P) [DecidableEq V],\n        Properties.ConfluentNF (sys := sys) → Properties.CausalInvariant (sys := sys))) ∧\n    (¬ (∀ {V P : Type} (sys : System V P) [DecidableEq V],\n        Properties.CausalInvariant (sys := sys) → Properties.ConfluentNF (sys := sys))) := by\n  constructor","pos":{"x":0.9164826868086664,"y":0.7672526844414013},"pos3":{"x":0.6914364598936168,"y":0.43132632904967444,"z":0.9802129462617785}},{"id":"HeytingLean.WPP.Wolfram.System.Step","name":"HeytingLean.WPP.Wolfram.System.Step","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":33,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":1,"tactics":1,"parenDepth":1,"length":159},"snippet":"def Step (s t : HGraph V) : Prop :=\n  ∃ e : sys.Event, e.Applicable (sys := sys) s ∧ e.apply (sys := sys) s = t\n\n/-- Reflexive–transitive closure of `Step`. -/","pos":{"x":0.855475529905217,"y":0.9943074810107005},"pos3":{"x":0.9597487844477485,"y":0.34206914702712515,"z":0.6988086038931411}},{"id":"HeytingLean.WPP.Wolfram.System.StepStar","name":"HeytingLean.WPP.Wolfram.System.StepStar","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":37,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":145},"snippet":"abbrev StepStar : HGraph V → HGraph V → Prop :=\n  Relation.ReflTransGen (Step (sys := sys))\n\n/-- `Step`-normal form: no outgoing `Step` edges. -/","pos":{"x":0.3234828650288387,"y":0.2178017709691597},"pos3":{"x":0.24063816670110094,"y":0.27814075560075263,"z":0.8300787051145672}},{"id":"HeytingLean.WPP.Wolfram.System.NormalFormStep","name":"HeytingLean.WPP.Wolfram.System.NormalFormStep","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":41,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":75},"snippet":"def NormalFormStep (s : HGraph V) : Prop :=\n  ∀ t, ¬ Step (sys := sys) s t\n","pos":{"x":0.8926377025067387,"y":0.779204696092435},"pos3":{"x":0.6814729304702848,"y":0.413622350604496,"z":0.9644147385785276}},{"id":"HeytingLean.WPP.Wolfram.System.normalForm_iff_normalFormStep","name":"HeytingLean.WPP.Wolfram.System.normalForm_iff_normalFormStep","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":44,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":2,"length":362},"snippet":"lemma normalForm_iff_normalFormStep (s : HGraph V) :\n    sys.NormalForm s ↔ NormalFormStep (sys := sys) s := by\n  constructor\n  · intro hn t hstep\n    rcases hstep with ⟨e, happ, _ht⟩\n    exact (hn e) happ","pos":{"x":0.0840931807026614,"y":0.3350642594494847},"pos3":{"x":0.24814453711529133,"y":0.03614517952107704,"z":0.6734743828499421}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves.toStepStar","name":"HeytingLean.WPP.Wolfram.System.Evolves.toStepStar","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":56,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":2,"length":318},"snippet":"theorem Evolves.toStepStar {s : HGraph V} {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s es t → StepStar (sys := sys) s t := by\n  intro hev\n  induction hev with\n  | nil s =>\n      exact Relation.ReflTransGen.refl","pos":{"x":0.275533918354708,"y":0.24072349960107692},"pos3":{"x":0.21837252953973924,"y":0.21353892814932712,"z":0.876518505305175}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves.append","name":"HeytingLean.WPP.Wolfram.System.Evolves.append","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":65,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":1,"length":355},"snippet":"theorem Evolves.append {s : HGraph V} {es₁ es₂ : List sys.Event} {m t : HGraph V} :\n    sys.Evolves s es₁ m → sys.Evolves m es₂ t → sys.Evolves s (es₁ ++ es₂) t := by\n  intro h₁ h₂\n  induction h₁ with\n  | nil s =>\n      simpa using h₂","pos":{"x":0.9072755011334388,"y":0.6019052825807377},"pos3":{"x":0.770506243501486,"y":0.5065163674437944,"z":0.5434244136935127}},{"id":"HeytingLean.WPP.Wolfram.System.StepStar.exists_evolves","name":"HeytingLean.WPP.Wolfram.System.StepStar.exists_evolves","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":74,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":2,"tactics":6,"parenDepth":2,"length":848},"snippet":"theorem StepStar.exists_evolves {s t : HGraph V} :\n    StepStar (sys := sys) s t → ∃ es : List sys.Event, System.Evolves (sys := sys) s es t := by\n  intro h\n  induction h with\n  | refl =>\n      refine ⟨[], ?_⟩","pos":{"x":0.8495987237636278,"y":0.9616729304103115},"pos3":{"x":0.9576844573265492,"y":0.36766757976573367,"z":0.6987834074004953}},{"id":"HeytingLean.WPP.Wolfram.System.Joinable","name":"HeytingLean.WPP.Wolfram.System.Joinable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":95,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":158},"snippet":"def Joinable (b c : HGraph V) : Prop :=\n  Relation.Join (StepStar (sys := sys)) b c\n\n/-- Confluence (Church–Rosser): any fork under `StepStar` is joinable. -/","pos":{"x":0.20004430422265593,"y":0.06840578085346385},"pos3":{"x":0.04530647474979622,"y":0.21114033109919483,"z":0.8390761943634982}},{"id":"HeytingLean.WPP.Wolfram.System.Confluent","name":"HeytingLean.WPP.Wolfram.System.Confluent","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":99,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":198},"snippet":"def Confluent : Prop :=\n  ∀ a b c, StepStar (sys := sys) a b → StepStar (sys := sys) a c → Joinable (sys := sys) b c\n\n/-- A sufficient condition for confluence, matching `Relation.church_rosser`. -/","pos":{"x":0.9722926660908893,"y":0.7547953456570301},"pos3":{"x":0.7176001400956177,"y":0.5057975915241334,"z":1}},{"id":"HeytingLean.WPP.Wolfram.System.SemiConfluent","name":"HeytingLean.WPP.Wolfram.System.SemiConfluent","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":103,"family":"System","features":{"implies":2,"not":0,"and":1,"or":0,"forall":1,"exists":1,"eq":0,"tactics":0,"parenDepth":2,"length":165},"snippet":"def SemiConfluent : Prop :=\n  ∀ a b c, Step (sys := sys) a b → Step (sys := sys) a c →\n    ∃ d, Relation.ReflGen (Step (sys := sys)) b d ∧ StepStar (sys := sys) c d\n","pos":{"x":0.8605693175120344,"y":0.9787821349476379},"pos3":{"x":0.9680854510248574,"y":0.3536488123104481,"z":0.7549483562611417}},{"id":"HeytingLean.WPP.Wolfram.System.semiConfluent_confluent","name":"HeytingLean.WPP.Wolfram.System.semiConfluent_confluent","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":107,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":394},"snippet":"theorem semiConfluent_confluent (h : SemiConfluent (sys := sys)) : Confluent (sys := sys) := by\n  intro a b c hab hac\n  -- Use Mathlib's `Relation.church_rosser` lemma.\n  exact Relation.church_rosser (r := Step (sys := sys)) h hab hac\n\n/-! ## A simple bounded termination predicate (from a start state) -/","pos":{"x":0.12707477160230338,"y":0.23721907420028912},"pos3":{"x":0.17733185728661569,"y":0.08953175394466051,"z":0.7728890107838682}},{"id":"HeytingLean.WPP.Wolfram.System.BoundedFrom","name":"HeytingLean.WPP.Wolfram.System.BoundedFrom","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":115,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":190},"snippet":"def BoundedFrom (s : HGraph V) (n : Nat) : Prop :=\n  ∀ es t, sys.Evolves s es t → es.length ≤ n\n\n/-- Termination-from-`s` (strong form): there exists a uniform bound on evolution lengths. -/","pos":{"x":0.9536708330297583,"y":0.7729834747961712},"pos3":{"x":0.7275362552945501,"y":0.4900117600820653,"z":0.9734068270233163}},{"id":"HeytingLean.WPP.Wolfram.System.TerminatingFrom","name":"HeytingLean.WPP.Wolfram.System.TerminatingFrom","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":119,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":130},"snippet":"def TerminatingFrom (s : HGraph V) : Prop :=\n  ∃ n, BoundedFrom (sys := sys) s n\n\nend System\n\nend Wolfram","pos":{"x":0.8140827171626669,"y":0.9641748786283223},"pos3":{"x":0.9819082262427475,"y":0.3522373411204858,"z":0.6471282193550996}},{"id":"HeytingLean.WPP.Wolfram.Expr","name":"HeytingLean.WPP.Wolfram.Expr","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":21,"family":"Expr","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":124},"snippet":"abbrev Expr (V : Type u) : Type u := List V\n\n/-- A hypergraph state: multiset of expressions (edge multiplicity matters). -/","pos":{"x":0.6995005344009433,"y":0.8826786924174148},"pos3":{"x":0.9759765140462794,"y":0.2590013304827069,"z":0.35726088734930733}},{"id":"HeytingLean.WPP.Wolfram.HGraph","name":"HeytingLean.WPP.Wolfram.HGraph","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":24,"family":"HGraph","features":{"implies":8,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":16,"tactics":13,"parenDepth":3,"length":1787},"snippet":"abbrev HGraph (V : Type u) : Type u := Multiset (Expr V)\n\nnamespace Expr\n\n/-- Rename vertices in an expression. -/\n@[simp] def rename {V : Type u} {W : Type v} (f : V → W) : Expr V → Expr W :=","pos":{"x":0.9948279385082689,"y":0.6143816448947543},"pos3":{"x":0.6615079887766361,"y":0.5681548376497526,"z":0.6725814054343872}},{"id":"HeytingLean.WPP.Wolfram.HGraph.Iso","name":"HeytingLean.WPP.Wolfram.HGraph.Iso","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":73,"family":"HGraph","features":{"implies":3,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":5,"tactics":7,"parenDepth":1,"length":1122},"snippet":"def Iso {V : Type u} (g₁ g₂ : HGraph V) : Prop :=\n  ∃ e : Equiv.Perm V, rename e g₁ = g₂\n\n@[refl] lemma Iso.refl {V : Type u} (g : HGraph V) : Iso g g := by\n  refine ⟨Equiv.refl V, ?_⟩\n  simp [rename]","pos":{"x":0.8402753220274823,"y":0.9254366350129752},"pos3":{"x":0.9351437701935346,"y":0.38339086524369037,"z":0.7152017956208933}},{"id":"HeytingLean.WPP.Wolfram.System.EventData","name":"HeytingLean.WPP.Wolfram.System.EventData","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":37,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":174},"snippet":"abbrev EventData : Type (max u v) := Fin sys.rules.length × (P → V)\n\nnamespace EventData\n\nvariable {sys}\n","pos":{"x":0.8487269932741157,"y":0.6419538429970923},"pos3":{"x":0.7649330866211541,"y":0.4555973323710991,"z":0.440402508063239}},{"id":"HeytingLean.WPP.Wolfram.System.EventData.Inj","name":"HeytingLean.WPP.Wolfram.System.EventData.Inj","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":44,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":1,"length":256},"snippet":"def Inj (ed : sys.EventData) : Prop := Function.Injective ed.2\n\ninstance : DecidablePred (fun ed : sys.EventData => ed.Inj) := fun _ => by\n  dsimp [Inj]\n  infer_instance\n","pos":{"x":0.6702279150827598,"y":0.7866705512753668},"pos3":{"x":0.8975704258416329,"y":0.23333734653073418,"z":0.3734645718069997}},{"id":"HeytingLean.WPP.Wolfram.System.EventData.Applicable","name":"HeytingLean.WPP.Wolfram.System.EventData.Applicable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":51,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":311},"snippet":"def Applicable (ed : sys.EventData) (s : HGraph V) : Prop :=\n  (sys.rules.get ed.1).instLhs ed.2 ≤ s\n\ninstance (ed : sys.EventData) (s : HGraph V) : Decidable (ed.Applicable (sys := sys) s) := by\n  dsimp [Applicable]\n  infer_instance","pos":{"x":0.15277170195057732,"y":0.1756883707224554},"pos3":{"x":0.10569984959563081,"y":0.12073184258003095,"z":0.8813451097747741}},{"id":"HeytingLean.WPP.Wolfram.System.EventData.apply","name":"HeytingLean.WPP.Wolfram.System.EventData.apply","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":59,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":215},"snippet":"def apply (ed : sys.EventData) (s : HGraph V) : HGraph V :=\n  s - (sys.rules.get ed.1).instLhs ed.2 + (sys.rules.get ed.1).instRhs ed.2\n\nend EventData\n\n/-- All injective substitutions `P → V` (finite enumerator). -/","pos":{"x":0.8234108954358237,"y":0.6091689234193473},"pos3":{"x":0.7222495736742003,"y":0.4614242430601481,"z":0.5530357470104509}},{"id":"HeytingLean.WPP.Wolfram.System.allSubsts","name":"HeytingLean.WPP.Wolfram.System.allSubsts","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":65,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":3,"length":205},"snippet":"def allSubsts : Finset (P → V) :=\n  ((Finset.univ : Finset P).pi (fun _ : P => (Finset.univ : Finset V))).image (fun f a =>\n    f a (by simp))\n\n/-- `allSubsts` really enumerates *all* functions `P → V`. -/","pos":{"x":0.27247969861919097,"y":0.26854473876138807},"pos3":{"x":0.22903003121818366,"y":0.24400044238096005,"z":0.7772384357521861}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allSubsts","name":"HeytingLean.WPP.Wolfram.System.mem_allSubsts","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":70,"family":"System","features":{"implies":3,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":3,"parenDepth":2,"length":461},"snippet":"lemma mem_allSubsts (σ : P → V) : σ ∈ allSubsts (P := P) (V := V) := by\n  classical\n  let f : ∀ a, a ∈ (Finset.univ : Finset P) → V := fun a _ => σ a\n  have hf : f ∈ (Finset.univ : Finset P).pi (fun _ : P => (Finset.univ : Finset V)) := by\n    -- Membership in `pi` is pointwise membership in `Finset.univ`.\n    simp [f]","pos":{"x":0.9576214282885217,"y":0.7822520989064482},"pos3":{"x":0.6969113234883062,"y":0.5178589478496858,"z":0.9390015535097137}},{"id":"HeytingLean.WPP.Wolfram.System.allInjSubsts","name":"HeytingLean.WPP.Wolfram.System.allInjSubsts","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":82,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":95},"snippet":"def allInjSubsts : Finset (P → V) :=\n  (allSubsts (P := P) (V := V)).filter Function.Injective\n","pos":{"x":0.2958688302254429,"y":0.18344730385509148},"pos3":{"x":0.17966088201750965,"y":0.25796036415676593,"z":0.8467823435945018}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allInjSubsts_iff","name":"HeytingLean.WPP.Wolfram.System.mem_allInjSubsts_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":85,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":294},"snippet":"lemma mem_allInjSubsts_iff (σ : P → V) :\n    σ ∈ allInjSubsts (P := P) (V := V) ↔ Function.Injective σ := by\n  have hmem : σ ∈ allSubsts (P := P) (V := V) := mem_allSubsts (P := P) (V := V) σ\n  simp [System.allInjSubsts, hmem]\n\n/-- All event-data pairs (rule index × injective substitution). -/","pos":{"x":0.8297892304538781,"y":0.6255107386206774},"pos3":{"x":0.7446870868713459,"y":0.43415523280818125,"z":0.5027449599874787}},{"id":"HeytingLean.WPP.Wolfram.System.allEventData","name":"HeytingLean.WPP.Wolfram.System.allEventData","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":91,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":3,"length":119},"snippet":"def allEventData (sys : System V P) : Finset sys.EventData :=\n  (Finset.univ.product (allInjSubsts (P := P) (V := V)))\n","pos":{"x":0.18787593699311797,"y":0.3151857986638352},"pos3":{"x":0.1394822700100442,"y":0.17442793059590497,"z":0.5762915903574604}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allEventData_iff","name":"HeytingLean.WPP.Wolfram.System.mem_allEventData_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":94,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":230},"snippet":"lemma mem_allEventData_iff {ed : sys.EventData} :\n    ed ∈ sys.allEventData ↔ ed.2 ∈ allInjSubsts (P := P) (V := V) := by\n  simp [System.allEventData]\n\n/-- Outgoing edges from a state in the multiway graph (event-data labeled). -/","pos":{"x":0.6285869419219741,"y":0.8341997751841306},"pos3":{"x":0.8748320296885985,"y":0.2288225585014009,"z":0.24190809002227545}},{"id":"HeytingLean.WPP.Wolfram.System.stepEdges","name":"HeytingLean.WPP.Wolfram.System.stepEdges","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":99,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":4,"length":211},"snippet":"def stepEdges (s : HGraph V) : Finset (sys.EventData × HGraph V) :=\n  ((sys.allEventData.filter (fun ed => EventData.Applicable (sys := sys) ed s))).image (fun ed =>\n    (ed, EventData.apply (sys := sys) ed s))\n","pos":{"x":0.19339322508952128,"y":0.3407835013762189},"pos3":{"x":0.17315997112355877,"y":0.16269460300563113,"z":0.5462601237048766}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepEdges_iff","name":"HeytingLean.WPP.Wolfram.System.mem_stepEdges_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":103,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":0,"exists":0,"eq":4,"tactics":11,"parenDepth":2,"length":1030},"snippet":"lemma mem_stepEdges_iff {s t : HGraph V} {ed : sys.EventData} :\n    (ed, t) ∈ sys.stepEdges s ↔\n      ed ∈ sys.allEventData ∧\n      EventData.Applicable (sys := sys) ed s ∧\n      EventData.apply (sys := sys) ed s = t := by\n  constructor","pos":{"x":0.5540808879764141,"y":0.6526561561569278},"pos3":{"x":0.7011286217787912,"y":0.22903691134150322,"z":0.6037185243052732}},{"id":"HeytingLean.WPP.Wolfram.System.stepStates","name":"HeytingLean.WPP.Wolfram.System.stepStates","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":128,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":88},"snippet":"def stepStates (s : HGraph V) : Finset (HGraph V) :=\n  (sys.stepEdges s).image Prod.snd\n","pos":{"x":0.6945372974290859,"y":0.9022990826095025},"pos3":{"x":0.9810444699448669,"y":0.25027149734974735,"z":0.28446644927918396}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepStates_iff","name":"HeytingLean.WPP.Wolfram.System.mem_stepStates_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":131,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":0,"exists":1,"eq":1,"tactics":6,"parenDepth":3,"length":713},"snippet":"lemma mem_stepStates_iff {s t : HGraph V} :\n    t ∈ sys.stepStates s ↔\n      ∃ ed, ed ∈ sys.allEventData ∧\n        EventData.Applicable (sys := sys) ed s ∧\n        EventData.apply (sys := sys) ed s = t := by\n  constructor","pos":{"x":0.8383175638789994,"y":1},"pos3":{"x":0.925999831396488,"y":0.3267472112605476,"z":0.7306392745700888}},{"id":"HeytingLean.WPP.Wolfram.System.toWppRule","name":"HeytingLean.WPP.Wolfram.System.toWppRule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":149,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":156},"snippet":"def toWppRule : WppRule (HGraph V) :=\n  { step := fun s => sys.stepStates s }\n\n/-- States reachable in exactly `n` multiway steps (finite approximation). -/","pos":{"x":0.7042545881021712,"y":0.8241066617215267},"pos3":{"x":0.9295876271844287,"y":0.2688426949279799,"z":0.3629266590950771}},{"id":"HeytingLean.WPP.Wolfram.System.statesAtDepth","name":"HeytingLean.WPP.Wolfram.System.statesAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":153,"family":"System","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":3,"tactics":0,"parenDepth":1,"length":344},"snippet":"def statesAtDepth : Nat → Finset (HGraph V)\n  | 0 => {sys.init}\n  | n + 1 => (statesAtDepth n).biUnion (fun s => sys.stepStates s)\n\nend Finite\n","pos":{"x":0.6179451102926533,"y":0.675177460461891},"pos3":{"x":0.7501978005611599,"y":0.2782231868614301,"z":0.5761561885182178}},{"id":"HeytingLean.WPP.Wolfram.Ordering","name":"HeytingLean.WPP.Wolfram.Ordering","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":166,"family":"Ordering","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":226},"snippet":"structure Ordering where\n  choose : HGraph V → Option sys.Event\n  sound : ∀ {s e}, choose s = some e → e.Applicable (sys := sys) s\n\nnamespace Ordering\n","pos":{"x":0.9755516906765546,"y":0.7677605765434871},"pos3":{"x":0.6948800523230119,"y":0.4936653215723932,"z":0.9486569904378688}},{"id":"HeytingLean.WPP.Wolfram.Ordering.EvolvesBy","name":"HeytingLean.WPP.Wolfram.Ordering.EvolvesBy","kind":"inductive","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":175,"family":"Ordering","features":{"implies":5,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":327},"snippet":"inductive EvolvesBy (ord : Ordering (sys := sys)) : HGraph V → List sys.Event → HGraph V → Prop\n| nil (s : HGraph V) : EvolvesBy ord s [] s\n| cons {s : HGraph V} {es : List sys.Event} {t : HGraph V} (e : sys.Event) :\n    ord.choose s = some e →\n    EvolvesBy ord (e.apply (sys := sys) s) es t →\n    EvolvesBy ord s (e :: es) t","pos":{"x":1,"y":0.5902348496877605},"pos3":{"x":0.6829055702296081,"y":0.5588892401533445,"z":0.6984486523369213}},{"id":"HeytingLean.WPP.Wolfram.Ordering.EvolvesBy.toEvolves","name":"HeytingLean.WPP.Wolfram.Ordering.EvolvesBy.toEvolves","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":182,"family":"Ordering","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":2,"length":459},"snippet":"theorem EvolvesBy.toEvolves {ord : Ordering (sys := sys)} {s : HGraph V} {es : List sys.Event} {t : HGraph V} :\n    ord.EvolvesBy s es t → sys.Evolves s es t := by\n  intro h\n  induction h with\n  | nil s =>\n      simpa using (System.Evolves.nil (sys := sys) s)","pos":{"x":0.25438511169842704,"y":0.2421213627126815},"pos3":{"x":0.2358508562791303,"y":0.20262607893557033,"z":0.8381486601448672}},{"id":"HeytingLean.WPP.Wolfram.System.stepStates_iff_step","name":"HeytingLean.WPP.Wolfram.System.stepStates_iff_step","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/MultiwayBridge.lean","line":34,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":15,"parenDepth":2,"length":1559},"snippet":"theorem stepStates_iff_step {s t : HGraph V} :\n    t ∈ sys.stepStates s ↔ Step (sys := sys) s t := by\n  classical\n  constructor\n  · intro ht\n    rcases (sys.mem_stepStates_iff (P := P) (V := V) (s := s) (t := t)).1 ht with","pos":{"x":0.26468539998000207,"y":0.6179370121760848},"pos3":{"x":0.46908345368772897,"y":0.07173217915129307,"z":0.3552652040180342}},{"id":"HeytingLean.WPP.Wolfram.System.wpp_stepStar_iff_stepStar","name":"HeytingLean.WPP.Wolfram.System.wpp_stepStar_iff_stepStar","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/MultiwayBridge.lean","line":63,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":11,"parenDepth":2,"length":1234},"snippet":"theorem wpp_stepStar_iff_stepStar {s t : HGraph V} :\n    WppRule.StepStar (R := sys.toWppRule) s t ↔ StepStar (sys := sys) s t := by\n  classical\n  constructor\n  · intro h\n    induction h with","pos":{"x":0.268882384228346,"y":0.6091513788974093},"pos3":{"x":0.46043396018779764,"y":0.07714644491109596,"z":0.37759605580472233}},{"id":"HeytingLean.WPP.Wolfram.System.toWppRel","name":"HeytingLean.WPP.Wolfram.System.toWppRel","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/MultiwayRel.lean","line":27,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":380},"snippet":"def toWppRel : WppRel (HGraph V) where\n  stepRel := Step (sys := sys)\n\n@[simp] theorem toWppRel_stepRel {s t : HGraph V} :\n    (sys.toWppRel).stepRel s t ↔ Step (sys := sys) s t := Iff.rfl\n","pos":{"x":0.5727604525296679,"y":0.8277663228067001},"pos3":{"x":0.8337980850485017,"y":0.18700842546941987,"z":0.21548213176600264}},{"id":"HeytingLean.WPP.Wolfram.Rule","name":"HeytingLean.WPP.Wolfram.Rule","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":23,"family":"Rule","features":{"implies":4,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":1,"length":539},"snippet":"structure Rule (P : Type u) where\n  lhs : HGraph P\n  rhs : HGraph P\n\nnamespace Rule\n","pos":{"x":0.957109616245132,"y":0.600761867926035},"pos3":{"x":0.7114023599401365,"y":0.5478805999061812,"z":0.6074729914339969}},{"id":"HeytingLean.WPP.Wolfram.System","name":"HeytingLean.WPP.Wolfram.System","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":42,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":265},"snippet":"structure System (V : Type u) (P : Type v) where\n  rules : List (Rule P)\n  init : HGraph V\n\nnamespace System\n","pos":{"x":0.6527433334414698,"y":0.8167177189763619},"pos3":{"x":0.861878573198393,"y":0.24542934853439877,"z":0.2962050854948144}},{"id":"HeytingLean.WPP.Wolfram.System.Event","name":"HeytingLean.WPP.Wolfram.System.Event","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":51,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":541},"snippet":"structure Event (sys : System V P) where\n  idx : Fin sys.rules.length\n  σ : P → V\n  inj : Function.Injective σ\n\nnamespace Event","pos":{"x":0.8090594078924648,"y":0.6504322103508284},"pos3":{"x":0.7500037427216728,"y":0.42245308608776605,"z":0.5135437720442717}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Applicable","name":"HeytingLean.WPP.Wolfram.System.Event.Applicable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":69,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":349},"snippet":"def Applicable (e : sys.Event) (s : HGraph V) : Prop :=\n  e.input ≤ s\n\ninstance decidableApplicable [DecidableEq V] (e : sys.Event) (s : HGraph V) :\n    Decidable (e.Applicable (sys := sys) s) := by\n  dsimp [Applicable]","pos":{"x":0.13654010506974176,"y":0.20484798342479418},"pos3":{"x":0.10755994619639117,"y":0.11497151642722425,"z":0.8292017393462394}},{"id":"HeytingLean.WPP.Wolfram.System.Event.apply","name":"HeytingLean.WPP.Wolfram.System.Event.apply","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":80,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":197},"snippet":"def apply (e : sys.Event) (s : HGraph V) : HGraph V :=\n  s - e.input + e.output\n\n/-- Causal dependency (SetReplace): `e₁` causes `e₂` if some expression is created by `e₁`\nand destroyed by `e₂`. -/","pos":{"x":0.6218719175608576,"y":0.7224226281693983},"pos3":{"x":0.8290783194360813,"y":0.2434722130511245,"z":0.5177459047825967}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Causes","name":"HeytingLean.WPP.Wolfram.System.Event.Causes","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":85,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":0,"tactics":1,"parenDepth":1,"length":195},"snippet":"def Causes (e₁ e₂ : sys.Event) : Prop :=\n  ∃ x, x ∈ e₁.output ∧ x ∈ e₂.input\n\nend Event\n\nvariable [DecidableEq V]","pos":{"x":0.8272025703800382,"y":0.9895651109082915},"pos3":{"x":0.9538763104107923,"y":0.3379051982420366,"z":0.715612811352746}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves","name":"HeytingLean.WPP.Wolfram.System.Evolves","kind":"inductive","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":93,"family":"System","features":{"implies":5,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":338},"snippet":"inductive Evolves : HGraph V → List sys.Event → HGraph V → Prop\n| nil (s : HGraph V) : Evolves s [] s\n| cons {s : HGraph V} {es : List sys.Event} {t : HGraph V}\n    (e : sys.Event) :\n    e.Applicable (sys := sys) s →\n    Evolves (e.apply (sys := sys) s) es t →","pos":{"x":0.9885862809369715,"y":0.6045878783037694},"pos3":{"x":0.6988397569062076,"y":0.5465908697959927,"z":0.6503149291796037}},{"id":"HeytingLean.WPP.Wolfram.System.Reachable","name":"HeytingLean.WPP.Wolfram.System.Reachable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":102,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":132},"snippet":"def Reachable (t : HGraph V) : Prop :=\n  ∃ es, sys.Evolves sys.init es t\n\n/-- A normal form is a state with no applicable events. -/","pos":{"x":0.8088189603033494,"y":0.9568170302761942},"pos3":{"x":0.9863943922065215,"y":0.3615342544757534,"z":0.6635958099533812}},{"id":"HeytingLean.WPP.Wolfram.System.NormalForm","name":"HeytingLean.WPP.Wolfram.System.NormalForm","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":106,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":138},"snippet":"def NormalForm (s : HGraph V) : Prop :=\n  ∀ e : sys.Event, ¬ e.Applicable (sys := sys) s\n\nend System\n\nend Wolfram","pos":{"x":0.9027310780120651,"y":0.7898528231056776},"pos3":{"x":0.6886270606358589,"y":0.4227826404172816,"z":0.9618639341754536}},{"id":"HeytingLean.WPP.WppRule","name":"HeytingLean.WPP.WppRule","kind":"structure","path":"lean/HeytingLean/WPP/Multiway.lean","line":28,"family":"WppRule","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":197},"snippet":"structure WppRule (State : Type u) where\n  step : State → Finset State\n\nnamespace WppRule\n\nvariable {State : Type u} (R : WppRule State)","pos":{"x":0.8438155530051488,"y":0.6207872446723273},"pos3":{"x":0.7693618321721819,"y":0.4602181813490567,"z":0.47275718314696275}},{"id":"HeytingLean.WPP.WppRule.stepRel","name":"HeytingLean.WPP.WppRule.stepRel","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":36,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":51},"snippet":"def stepRel (s t : State) : Prop := t ∈ (R.step s)\n","pos":{"x":0.6879863251132194,"y":0.899798985031768},"pos3":{"x":0.9889809283865797,"y":0.25452529559375403,"z":0.2626045125482678}},{"id":"HeytingLean.WPP.WppRule.StepStar","name":"HeytingLean.WPP.WppRule.StepStar","kind":"inductive","path":"lean/HeytingLean/WPP/Multiway.lean","line":38,"family":"WppRule","features":{"implies":4,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":179},"snippet":"inductive StepStar : State → State → Prop\n| refl (s : State) : StepStar s s\n| tail {s t u : State} : stepRel R s t → StepStar t u → StepStar s u\n\nnamespace StepStar\n","pos":{"x":0.9583030141849642,"y":0.5993784927530025},"pos3":{"x":0.7105196253965504,"y":0.5374342264999006,"z":0.6003310599756853}},{"id":"HeytingLean.WPP.WppRule.StepStar.trans","name":"HeytingLean.WPP.WppRule.StepStar.trans","kind":"theorem","path":"lean/HeytingLean/WPP/Multiway.lean","line":46,"family":"WppRule","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":1,"length":311},"snippet":"theorem trans {s t u : State} :\n    StepStar (R := R) s t → StepStar (R := R) t u → StepStar (R := R) s u := by\n  intro hst htu\n  induction hst with\n  | refl =>\n      simpa using htu","pos":{"x":0.904802958539426,"y":0.6087429300536277},"pos3":{"x":0.7324730433612178,"y":0.5136803293848435,"z":0.6010708578820108}},{"id":"HeytingLean.WPP.WppRule.cone","name":"HeytingLean.WPP.WppRule.cone","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":58,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":149},"snippet":"def cone (s : State) : Set State := fun t => StepStar (R := R) s t\n\n/-- Interior view: `JR U s` means the forward cone of `s` is contained in `U`. -/","pos":{"x":0.6989972209854023,"y":0.8091694604363048},"pos3":{"x":0.93263974156297,"y":0.26246503786575576,"z":0.32925840847941035}},{"id":"HeytingLean.WPP.WppRule.JR","name":"HeytingLean.WPP.WppRule.JR","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":61,"family":"WppRule","features":{"implies":2,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":228},"snippet":"def JR (U : Set State) : Set State := fun s => ∀ t, cone (R := R) s t → U t\n\n@[simp] lemma JR_mem_iff {U : Set State} {s : State} :\n    JR (R := R) U s ↔ (∀ t, StepStar (R := R) s t → U t) := Iff.rfl\n\nnamespace JR","pos":{"x":0.9529099449471073,"y":0.7836293895972108},"pos3":{"x":0.7091834036161371,"y":0.4948501919014724,"z":0.9826951195662709}},{"id":"HeytingLean.WPP.WppRule.JR.mono","name":"HeytingLean.WPP.WppRule.JR.mono","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":70,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":92},"snippet":"lemma mono : Monotone (JR (R := R)) := by\n  intro U V hUV s hs t hst\n  exact hUV (hs _ hst)\n","pos":{"x":0.005167865876960237,"y":0.18665393782440287},"pos3":{"x":0.1185993137834008,"y":0.011575032095622726,"z":0.9724210323109738}},{"id":"HeytingLean.WPP.WppRule.JR.contractive","name":"HeytingLean.WPP.WppRule.JR.contractive","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":74,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":104},"snippet":"lemma contractive (U : Set State) : JR (R := R) U ⊆ U := by\n  intro s hs\n  exact hs s (StepStar.refl s)\n","pos":{"x":0.6161123069398872,"y":0.9062214262133294},"pos3":{"x":0.958446373846863,"y":0.2162945047565791,"z":0.15544915661491082}},{"id":"HeytingLean.WPP.WppRule.JR.idem","name":"HeytingLean.WPP.WppRule.JR.idem","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":78,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":247},"snippet":"lemma idem (U : Set State) : JR (R := R) (JR (R := R) U) = JR (R := R) U := by\n  ext s\n  constructor\n  · intro hs t hst\n    exact (contractive (R := R) (U := U)) (hs t hst)\n  · intro hs t hst u htu","pos":{"x":0.05584221538754368,"y":0.2660632461668036},"pos3":{"x":0.20452643937422949,"y":0.03810859324053096,"z":0.7730876935454155}},{"id":"HeytingLean.WPP.WppRule.JR.inf","name":"HeytingLean.WPP.WppRule.JR.inf","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":86,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":1,"length":492},"snippet":"lemma inf (U V : Set State) :\n    JR (R := R) (U ∩ V) = JR (R := R) U ∩ JR (R := R) V := by\n  ext s\n  constructor\n  · intro hs\n    refine And.intro ?_ ?_","pos":{"x":0.41229514977322246,"y":0.7898481484542706},"pos3":{"x":0.6776965239630811,"y":0.10057805463314086,"z":0.1924127244755227}},{"id":"HeytingLean.WPP.WppRule.unreachableFrom","name":"HeytingLean.WPP.WppRule.unreachableFrom","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":110,"family":"WppRule","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":201},"snippet":"def unreachableFrom : Set State :=\n  {s | ¬ StepStar (R := R) s₀ s}\n\n/-- Inflationary nucleus on predicates: “treat unreachable states as vacuously admissible”\nby unioning them into every predicate. -/","pos":{"x":0.5413506884966687,"y":0.5169729708377141},"pos3":{"x":0.5651530793020756,"y":0.2693978938457138,"z":0.7628772916581719}},{"id":"HeytingLean.WPP.WppRule.reachabilityNucleus","name":"HeytingLean.WPP.WppRule.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":115,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":14,"parenDepth":1,"length":847},"snippet":"def reachabilityNucleus : Nucleus (Set State) where\n  toFun U := U ∪ unreachableFrom (R := R) s₀\n  map_inf' U V := by\n    ext s\n    constructor\n    · intro hs","pos":{"x":0.34577375331557353,"y":0.7037252681826709},"pos3":{"x":0.5786102393052575,"y":0.07808243300710895,"z":0.304370159417655}},{"id":"HeytingLean.WPP.WppRel","name":"HeytingLean.WPP.WppRel","kind":"structure","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":33,"family":"WppRel","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":199},"snippet":"structure WppRel (State : Type u) where\n  stepRel : State → State → Prop\n\nnamespace WppRel\n\nvariable {State : Type u} (R : WppRel State)","pos":{"x":0.9235874887354331,"y":0.6040651844560484},"pos3":{"x":0.7528001735805193,"y":0.5225468342689532,"z":0.567429742480389}},{"id":"HeytingLean.WPP.WppRel.StepStar","name":"HeytingLean.WPP.WppRel.StepStar","kind":"abbrev","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":41,"family":"WppRel","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":127},"snippet":"abbrev StepStar : State → State → Prop :=\n  Relation.ReflTransGen R.stepRel\n\n/-- Forward cone of a state under the relation. -/","pos":{"x":0.8884295461574273,"y":0.5647833079970092},"pos3":{"x":0.760776649198998,"y":0.5334739102544757,"z":0.45979183114775873}},{"id":"HeytingLean.WPP.WppRel.cone","name":"HeytingLean.WPP.WppRel.cone","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":45,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":147},"snippet":"def cone (s : State) : Set State := fun t => StepStar (R := R) s t\n\n/-- Kernel view: `JR U s` means the forward cone of `s` is contained in `U`. -/","pos":{"x":0.7155045555736448,"y":0.8165311664888172},"pos3":{"x":0.9173696139222615,"y":0.2575190612067034,"z":0.33580626471249836}},{"id":"HeytingLean.WPP.WppRel.JR","name":"HeytingLean.WPP.WppRel.JR","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":48,"family":"WppRel","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":108},"snippet":"def JR (U : Set State) : Set State := fun s => ∀ t, StepStar (R := R) s t → U t\n\nnamespace JR\n\nvariable {R}\n","pos":{"x":0.9448093066797129,"y":0.7607323336716293},"pos3":{"x":0.7285095978226239,"y":0.47991140433428764,"z":0.9516912950147258}},{"id":"HeytingLean.WPP.WppRel.JR.mono","name":"HeytingLean.WPP.WppRel.JR.mono","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":54,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":92},"snippet":"lemma mono : Monotone (JR (R := R)) := by\n  intro U V hUV s hs t hst\n  exact hUV (hs _ hst)\n","pos":{"x":0,"y":0.18247216644561692},"pos3":{"x":0.12581622791213207,"y":0,"z":0.9742345745091112}},{"id":"HeytingLean.WPP.WppRel.JR.contractive","name":"HeytingLean.WPP.WppRel.JR.contractive","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":58,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":115},"snippet":"lemma contractive (U : Set State) : JR (R := R) U ⊆ U := by\n  intro s hs\n  exact hs s (Relation.ReflTransGen.refl)\n","pos":{"x":0.6193581468061597,"y":0.8983197764101634},"pos3":{"x":0.946695866251515,"y":0.21916374052570195,"z":0.14553393569170234}},{"id":"HeytingLean.WPP.WppRel.JR.idem","name":"HeytingLean.WPP.WppRel.JR.idem","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":62,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":251},"snippet":"lemma idem (U : Set State) : JR (R := R) (JR (R := R) U) = JR (R := R) U := by\n  ext s\n  constructor\n  · intro hs t hst\n    exact (contractive (R := R) (U := U)) (hs t hst)\n  · intro hs t hst u htu","pos":{"x":0.07654822509947447,"y":0.2919755611885604},"pos3":{"x":0.20881252483112442,"y":0.036025757082188165,"z":0.7744971780803998}},{"id":"HeytingLean.WPP.WppRel.JR.inf","name":"HeytingLean.WPP.WppRel.JR.inf","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":70,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":1,"length":478},"snippet":"lemma inf (U V : Set State) :\n    JR (R := R) (U ∩ V) = JR (R := R) U ∩ JR (R := R) V := by\n  ext s\n  constructor\n  · intro hs\n    refine And.intro ?_ ?_","pos":{"x":0.41327470368275415,"y":0.7906079642664511},"pos3":{"x":0.6826659825704626,"y":0.0946128396213159,"z":0.20198903732387002}},{"id":"HeytingLean.WPP.WppRel.unreachableFrom","name":"HeytingLean.WPP.WppRel.unreachableFrom","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":92,"family":"WppRel","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":201},"snippet":"def unreachableFrom : Set State :=\n  {s | ¬ StepStar (R := R) s₀ s}\n\n/-- Inflationary nucleus on predicates: “treat unreachable states as vacuously admissible”\nby unioning them into every predicate. -/","pos":{"x":0.5489903088093695,"y":0.5221252361820471},"pos3":{"x":0.5860124695826944,"y":0.26888848725442965,"z":0.8027165283182076}},{"id":"HeytingLean.WPP.WppRel.reachabilityNucleus","name":"HeytingLean.WPP.WppRel.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":97,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":14,"parenDepth":1,"length":847},"snippet":"def reachabilityNucleus : Nucleus (Set State) where\n  toFun U := U ∪ unreachableFrom (R := R) s₀\n  map_inf' U V := by\n    ext s\n    constructor\n    · intro hs","pos":{"x":0.34189032766850175,"y":0.6955929943371039},"pos3":{"x":0.5815566911084215,"y":0.07989902967940893,"z":0.29565109412265184}}],"edges":[[0,2],[0,108],[0,124],[0,44],[0,20],[1,91],[1,72],[1,143],[1,153],[1,50],[2,108],[2,124],[2,14],[2,103],[3,57],[3,56],[3,83],[3,99],[3,120],[4,49],[4,102],[4,150],[4,43],[4,53],[5,94],[5,85],[5,92],[5,66],[5,101],[6,105],[6,11],[6,142],[6,152],[6,17],[7,109],[7,149],[7,62],[7,28],[7,64],[8,28],[8,64],[8,62],[8,147],[8,149],[9,104],[9,117],[9,110],[9,137],[9,17],[10,119],[10,54],[10,106],[10,35],[10,37],[11,17],[11,105],[11,142],[11,152],[12,53],[12,140],[12,150],[12,49],[13,130],[13,97],[13,131],[13,26],[13,98],[14,103],[14,135],[14,89],[14,108],[14,118],[15,113],[15,138],[15,148],[15,46],[15,47],[16,112],[16,18],[16,82],[16,71],[16,50],[17,111],[17,104],[17,105],[18,82],[18,71],[18,50],[18,91],[18,143],[19,78],[19,129],[19,118],[19,58],[19,126],[20,44],[20,124],[20,43],[20,102],[20,49],[21,35],[21,38],[21,37],[21,106],[22,95],[22,122],[22,55],[22,48],[22,76],[23,84],[23,114],[23,72],[23,80],[24,60],[24,25],[24,61],[24,32],[24,67],[25,61],[25,60],[25,32],[25,67],[26,97],[26,98],[26,145],[26,130],[27,63],[27,34],[27,33],[27,87],[27,74],[28,64],[28,62],[28,147],[28,139],[29,30],[29,31],[29,65],[29,66],[29,92],[30,31],[30,65],[30,66],[30,92],[31,65],[31,66],[31,92],[32,67],[32,61],[32,60],[33,34],[33,39],[33,40],[33,41],[34,39],[34,40],[34,41],[35,37],[35,38],[35,119],[36,125],[36,123],[36,80],[36,141],[36,151],[37,38],[37,119],[38,77],[39,40],[39,41],[39,73],[39,74],[40,41],[40,73],[40,74],[41,73],[41,74],[42,75],[42,110],[42,53],[42,137],[42,140],[43,44],[43,49],[43,102],[43,124],[43,150],[44,124],[44,49],[44,102],[45,81],[45,100],[45,121],[45,70],[45,112],[46,47],[46,113],[46,138],[46,148],[47,113],[47,138],[47,148],[48,76],[48,51],[48,52],[48,122],[48,88],[49,102],[49,150],[50,71],[50,82],[50,143],[50,153],[50,91],[51,52],[51,88],[51,76],[51,90],[52,88],[52,76],[52,90],[53,140],[53,150],[54,106],[54,119],[54,151],[55,77],[55,95],[56,57],[56,99],[56,120],[56,83],[57,99],[57,83],[57,120],[58,116],[58,126],[58,78],[58,90],[59,79],[59,121],[59,70],[59,120],[60,61],[60,67],[61,67],[62,64],[62,149],[62,109],[63,87],[63,74],[64,147],[64,139],[65,66],[65,92],[66,92],[68,69],[68,133],[69,133],[70,121],[70,81],[70,100],[71,82],[71,91],[71,143],[72,114],[72,84],[72,143],[73,74],[75,110],[75,137],[75,140],[76,122],[76,88],[77,95],[78,118],[78,129],[78,89],[79,120],[79,121],[80,125],[80,123],[80,141],[81,100],[81,112],[81,121],[82,143],[82,153],[83,99],[83,120],[84,114],[85,92],[85,115],[86,146],[86,136],[88,90],[89,135],[89,103],[89,118],[90,126],[90,116],[91,143],[91,153],[92,115],[93,144],[93,132],[93,127],[93,142],[93,152],[94,101],[95,122],[96,132],[96,128],[96,127],[96,144],[97,130],[97,98],[97,145],[98,145],[98,109],[98,130],[99,120],[99,121],[100,112],[100,121],[101,134],[102,124],[103,135],[103,108],[104,111],[104,105],[105,111],[105,144],[106,119],[106,151],[107,138],[107,148],[107,113],[108,135],[109,149],[110,137],[110,117],[113,138],[113,148],[116,126],[116,129],[117,137],[118,129],[118,135],[120,121],[123,125],[123,141],[123,151],[125,141],[125,151],[126,129],[127,128],[127,132],[127,144],[127,142],[128,132],[128,144],[130,131],[131,146],[132,144],[132,142],[136,146],[138,148],[139,147],[140,150],[141,151],[142,152],[142,144],[143,153],[144,152]],"edgesSemantic":[]}