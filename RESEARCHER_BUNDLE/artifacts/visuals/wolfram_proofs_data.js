window.WOLFRAM_PROOFS = {"meta":{"generatedAt":"2025-12-28T18:15:38.970Z","seed":"wolfram-wpp-umap-v1","vectorSignature":{"schema":"Φ/v1","weights":{"A":1,"B":0.7,"C":0.3,"D":0.2},"seed":"wolfram-wpp-umap-v1","umap":"umap-js","pins":{"umap":"umap-js"},"providers":{},"digest":"0ff97cb21fd4a701ab833da455463ce80fb8273ec70707b0d0da78abbe56ee18","phiDigest":"412c1e9b1efa14140bef62405474e0cef08b08ca509b096f1eba4f99192b61af"},"source":"lean/HeytingLean/WPP/Wolfram","notes":"UMAP embedding of Wolfram/WPP declarations (feature vectors derived from Lean source text)."},"items":[{"id":"HeytingLean.WPP.Wolfram.System.pathsAtDepth","name":"HeytingLean.WPP.Wolfram.System.pathsAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":35,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":0,"parenDepth":3,"length":282},"snippet":"def pathsAtDepth : Nat → Finset (List sys.EventData × HGraph V)\n  | 0 => {([], sys.init)}\n  | n + 1 =>\n      (pathsAtDepth n).biUnion (fun p =>\n        (sys.stepEdges p.2).image (fun e => (p.1 ++ [e.1], e.2)))\n","pos":{"x":0.1835991324130934,"y":0.6018183849206798},"pos3":{"x":0.8132843778251998,"y":0.5755266148378742,"z":0.48905835947191095}},{"id":"HeytingLean.WPP.Wolfram.System.mem_pathsAtDepth_len","name":"HeytingLean.WPP.Wolfram.System.mem_pathsAtDepth_len","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":42,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":6,"parenDepth":1,"length":798},"snippet":"lemma mem_pathsAtDepth_len {n : Nat} {p : List sys.EventData} {t : HGraph V} :\n    (p, t) ∈ sys.pathsAtDepth n → p.length = n := by\n  classical\n  -- generalize over `(p,t)` so the IH applies to predecessor paths\n  revert p t\n  induction n with","pos":{"x":0.5252134666671728,"y":0.22846439225437665},"pos3":{"x":0.6047198113702466,"y":0.8403413272298764,"z":0.7271496374837155}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepStates_of_mem_stepEdges","name":"HeytingLean.WPP.Wolfram.System.mem_stepStates_of_mem_stepEdges","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":62,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":286},"snippet":"lemma mem_stepStates_of_mem_stepEdges {s t : HGraph V} {ed : sys.EventData} :\n    (ed, t) ∈ sys.stepEdges s → t ∈ sys.stepStates s := by\n  intro h\n  refine Finset.mem_image.mpr ?_\n  exact ⟨(ed, t), h, rfl⟩\n","pos":{"x":0.4111407247909994,"y":0.017580969404672634},"pos3":{"x":0.9796117849544789,"y":0.8067040328378609,"z":0.6186795860617392}},{"id":"HeytingLean.WPP.Wolfram.System.image_snd_pathsAtDepth_eq_statesAtDepth","name":"HeytingLean.WPP.Wolfram.System.image_snd_pathsAtDepth_eq_statesAtDepth","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":69,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":1,"exists":0,"eq":3,"tactics":17,"parenDepth":3,"length":2520},"snippet":"theorem image_snd_pathsAtDepth_eq_statesAtDepth : ∀ n,\n    (sys.pathsAtDepth n).image Prod.snd = sys.statesAtDepth n := by\n  classical\n  intro n\n  induction n with\n  | zero =>","pos":{"x":0.158314995910628,"y":0.5311862669424824},"pos3":{"x":0.773367148553883,"y":0.6624094085864926,"z":0.43639699962092027}},{"id":"HeytingLean.WPP.Wolfram.System.pathCountAtDepth","name":"HeytingLean.WPP.Wolfram.System.pathCountAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":119,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":0,"parenDepth":2,"length":253},"snippet":"def pathCountAtDepth (n : Nat) (t : HGraph V) : Nat :=\n  ((sys.pathsAtDepth n).filter (fun p => p.2 = t)).card\n\n/-! ## Branchial graphs (siblings share a predecessor) -/\n\n/-- Unordered sibling-pairs among the children of a state (self-pairs removed). -/","pos":{"x":0.2992279807189799,"y":0.8877288486700327},"pos3":{"x":0.6804016986394321,"y":0.16960826828129574,"z":0.5837670888097641}},{"id":"HeytingLean.WPP.Wolfram.System.siblingEdges","name":"HeytingLean.WPP.Wolfram.System.siblingEdges","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":125,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":166},"snippet":"def siblingEdges (s : HGraph V) : Finset (Sym2 (HGraph V)) :=\n  ((sys.stepStates s).sym2).filter (fun z => ¬ z.IsDiag)\n\n/-- The branchial edges at exact depth `n`. -/","pos":{"x":0.02303815037145384,"y":0.579919504935052},"pos3":{"x":0.990137920709215,"y":0.899228567264676,"z":0.30706356933767504}},{"id":"HeytingLean.WPP.Wolfram.System.branchialEdgesAtDepth","name":"HeytingLean.WPP.Wolfram.System.branchialEdgesAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Branchial.lean","line":129,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":0,"parenDepth":2,"length":204},"snippet":"def branchialEdgesAtDepth : Nat → Finset (Sym2 (HGraph V))\n  | 0 => ∅\n  | n + 1 => (sys.statesAtDepth n).biUnion (fun s => sys.siblingEdges s)\n\nend Finite\n","pos":{"x":0.3939025824514422,"y":0.03618438706092429},"pos3":{"x":0.9509955628601217,"y":0.7739294640134193,"z":0.6209292056865583}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph","name":"HeytingLean.WPP.Wolfram.CausalGraph","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":23,"family":"CausalGraph","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":117},"snippet":"structure CausalGraph where\n  n : Nat\n  edge : Fin n → Fin n → Prop\n\nnamespace CausalGraph\n","pos":{"x":0.4930864547031079,"y":0.1888502528307113},"pos3":{"x":0.6496265210905358,"y":0.8668533316712302,"z":0.7093296889151167}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.Iso","name":"HeytingLean.WPP.Wolfram.CausalGraph.Iso","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":30,"family":"CausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":110},"snippet":"def Iso (g₁ g₂ : CausalGraph) : Prop :=\n  ∃ e : Fin g₁.n ≃ Fin g₂.n, ∀ i j, g₁.edge i j ↔ g₂.edge (e i) (e j)\n","pos":{"x":0.18414831509852223,"y":0.275326985946942},"pos3":{"x":0.4885651818392892,"y":0.6379934162473874,"z":0.42363835702733543}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.Iso.n_eq","name":"HeytingLean.WPP.Wolfram.CausalGraph.Iso.n_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":33,"family":"CausalGraph","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":221},"snippet":"lemma Iso.n_eq {g₁ g₂ : CausalGraph} : Iso g₁ g₂ → g₁.n = g₂.n := by\n  intro h\n  rcases h with ⟨e, _⟩\n  -- Cardinalities of finite types agree under an equivalence.\n  simpa [Fintype.card_fin] using (Fintype.card_congr e)\n","pos":{"x":0.5122225312687883,"y":0.21948129218075063},"pos3":{"x":0.5975325675891523,"y":0.843172307687679,"z":0.7199367950636617}},{"id":"HeytingLean.WPP.Wolfram.CausalGraph.not_Iso_of_n_ne","name":"HeytingLean.WPP.Wolfram.CausalGraph.not_Iso_of_n_ne","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":39,"family":"CausalGraph","features":{"implies":1,"not":1,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":456},"snippet":"lemma not_Iso_of_n_ne {g₁ g₂ : CausalGraph} (h : g₁.n ≠ g₂.n) : ¬ Iso g₁ g₂ := by\n  intro hiso\n  exact h (Iso.n_eq hiso)\n\nend CausalGraph\n","pos":{"x":0.018186035804445437,"y":0.5469127760034428},"pos3":{"x":0.9584227891610418,"y":0.8815844306619883,"z":0.3119952071059538}},{"id":"HeytingLean.WPP.Wolfram.System.causalGraphOf","name":"HeytingLean.WPP.Wolfram.System.causalGraphOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraph.lean","line":56,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":205},"snippet":"def causalGraphOf (es : List sys.Event) : CausalGraph where\n  n := es.length\n  edge := fun i j =>\n    i.1 < j.1 ∧ (es.get i).Causes (sys := sys) (es.get j)\n\nend System","pos":{"x":0.14336491338082763,"y":0.478030231634736},"pos3":{"x":0.7591879995627614,"y":0.714977139299346,"z":0.41098629888118804}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.ConcreteEvent","name":"HeytingLean.WPP.Wolfram.SystemFresh.ConcreteEvent","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphFresh.lean","line":36,"family":"SystemFresh","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":428},"snippet":"structure ConcreteEvent (sys : SystemFresh V P) where\n  e : sys.Event\n  τ : Fin e.rule.nFresh → V\n\nnamespace ConcreteEvent\n","pos":{"x":0.13897119144960082,"y":0.47343413187139316},"pos3":{"x":0.7837703168066967,"y":0.726958328057196,"z":0.42487383350464925}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.ConcreteEvent.Causes","name":"HeytingLean.WPP.Wolfram.SystemFresh.ConcreteEvent.Causes","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphFresh.lean","line":52,"family":"SystemFresh","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":169},"snippet":"def Causes (ce₁ ce₂ : sys.ConcreteEvent) : Prop :=\n  ∃ x, x ∈ ce₁.output ∧ x ∈ ce₂.input\n\nend ConcreteEvent\n\n/-- Build the causal graph of a concrete singleway trace. -/","pos":{"x":0.17868788578587264,"y":0.29448848299096664},"pos3":{"x":0.5238959330019042,"y":0.6257256144981084,"z":0.42122813859364716}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.causalGraphOf","name":"HeytingLean.WPP.Wolfram.SystemFresh.causalGraphOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphFresh.lean","line":58,"family":"SystemFresh","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":219},"snippet":"def causalGraphOf (es : List sys.ConcreteEvent) : CausalGraph where\n  n := es.length\n  edge := fun i j =>\n    i.1 < j.1 ∧ (es.get i).Causes (sys := sys) (es.get j)\n\nend SystemFresh","pos":{"x":0.14944472447649348,"y":0.4817602901979646},"pos3":{"x":0.7653352178767469,"y":0.710863162918806,"z":0.4175591486610684}},{"id":"HeytingLean.WPP.Wolfram.System.Multiset.fold_or_eq_true_of_mem_true","name":"HeytingLean.WPP.Wolfram.System.Multiset.fold_or_eq_true_of_mem_true","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":33,"family":"System","features":{"implies":1,"not":1,"and":1,"or":1,"forall":1,"exists":0,"eq":7,"tactics":10,"parenDepth":1,"length":742},"snippet":"lemma fold_or_eq_true_of_mem_true :\n    ∀ {s : Multiset Bool}, true ∈ s → s.fold (· || ·) false = true := by\n  intro s h\n  induction s using Multiset.induction_on with\n  | empty =>\n      simp at h","pos":{"x":0.022912440594251026,"y":0.5470010117262796},"pos3":{"x":0.952452145317855,"y":0.8778805478368755,"z":0.3122727238649311}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Created","name":"HeytingLean.WPP.Wolfram.System.Event.Created","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":56,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":183},"snippet":"def Created (e : sys.Event) (x : Expr V) : Prop :=\n  x ∈ e.output (sys := sys) ∧ x ∉ e.input (sys := sys)\n\n/-- Boolean test: the event creates some expression that survives in `t`. -/","pos":{"x":0.14582750575874395,"y":0.48585936701086013},"pos3":{"x":0.762879947645722,"y":0.7079939378090823,"z":0.41548737618887327}},{"id":"HeytingLean.WPP.Wolfram.System.Event.observableB","name":"HeytingLean.WPP.Wolfram.System.Event.observableB","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":60,"family":"System","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":3,"length":318},"snippet":"def observableB (e : sys.Event) (t : HGraph V) : Bool :=\n  let createdInT : Expr V → Bool :=\n    fun x => decide (x ∉ e.input (sys := sys) ∧ x ∈ t)\n  ((e.output (sys := sys)).map createdInT).fold (· || ·) false\n\n/-- An event is *observable* w.r.t. an endpoint state `t` if it creates some expression present in `t`. -/","pos":{"x":0.167099430223661,"y":0.5620179658821289},"pos3":{"x":0.7808563703369972,"y":0.6292266829333478,"z":0.4498867894832799}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Observable","name":"HeytingLean.WPP.Wolfram.System.Event.Observable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":66,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":200},"snippet":"def Observable (e : sys.Event) (t : HGraph V) : Prop :=\n  observableB (sys := sys) e t = true\n\nend Event\n\n/-- The (sorted) list of indices of events in `es` that are observable w.r.t. endpoint `t`. -/","pos":{"x":0.6117874749992616,"y":0.5773587189263345},"pos3":{"x":0.002593909823764668,"y":0.07198971982610283,"z":0.8854524334482624}},{"id":"HeytingLean.WPP.Wolfram.System.observableIdxs","name":"HeytingLean.WPP.Wolfram.System.observableIdxs","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":72,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":276},"snippet":"def observableIdxs (es : List sys.Event) (t : HGraph V) : List (Fin es.length) :=\n  (List.finRange es.length).filter (fun i => Event.observableB (sys := sys) (es.get i) t)\n\n/-- Observable-event causal graph of an evolution ending in `t` (a \"garbage-collected\" abstraction). -/","pos":{"x":0.30571738466449294,"y":0.8934790127519177},"pos3":{"x":0.6724316737914153,"y":0.14676701619270704,"z":0.57912548518018}},{"id":"HeytingLean.WPP.Wolfram.System.causalGraphGCOf","name":"HeytingLean.WPP.Wolfram.System.causalGraphGCOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":76,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":505},"snippet":"def causalGraphGCOf (es : List sys.Event) (t : HGraph V) : CausalGraph :=\n  let idxs := observableIdxs (sys := sys) es t\n  { n := idxs.length\n    edge := fun i j =>\n      let ii : Fin es.length := idxs.get i\n      let jj : Fin es.length := idxs.get j","pos":{"x":0.1392130079485391,"y":0.4745212810716218},"pos3":{"x":0.7775642531454385,"y":0.7041012349152705,"z":0.4069087209671368}},{"id":"HeytingLean.WPP.Wolfram.Properties.GCausalInvariant","name":"HeytingLean.WPP.Wolfram.Properties.GCausalInvariant","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphGC.lean","line":92,"family":"Properties","features":{"implies":4,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":321},"snippet":"def GCausalInvariant : Prop :=\n  ∀ ⦃es₁ es₂ : List sys.Event⦄ ⦃t₁ t₂ : HGraph V⦄,\n    sys.Evolves sys.init es₁ t₁ → sys.NormalForm t₁ →\n    sys.Evolves sys.init es₂ t₂ → sys.NormalForm t₂ →\n    CausalGraph.Iso (sys.causalGraphGCOf es₁ t₁) (sys.causalGraphGCOf es₂ t₂)\n","pos":{"x":0.40313733603591484,"y":0.1628635514952047},"pos3":{"x":0.7773104349857972,"y":0.855825733769817,"z":0.641041549741373}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":26,"family":"LabeledCausalGraph","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":246},"snippet":"structure LabeledCausalGraph (V : Type u) where\n  n : Nat\n  label : Fin n → Fin n → Multiset (Expr V)\n\nnamespace LabeledCausalGraph\n","pos":{"x":0.4699216984700245,"y":0.17380308801547},"pos3":{"x":0.6879238272089961,"y":0.8720509969132909,"z":0.6947538398777661}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.edge","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.edge","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":35,"family":"LabeledCausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":134},"snippet":"def edge (g : LabeledCausalGraph V) (i j : Fin g.n) : Prop :=\n  g.label i j ≠ 0\n\n/-- Forget labels to obtain a plain `CausalGraph`. -/","pos":{"x":0.8402711882654543,"y":0.0026854961096363815},"pos3":{"x":0.4083731656787622,"y":0.7904788664787726,"z":0.990862617079539}},{"id":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.forget","name":"HeytingLean.WPP.Wolfram.LabeledCausalGraph.forget","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":39,"family":"LabeledCausalGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":308},"snippet":"def forget (g : LabeledCausalGraph V) : CausalGraph :=\n  { n := g.n\n    edge := fun i j => g.edge i j }\n\nend LabeledCausalGraph\n","pos":{"x":0.6117481761066661,"y":0.5746998377603895},"pos3":{"x":0.00041892865987464,"y":0.06395907652565173,"z":0.8829213287283586}},{"id":"HeytingLean.WPP.Wolfram.System.Event.causeWitnesses","name":"HeytingLean.WPP.Wolfram.System.Event.causeWitnesses","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":53,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":91},"snippet":"def Event.causeWitnesses (e₁ e₂ : sys.Event) : Multiset (Expr V) :=\n  e₁.output ∩ e₂.input\n","pos":{"x":0.8507142968190327,"y":0.012554565063502434},"pos3":{"x":0.40404542742818583,"y":0.7883386886243676,"z":0.9916396088647673}},{"id":"HeytingLean.WPP.Wolfram.System.causeWitnesses_ne_zero_iff_causes","name":"HeytingLean.WPP.Wolfram.System.causeWitnesses_ne_zero_iff_causes","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":56,"family":"System","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":1,"tactics":11,"parenDepth":2,"length":991},"snippet":"lemma causeWitnesses_ne_zero_iff_causes (e₁ e₂ : sys.Event) :\n    e₁.causeWitnesses (sys := sys) e₂ ≠ 0 ↔ e₁.Causes (sys := sys) e₂ := by\n  classical\n  constructor\n  · intro hne\n    rcases Multiset.exists_mem_of_ne_zero hne with ⟨x, hx⟩","pos":{"x":0.1506399278214426,"y":0.5158561133581474},"pos3":{"x":0.7749813076598671,"y":0.6719549724405008,"z":0.4326750483248864}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":79,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":210},"snippet":"def labeledCausalGraphOf (es : List sys.Event) : LabeledCausalGraph V where\n  n := es.length\n  label := fun i j =>\n    if i.1 < j.1 then\n      (es.get i).causeWitnesses (sys := sys) (es.get j)\n    else","pos":{"x":0.6059632123688696,"y":0.590028577262336},"pos3":{"x":0.00541548211928375,"y":0.07092666936176487,"z":0.8838582697741578}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_edge_iff","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_edge_iff","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":87,"family":"System","features":{"implies":0,"not":1,"and":2,"or":0,"forall":0,"exists":0,"eq":0,"tactics":5,"parenDepth":2,"length":900},"snippet":"theorem labeledCausalGraphOf_forget_edge_iff (es : List sys.Event) (i j : Fin es.length) :\n    (labeledCausalGraphOf (sys := sys) es).forget.edge i j ↔ (sys.causalGraphOf es).edge i j := by\n  classical\n  by_cases hlt : i.1 < j.1\n  · -- `i<j`: nonempty intersection ↔ `Causes`\n    have hcauses :","pos":{"x":0.044770597913951965,"y":0.5424601425568011},"pos3":{"x":0.9475496812137296,"y":0.8629480784274411,"z":0.32158510494482984}},{"id":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_iso_causalGraphOf","name":"HeytingLean.WPP.Wolfram.System.labeledCausalGraphOf_forget_iso_causalGraphOf","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/CausalGraphLabeled.lean","line":102,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":333},"snippet":"theorem labeledCausalGraphOf_forget_iso_causalGraphOf (es : List sys.Event) :\n    CausalGraph.Iso (labeledCausalGraphOf (sys := sys) es).forget (sys.causalGraphOf es) := by\n  refine ⟨Equiv.refl _, ?_⟩\n  intro i j\n  simpa using labeledCausalGraphOf_forget_edge_iff (sys := sys) es i j\n","pos":{"x":0.3338686529284666,"y":0.8902503787486435},"pos3":{"x":0.7249345813481278,"y":0.12601968533157873,"z":0.5776841236719201}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.StepWith","name":"HeytingLean.WPP.Wolfram.SystemFresh.StepWith","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalInvarianceSingleLHS.lean","line":37,"family":"SystemFresh","features":{"implies":1,"not":0,"and":2,"or":0,"forall":0,"exists":2,"eq":1,"tactics":0,"parenDepth":1,"length":208},"snippet":"def StepWith (s t : HGraph V) : Prop :=\n  ∃ e : sys.Event,\n    ∃ τ : Fin (e.rule.nFresh) → V,\n      e.Applicable s ∧ e.FreshAssign τ s ∧ e.applyWith τ s = t\n\n/-- Reflexive–transitive closure of `StepWith`. -/","pos":{"x":0.18290991948685753,"y":0.30684938668061024},"pos3":{"x":0.5314213924429613,"y":0.6294969209448412,"z":0.42770813550910547}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.StepStarWith","name":"HeytingLean.WPP.Wolfram.SystemFresh.StepStarWith","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/CausalInvarianceSingleLHS.lean","line":43,"family":"SystemFresh","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":229},"snippet":"abbrev StepStarWith : HGraph V → HGraph V → Prop :=\n  Relation.ReflTransGen (StepWith (sys := sys))\n\n/-! ## Branch resolution up to vertex renaming -/\n\n/-- Two states are *joinable* if they can be evolved to isomorphic states. -/","pos":{"x":0.42417033003608373,"y":0.07534203109993183},"pos3":{"x":0.904037007217949,"y":0.8139243508350912,"z":0.628442663459553}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.JoinableIso","name":"HeytingLean.WPP.Wolfram.SystemFresh.JoinableIso","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalInvarianceSingleLHS.lean","line":49,"family":"SystemFresh","features":{"implies":0,"not":0,"and":2,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":246},"snippet":"def JoinableIso (b c : HGraph V) : Prop :=\n  ∃ d₁ d₂,\n    StepStarWith (sys := sys) b d₁ ∧\n    StepStarWith (sys := sys) c d₂ ∧\n    HGraph.Iso d₁ d₂\n","pos":{"x":0.1745722965314908,"y":0.30169767926735996},"pos3":{"x":0.537169553460655,"y":0.6230943603253281,"z":0.4211502766846602}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.BranchResolves","name":"HeytingLean.WPP.Wolfram.SystemFresh.BranchResolves","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalInvarianceSingleLHS.lean","line":56,"family":"SystemFresh","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":244},"snippet":"def BranchResolves (a b c : HGraph V) : Prop :=\n  StepWith (sys := sys) a b →\n  StepWith (sys := sys) a c →\n  JoinableIso (sys := sys) b c\n\n/-- **Causal invariance** (Wolfram Physics / \"branch-pair resolution\"): every one-step fork resolves. -/","pos":{"x":0.4765528851116416,"y":0.17902197207503434},"pos3":{"x":0.6880538130952808,"y":0.8702895514477588,"z":0.6944387828641077}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.CausalInvariant","name":"HeytingLean.WPP.Wolfram.SystemFresh.CausalInvariant","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/CausalInvarianceSingleLHS.lean","line":62,"family":"SystemFresh","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":180},"snippet":"def CausalInvariant : Prop :=\n  ∀ a b c, StepWith (sys := sys) a b → StepWith (sys := sys) a c → JoinableIso (sys := sys) b c\n\nend SystemFresh\n\nend Wolfram","pos":{"x":0.37513636868137884,"y":0.2100753696688007},"pos3":{"x":0.703320151712921,"y":0.8677884463503981,"z":0.6191662427960086}},{"id":"HeytingLean.WPP.Wolfram.Properties.ConfluentNF","name":"HeytingLean.WPP.Wolfram.Properties.ConfluentNF","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":33,"family":"Properties","features":{"implies":4,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":261},"snippet":"def ConfluentNF : Prop :=\n  ∀ ⦃s₁ s₂ : HGraph V⦄,\n    sys.Reachable s₁ → sys.NormalForm s₁ →\n    sys.Reachable s₂ → sys.NormalForm s₂ →\n    HGraph.Iso s₁ s₂\n","pos":{"x":0.4066795593407594,"y":0.16595872713558074},"pos3":{"x":0.7836833990467076,"y":0.8502896867814976,"z":0.6452401067671409}},{"id":"HeytingLean.WPP.Wolfram.Properties.CausalInvariant","name":"HeytingLean.WPP.Wolfram.Properties.CausalInvariant","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":40,"family":"Properties","features":{"implies":5,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":435},"snippet":"def CausalInvariant : Prop :=\n  ∀ ⦃es₁ es₂ : List sys.Event⦄ ⦃t₁ t₂ : HGraph V⦄,\n    sys.Evolves sys.init es₁ t₁ → sys.NormalForm t₁ →\n    sys.Evolves sys.init es₂ t₂ → sys.NormalForm t₂ →\n    CausalGraph.Iso (sys.causalGraphOf es₁) (sys.causalGraphOf es₂)\n","pos":{"x":0.4148778935708386,"y":0.15071923318154906},"pos3":{"x":0.7823318627292016,"y":0.8545672431467042,"z":0.6425056385136402}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.sigma2","name":"HeytingLean.WPP.Wolfram.Counterexamples.sigma2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":57,"family":"Counterexamples","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":4,"parenDepth":2,"length":392},"snippet":"def sigma2 (a b : V) : Fin 2 → V :=\n  Fin.cases a (fun _ : Fin 1 => b)\n\n@[simp] lemma sigma2_zero (a b : V) : sigma2 (V := V) a b 0 = a := by\n  simp [sigma2]\n","pos":{"x":0.38649115816583907,"y":0.04592475256926864},"pos3":{"x":0.9419477417702843,"y":0.7566458540212536,"z":0.6207882819441143}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.inj_sigma2","name":"HeytingLean.WPP.Wolfram.Counterexamples.inj_sigma2","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":69,"family":"Counterexamples","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":10,"tactics":13,"parenDepth":2,"length":686},"snippet":"lemma inj_sigma2 {a b : V} (h : a ≠ b) : Function.Injective (sigma2 (V := V) a b) := by\n  intro i j hij\n  cases i using Fin.cases with\n  | zero =>\n      cases j using Fin.cases with\n      | zero => rfl","pos":{"x":0.030126234430892115,"y":0.5790383007340848},"pos3":{"x":0.9835659747254468,"y":0.883715815523683,"z":0.3176210149045264}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.P","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.P","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":95,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":24},"snippet":"abbrev P : Type := Fin 2","pos":{"x":0.9959476988434294,"y":0.6285820038213555},"pos3":{"x":0.7457730706984911,"y":1,"z":0.010561411109108788}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.V","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.V","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":96,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":25},"snippet":"abbrev V : Type := Fin 3\n","pos":{"x":0.9958143119190687,"y":0.6284372126950615},"pos3":{"x":0.7483733158632927,"y":0.992561863617431,"z":0.0056161390764454915}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.rule","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.rule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":98,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":128},"snippet":"def rule : Rule P where\n  lhs := ([([0] : Expr P), [0, 1]] : List (Expr P))\n  rhs := ([[0, 1], ([1] : Expr P)] : List (Expr P))\n","pos":{"x":0.3255191216360686,"y":0.9553750494557754},"pos3":{"x":0.6921699019180175,"y":0.05216689746339639,"z":0.5873593452784843}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.init","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.init","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":102,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":73},"snippet":"def init : HGraph V :=\n  ([[0], [0, 1], [1, 2], [0, 2]] : List (Expr V))\n","pos":{"x":0.3354836452910186,"y":0.9837689229181631},"pos3":{"x":0.6867712863124927,"y":0.011965471533128153,"z":0.5985596406798996}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sys","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sys","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":105,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":109},"snippet":"def sys : System V P where\n  rules := [rule]\n  init := init\n\nlocal instance : DecidableEq V := inferInstance\n","pos":{"x":0.9828853402797502,"y":0.6113001013383967},"pos3":{"x":0.7203190082959098,"y":0.9693278567453296,"z":0.00304853822892452}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":111,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":80},"snippet":"def e12 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 1 }\n","pos":{"x":0.8432400789807782,"y":0.05052918516913351},"pos3":{"x":0.4417555362872543,"y":0.7716283542588003,"z":0.9831831990719494}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":115,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":80},"snippet":"def e13 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 2 }\n","pos":{"x":0.8365175978883505,"y":0.03537623178657403},"pos3":{"x":0.43218961296785097,"y":0.7779780773695476,"z":0.9812545221767333}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":119,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":80},"snippet":"def e23 : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 1 2 }\n","pos":{"x":0.84457030363029,"y":0.04242606733633547},"pos3":{"x":0.4409886150090472,"y":0.7667360753145094,"z":0.9842109703761862}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":123,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":29},"snippet":"def s0 : HGraph V := sys.init","pos":{"x":0.9839231821924759,"y":0.6126106413553746},"pos3":{"x":0.7302121801600039,"y":0.9760112626830868,"z":0.0013140648223438566}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s1","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":124,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":68},"snippet":"def s1 : HGraph V := ([[1], [0, 1], [1, 2], [0, 2]] : List (Expr V))","pos":{"x":0.3442461817377337,"y":0.9882374437107705},"pos3":{"x":0.6972178376716781,"y":0,"z":0.5928828607198707}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s2","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":125,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":69},"snippet":"def s2 : HGraph V := ([[2], [0, 1], [1, 2], [0, 2]] : List (Expr V))\n","pos":{"x":0.3363384629986759,"y":0.9859931889099911},"pos3":{"x":0.6725726163567077,"y":0.01687852163008077,"z":0.594258121510989}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.pair_le","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.pair_le","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":127,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":3,"length":439},"snippet":"private lemma pair_le {a b : Expr V} {s : HGraph V} (hab : a ≠ b) (ha : a ∈ s) (hb : b ∈ s) :\n    (([a, b] : List (Expr V)) : HGraph V) ≤ s := by\n  have hnot : a ∉ ({b} : HGraph V) := by\n    simpa using hab\n  have hb_le : ({b} : HGraph V) ≤ s :=\n    (Multiset.singleton_le.2 hb)","pos":{"x":0.18979400850728304,"y":0.6410262612084943},"pos3":{"x":0.8057651863353238,"y":0.5308442250668091,"z":0.48268834125274174}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":138,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":7,"parenDepth":3,"length":563},"snippet":"lemma e12_app_s0 : e12.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  -- simplify `e12.input`\n  -- goal: instantiated LHS ≤ init\n  have ha : ([0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 1] : Expr V) ∈ init := by simp [init]","pos":{"x":0.20638245868997404,"y":0.6588640223455416},"pos3":{"x":0.7902574552878676,"y":0.5304564283742212,"z":0.4751956568587395}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":149,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":442},"snippet":"lemma e13_app_s0 : e13.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  have ha : ([0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 2] : Expr V) ∈ init := by simp [init]\n  have hab : ([0] : Expr V) ≠ ([0, 2] : Expr V) := by decide\n  simpa [System.Event.input, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename, e13, sys, rule]","pos":{"x":0.2060952099843081,"y":0.6285707810893206},"pos3":{"x":0.812184652719591,"y":0.5317314718282918,"z":0.48056653918018527}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_app_s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":157,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":434},"snippet":"lemma e23_app_s1 : e23.Applicable (sys := sys) s1 := by\n  dsimp [System.Event.Applicable, s1, sys]\n  have ha : ([1] : Expr V) ∈ s1 := by simp [s1]\n  have hb : ([1, 2] : Expr V) ∈ s1 := by simp [s1]\n  have hab : ([1] : Expr V) ≠ ([1, 2] : Expr V) := by decide\n  simpa [System.Event.input, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename, e23, sys, rule]","pos":{"x":0.19874475555371277,"y":0.6493932245127381},"pos3":{"x":0.8029729022526706,"y":0.5216391066448641,"z":0.47976041510923095}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_apply_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_apply_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":165,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e12_apply_s0 : e12.apply (sys := sys) s0 = s1 := by\n  decide\n","pos":{"x":0.5608461711044521,"y":0.5710380218484754},"pos3":{"x":0.044664070282724753,"y":0.11914558189385074,"z":0.9110642226957505}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_apply_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_apply_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":168,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e13_apply_s0 : e13.apply (sys := sys) s0 = s2 := by\n  decide\n","pos":{"x":0.5639564238831151,"y":0.5778407931899043},"pos3":{"x":0.042972556061702964,"y":0.12390105097260021,"z":0.9178281128101194}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_apply_s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_apply_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":171,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e23_apply_s1 : e23.apply (sys := sys) s1 = s2 := by\n  decide\n","pos":{"x":0.5610935422872223,"y":0.5675756171309213},"pos3":{"x":0.0323609094786718,"y":0.1324767119528187,"z":0.9139424501160125}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idx_eq_zero","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idx_eq_zero","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":174,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":1,"length":234},"snippet":"private lemma idx_eq_zero (e : sys.Event) : e.idx = ⟨0, by decide⟩ := by\n  apply Fin.ext\n  have : e.idx.1 < 1 := by\n    have h : e.idx.1 < sys.rules.length := e.idx.isLt\n    dsimp [sys] at h\n    exact h","pos":{"x":0.5293232600436352,"y":0.619812922072704},"pos3":{"x":0.07972641666171652,"y":0.1823781105500496,"z":0.9250820858102433}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.mem_input_singleton","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.mem_input_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":182,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":3,"parenDepth":1,"length":259},"snippet":"private lemma mem_input_singleton (e : sys.Event) : ([e.σ 0] : Expr V) ∈ e.input (sys := sys) := by\n  have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename]\n","pos":{"x":0.5423715440567896,"y":0.6078117834163779},"pos3":{"x":0.060622051591999265,"y":0.16147810323292677,"z":0.9156063432860423}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.mem_input_pair","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.mem_input_pair","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":186,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":3,"parenDepth":1,"length":261},"snippet":"private lemma mem_input_pair (e : sys.Event) : ([e.σ 0, e.σ 1] : Expr V) ∈ e.input (sys := sys) := by\n  have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename]\n","pos":{"x":0.548549846800267,"y":0.5998279410156951},"pos3":{"x":0.04589072563186483,"y":0.16710442867964967,"z":0.9165285277896025}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s2_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s2_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":190,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":10,"tactics":16,"parenDepth":2,"length":1167},"snippet":"lemma s2_normalForm : sys.NormalForm s2 := by\n  intro e happ\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s2 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  have hσ0 : e.σ 0 = (2 : V) := by\n    -- the only singleton in `s2` is `[2]`","pos":{"x":0.2838986555092627,"y":0.7810160921828215},"pos3":{"x":0.7474632672887923,"y":0.2984969554843646,"z":0.5630835509365608}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s0_not_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s0_not_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":222,"family":"Counterexamples","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":89},"snippet":"lemma s0_not_normalForm : ¬ sys.NormalForm s0 := by\n  intro hn\n  exact hn e13 e13_app_s0\n","pos":{"x":0,"y":0.5682223918767595},"pos3":{"x":0.9918607854584253,"y":0.8996282724438828,"z":0.2961669025498627}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s1_not_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.s1_not_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":226,"family":"Counterexamples","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":89},"snippet":"lemma s1_not_normalForm : ¬ sys.NormalForm s1 := by\n  intro hn\n  exact hn e23 e23_app_s1\n","pos":{"x":0.005428301865510057,"y":0.576844992171341},"pos3":{"x":0.9994773892022641,"y":0.9030634592128225,"z":0.29316799137773913}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.apply_eq_of_sigma_eq","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.apply_eq_of_sigma_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":230,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":8,"parenDepth":1,"length":374},"snippet":"private lemma apply_eq_of_sigma_eq {e e' : sys.Event} (hσ : e.σ = e'.σ) (s : HGraph V) :\n    e.apply (sys := sys) s = e'.apply (sys := sys) s := by\n  have hidxe : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  have hidxe' : e'.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e')\n  simp [System.Event.apply, System.Event.input, System.Event.output, hσ, hidxe, hidxe', sys, rule]\n","pos":{"x":0.4991591715515213,"y":0.6310905215790658},"pos3":{"x":0.08598164595514103,"y":0.2380935079096352,"z":0.9154427073850514}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma0_eq_of_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma0_eq_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":236,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":255},"snippet":"private lemma sigma0_eq_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0) :\n    e.σ 0 = (0 : V) := by\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s0 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  simpa [s0, init, sys] using hmem0'\n","pos":{"x":0.30431919645003336,"y":0.8937355245023195},"pos3":{"x":0.6903602884715305,"y":0.15908353328952932,"z":0.5835508604743124}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma1_eq_one_or_two_of_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma1_eq_one_or_two_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":242,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":2,"forall":0,"exists":0,"eq":8,"tactics":12,"parenDepth":2,"length":873},"snippet":"private lemma sigma1_eq_one_or_two_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0) :\n    e.σ 1 = (1 : V) ∨ e.σ 1 = (2 : V) := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  have hmem01' : ([e.σ 0, e.σ 1] : Expr V) ∈ s0 :=\n    Multiset.mem_of_le happ (mem_input_pair (e := e))\n  have hmem0x : ([0, e.σ 1] : Expr V) ∈ s0 := by","pos":{"x":0.2684918321179557,"y":0.7645435808730214},"pos3":{"x":0.758891111342852,"y":0.31849979136161555,"z":0.5498693404941907}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e12_of_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e12_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":266,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":6,"parenDepth":2,"length":365},"snippet":"private lemma sigma_eq_e12_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0)\n    (hσ1 : e.σ 1 = (1 : V)) : e.σ = e12.σ := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  funext i\n  cases i using Fin.cases with\n  | zero => simp [e12, hσ0]","pos":{"x":0.2799174422787153,"y":0.8026992995839146},"pos3":{"x":0.7348783573860523,"y":0.26997333321946426,"z":0.5691580044532168}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e13_of_app_s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e13_of_app_s0","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":277,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":6,"parenDepth":2,"length":365},"snippet":"private lemma sigma_eq_e13_of_app_s0 {e : sys.Event} (happ : e.Applicable (sys := sys) s0)\n    (hσ1 : e.σ 1 = (2 : V)) : e.σ = e13.σ := by\n  have hσ0 : e.σ 0 = (0 : V) := sigma0_eq_of_app_s0 (e := e) happ\n  funext i\n  cases i using Fin.cases with\n  | zero => simp [e13, hσ0]","pos":{"x":0.28519071991422207,"y":0.7963483865983139},"pos3":{"x":0.727711158658319,"y":0.268749528341882,"z":0.5677688666946493}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma0_eq_of_app_s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma0_eq_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":288,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":244},"snippet":"private lemma sigma0_eq_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ 0 = (1 : V) := by\n  have hmem0' : ([e.σ 0] : Expr V) ∈ s1 :=\n    Multiset.mem_of_le happ (mem_input_singleton (e := e))\n  simpa [s1] using hmem0'\n","pos":{"x":0.3063859936647699,"y":0.8896346537554196},"pos3":{"x":0.6874093471568372,"y":0.16026995966439198,"z":0.5864730136663061}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma1_eq_two_of_app_s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma1_eq_two_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":294,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":3,"parenDepth":2,"length":462},"snippet":"private lemma sigma1_eq_two_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ 1 = (2 : V) := by\n  have hσ0 : e.σ 0 = (1 : V) := sigma0_eq_of_app_s1 (e := e) happ\n  have hmem01' : ([e.σ 0, e.σ 1] : Expr V) ∈ s1 :=\n    Multiset.mem_of_le happ (mem_input_pair (e := e))\n  have hmem1x : ([1, e.σ 1] : Expr V) ∈ s1 := by","pos":{"x":0.29897260571853385,"y":0.8512982564187499},"pos3":{"x":0.7175579836379948,"y":0.2073931929446003,"z":0.5763225048125384}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e23_of_app_s1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.sigma_eq_e23_of_app_s1","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":304,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":7,"parenDepth":2,"length":411},"snippet":"private lemma sigma_eq_e23_of_app_s1 {e : sys.Event} (happ : e.Applicable (sys := sys) s1) :\n    e.σ = e23.σ := by\n  have hσ0 : e.σ 0 = (1 : V) := sigma0_eq_of_app_s1 (e := e) happ\n  have hσ1 : e.σ 1 = (2 : V) := sigma1_eq_two_of_app_s1 (e := e) happ\n  funext i\n  cases i using Fin.cases with","pos":{"x":0.28292344310941225,"y":0.7917507171201013},"pos3":{"x":0.7356635740775777,"y":0.2712360928889518,"z":0.5669267184937142}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.final_nf_eq_s2","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.final_nf_eq_s2","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":316,"family":"Counterexamples","features":{"implies":2,"not":0,"and":1,"or":1,"forall":0,"exists":0,"eq":25,"tactics":36,"parenDepth":2,"length":2328},"snippet":"private lemma final_nf_eq_s2 {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s0 es t → sys.NormalForm t → t = s2 := by\n  intro hev hnf\n  cases hev with\n  | nil =>\n      exact (s0_not_normalForm hnf).elim","pos":{"x":0.2793651414510766,"y":0.7312852475062419},"pos3":{"x":0.7616433896319326,"y":0.37005560756787625,"z":0.5575314092974425}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.terminatingFrom_init","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.terminatingFrom_init","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":366,"family":"Counterexamples","features":{"implies":0,"not":0,"and":2,"or":2,"forall":0,"exists":0,"eq":22,"tactics":33,"parenDepth":1,"length":2409},"snippet":"theorem terminatingFrom_init : System.TerminatingFrom (sys := sys) s0 := by\n  refine ⟨2, ?_⟩\n  intro es t hev\n  cases hev with\n  | nil =>\n      simp","pos":{"x":0.26953130438457407,"y":0.7269096453964897},"pos3":{"x":0.768499205193525,"y":0.36352038451985613,"z":0.5470481899248323}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.confluentNF","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.confluentNF","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":420,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":4,"parenDepth":1,"length":344},"snippet":"theorem confluentNF : Properties.ConfluentNF (sys := sys) := by\n  intro s₁ s₂ hr₁ hn₁ hr₂ hn₂\n  rcases hr₁ with ⟨es₁, hev₁⟩\n  rcases hr₂ with ⟨es₂, hev₂⟩\n  have hs₁ : s₁ = s2 := final_nf_eq_s2 (es := es₁) (t := s₁) hev₁ hn₁\n  have hs₂ : s₂ = s2 := final_nf_eq_s2 (es := es₂) (t := s₂) hev₂ hn₂","pos":{"x":0.535404703763135,"y":0.617909701745464},"pos3":{"x":0.06288957544532292,"y":0.19891573238059004,"z":0.91825228217446}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.not_causalInvariant","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.not_causalInvariant","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":429,"family":"Counterexamples","features":{"implies":0,"not":2,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":13,"parenDepth":2,"length":1358},"snippet":"theorem not_causalInvariant : ¬ Properties.CausalInvariant (sys := sys) := by\n  intro hci\n  -- Two terminating evolutions to the same normal form `s2`:\n  --   short: `[e13]`  (length 1)\n  --   long:  `[e12, e23]` (length 2)\n  have hn2 : sys.NormalForm s2 := s2_normalForm","pos":{"x":0.025143259555276073,"y":0.5710045970288878},"pos3":{"x":0.9860480143238347,"y":0.9083607917597287,"z":0.31417749389204574}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.P","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.P","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":459,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":24},"snippet":"abbrev P : Type := Fin 2","pos":{"x":1,"y":0.6339722572208815},"pos3":{"x":0.7419678400268143,"y":0.9971100282177634,"z":0.00890992219979129}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.V","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.V","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":460,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":25},"snippet":"abbrev V : Type := Fin 2\n","pos":{"x":0.991047229422736,"y":0.6220372146677067},"pos3":{"x":0.7325805267078974,"y":0.9914986335514444,"z":0.008758569011617506}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.rule","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.rule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":462,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":112},"snippet":"def rule : Rule P where\n  lhs := ([[0, 1], [1, 0]] : List (Expr P))\n  rhs := ([([0] : Expr P)] : List (Expr P))\n","pos":{"x":0.3342575999504866,"y":0.9646452976778342},"pos3":{"x":0.6974417828952781,"y":0.044134471819574285,"z":0.5917089781802868}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.init","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.init","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":466,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":76},"snippet":"def init : HGraph V :=\n  ([[0, 1], [1, 0], ([0] : Expr V)] : List (Expr V))\n","pos":{"x":0.33915123394770996,"y":0.9755587697860534},"pos3":{"x":0.6737034380449645,"y":0.021673522623536782,"z":0.5880505970943574}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sys","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sys","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":469,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":109},"snippet":"def sys : System V P where\n  rules := [rule]\n  init := init\n\nlocal instance : DecidableEq V := inferInstance\n","pos":{"x":0.980421905049392,"y":0.6080223415646324},"pos3":{"x":0.7215491928260884,"y":0.9661088134784108,"z":0.004301627512742056}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":475,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":81},"snippet":"def e_id : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 0 1 }\n","pos":{"x":0.8487843805064905,"y":0.04501909975898185},"pos3":{"x":0.438960877767629,"y":0.7686135527986151,"z":0.9829241230400053}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":479,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":83},"snippet":"def e_swap : sys.Event :=\n  { idx := ⟨0, by decide⟩\n    σ := sigma2 (V := V) 1 0 }\n","pos":{"x":0.8405007491312824,"y":0.0432415157733749},"pos3":{"x":0.43681681834826047,"y":0.7630736774627606,"z":0.9858814020825295}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.s0","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.s0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":483,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":29},"snippet":"def s0 : HGraph V := sys.init","pos":{"x":0.986182830489996,"y":0.6156431775475815},"pos3":{"x":0.7325788458916048,"y":0.981690249430758,"z":0.00592947574493375}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf1","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf1","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":484,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":50},"snippet":"def nf1 : HGraph V := ([[0], [0]] : List (Expr V))","pos":{"x":0.3315775390920884,"y":0.9868100252059985},"pos3":{"x":0.6870994990367445,"y":0.009670655372951713,"z":0.6025402563099613}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf2","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf2","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":485,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":51},"snippet":"def nf2 : HGraph V := ([[0], [1]] : List (Expr V))\n","pos":{"x":0.33724666782600204,"y":1},"pos3":{"x":0.6839513361962755,"y":0.012971043887501433,"z":0.5999100767194273}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sigma_eq_e_id_or_swap","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sigma_eq_e_id_or_swap","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":487,"family":"Counterexamples","features":{"implies":0,"not":0,"and":2,"or":2,"forall":0,"exists":0,"eq":22,"tactics":38,"parenDepth":2,"length":2075},"snippet":"private lemma sigma_eq_e_id_or_swap (e : sys.Event) (happ : e.Applicable (sys := sys) s0) :\n    e.σ = e_id.σ ∨ e.σ = e_swap.σ := by\n  -- Use applicability: the instantiated LHS contains the edge `[σ 0, σ 1]`, and `s0`\n  -- has only two length-2 edges (`[0,1]` and `[1,0]`), so `σ` must be either identity or swap.\n  have hmem01 : ([e.σ 0, e.σ 1] : Expr V) ∈ s0 := by\n    have hidx : e.idx = ⟨0, by decide⟩ := by","pos":{"x":0.2756408697013518,"y":0.7305261468845575},"pos3":{"x":0.7660858804970538,"y":0.3651696674478982,"z":0.5477474463661346}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id_app","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id_app","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":543,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":11,"parenDepth":3,"length":875},"snippet":"lemma e_id_app : e_id.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  -- LHS has two distinct length-2 edges which are both present in `init`.\n  have ha : ([0, 1] : Expr V) ∈ init := by simp [init]\n  have hb : ([1, 0] : Expr V) ∈ init := by simp [init]\n  have hab : ([0, 1] : Expr V) ≠ ([1, 0] : Expr V) := by decide","pos":{"x":0.21312318629468932,"y":0.6380103320991315},"pos3":{"x":0.833399465835109,"y":0.5214632681161151,"z":0.4806677657448379}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap_app","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap_app","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":559,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":11,"parenDepth":3,"length":753},"snippet":"lemma e_swap_app : e_swap.Applicable (sys := sys) s0 := by\n  dsimp [System.Event.Applicable, s0, sys]\n  have ha : ([1, 0] : Expr V) ∈ init := by simp [init]\n  have hb : ([0, 1] : Expr V) ∈ init := by simp [init]\n  have hab : ([1, 0] : Expr V) ≠ ([0, 1] : Expr V) := by decide\n  have hle : (([[1, 0], [0, 1]] : List (Expr V)) : HGraph V) ≤ init := by","pos":{"x":0.213992870283517,"y":0.6494101362166558},"pos3":{"x":0.8157898675562154,"y":0.5119209137885796,"z":0.4764772376247467}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id_apply","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_id_apply","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":573,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":67},"snippet":"lemma e_id_apply : e_id.apply (sys := sys) s0 = nf1 := by\n  decide\n","pos":{"x":0.5631476377717501,"y":0.571457720563819},"pos3":{"x":0.04300510583413772,"y":0.12699051558496363,"z":0.9164829213710317}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap_apply","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_swap_apply","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":576,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":71},"snippet":"lemma e_swap_apply : e_swap.apply (sys := sys) s0 = nf2 := by\n  decide\n","pos":{"x":0.560597236868062,"y":0.5743755384074672},"pos3":{"x":0.049792216478499095,"y":0.13176101445127467,"z":0.9185836305126478}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.idx_eq_zero","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.idx_eq_zero","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":579,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":1,"length":234},"snippet":"private lemma idx_eq_zero (e : sys.Event) : e.idx = ⟨0, by decide⟩ := by\n  apply Fin.ext\n  have : e.idx.1 < 1 := by\n    have h : e.idx.1 < sys.rules.length := e.idx.isLt\n    dsimp [sys] at h\n    exact h","pos":{"x":0.5246428307521506,"y":0.6280388414783974},"pos3":{"x":0.07311039411678238,"y":0.18209565372039715,"z":0.9210903418898918}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.apply_eq_of_sigma_eq","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.apply_eq_of_sigma_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":587,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":8,"parenDepth":1,"length":374},"snippet":"private lemma apply_eq_of_sigma_eq {e e' : sys.Event} (hσ : e.σ = e'.σ) (s : HGraph V) :\n    e.apply (sys := sys) s = e'.apply (sys := sys) s := by\n  have hidxe : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n  have hidxe' : e'.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e')\n  simp [System.Event.apply, System.Event.input, System.Event.output, hσ, hidxe, hidxe', sys, rule]\n","pos":{"x":0.5028186581747671,"y":0.6344015373424253},"pos3":{"x":0.09029868558371473,"y":0.2517120978872116,"z":0.9220751418520446}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf1_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf1_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":593,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":2,"length":410},"snippet":"lemma nf1_normalForm : sys.NormalForm nf1 := by\n  intro e happ\n  -- LHS requires length-2 expressions; `nf1` has only length-1 expressions.\n  have hmem : ([e.σ 0, e.σ 1] : Expr V) ∈ nf1 :=\n    Multiset.mem_of_le happ (by\n      have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)","pos":{"x":0.3031196392156682,"y":0.8347184261207575},"pos3":{"x":0.7480317996551589,"y":0.20771120428122505,"z":0.5803906636733186}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf2_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.nf2_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":602,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":6,"parenDepth":2,"length":333},"snippet":"lemma nf2_normalForm : sys.NormalForm nf2 := by\n  intro e happ\n  have hmem : ([e.σ 0, e.σ 1] : Expr V) ∈ nf2 :=\n    Multiset.mem_of_le happ (by\n      have hidx : e.idx = ⟨0, by decide⟩ := idx_eq_zero (e := e)\n      simp [System.Event.input, sys, rule, hidx, Rule.instLhs, Rule.inst, HGraph.rename, Expr.rename])","pos":{"x":0.30813889726857907,"y":0.8304788356162767},"pos3":{"x":0.752658096699177,"y":0.20957219295768698,"z":0.5812678062681502}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.length_eq_one_of_nf","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.length_eq_one_of_nf","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":610,"family":"Counterexamples","features":{"implies":2,"not":2,"and":0,"or":2,"forall":0,"exists":0,"eq":15,"tactics":23,"parenDepth":2,"length":1459},"snippet":"private lemma length_eq_one_of_nf {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s0 es t → sys.NormalForm t → es.length = 1 := by\n  intro hev hnf\n  -- `s0` is not a normal form because `e_id` is applicable.\n  have hs0 : ¬ sys.NormalForm s0 := by\n    intro hn","pos":{"x":0.031010583434734788,"y":0.5663320255818709},"pos3":{"x":0.9843638403969679,"y":0.9012337396465324,"z":0.3203179354491781}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.edge_iff_false_of_len_eq_one","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.edge_iff_false_of_len_eq_one","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":645,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":11,"parenDepth":2,"length":599},"snippet":"private lemma edge_iff_false_of_len_eq_one (es : List sys.Event) (hlen : es.length = 1)\n    (i j : Fin (sys.causalGraphOf es).n) : (sys.causalGraphOf es).edge i j ↔ False := by\n  constructor\n  · intro h\n    have hi_lt : i.1 < 1 := by\n      have : i.1 < es.length := i.isLt","pos":{"x":0.2975488120226077,"y":0.8061424541444675},"pos3":{"x":0.7524396612127431,"y":0.24467673663854547,"z":0.5736584644994704}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.terminatingFrom_init","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.terminatingFrom_init","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":662,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":3,"forall":0,"exists":0,"eq":10,"tactics":16,"parenDepth":2,"length":1135},"snippet":"theorem terminatingFrom_init : System.TerminatingFrom (sys := sys) s0 := by\n  refine ⟨1, ?_⟩\n  intro es t hev\n  cases hev with\n  | nil =>\n      simp","pos":{"x":0.2713369551501165,"y":0.7626212778671717},"pos3":{"x":0.7460093226718966,"y":0.32645335303069717,"z":0.5535565025256631}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.causalInvariant","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.causalInvariant","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":690,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":12,"parenDepth":3,"length":880},"snippet":"theorem causalInvariant : Properties.CausalInvariant (sys := sys) := by\n  intro es₁ es₂ t₁ t₂ hev₁ hn₁ hev₂ hn₂\n  have hlen1 : es₁.length = 1 := length_eq_one_of_nf (es := es₁) (t := t₁) hev₁ hn₁\n  have hlen2 : es₂.length = 1 := length_eq_one_of_nf (es := es₂) (t := t₂) hev₂ hn₂\n  have hlen : (sys.causalGraphOf es₁).n = (sys.causalGraphOf es₂).n := by\n    simp [System.causalGraphOf, hlen1, hlen2]","pos":{"x":0.21678544634940036,"y":0.6428280375139196},"pos3":{"x":0.8220027000018009,"y":0.5033547275171071,"z":0.47789063297835666}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.not_confluentNF","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.not_confluentNF","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":709,"family":"Counterexamples","features":{"implies":0,"not":2,"and":0,"or":1,"forall":0,"exists":0,"eq":33,"tactics":54,"parenDepth":5,"length":3119},"snippet":"theorem not_confluentNF : ¬ Properties.ConfluentNF (sys := sys) := by\n  intro hconf\n  have hr1 : sys.Reachable nf1 := by\n    refine ⟨[e_id], ?_⟩\n    refine System.Evolves.cons (sys := sys) (s := s0) (es := []) (t := nf1) e_id e_id_app ?_\n    simpa [e_id_apply] using (System.Evolves.nil (sys := sys) nf1)","pos":{"x":0.0484706406297949,"y":0.5748263976793428},"pos3":{"x":0.9829140156793625,"y":0.8854289968088342,"z":0.331556392755445}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.confluence_causal_invariance_independent","name":"HeytingLean.WPP.Wolfram.Counterexamples.confluence_causal_invariance_independent","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvariance.lean","line":790,"family":"Counterexamples","features":{"implies":2,"not":2,"and":1,"or":0,"forall":2,"exists":0,"eq":0,"tactics":6,"parenDepth":3,"length":709},"snippet":"theorem confluence_causal_invariance_independent :\n    (¬ (∀ {V P : Type} (sys : System V P) [DecidableEq V],\n        Properties.ConfluentNF (sys := sys) → Properties.CausalInvariant (sys := sys))) ∧\n    (¬ (∀ {V P : Type} (sys : System V P) [DecidableEq V],\n        Properties.CausalInvariant (sys := sys) → Properties.ConfluentNF (sys := sys))) := by\n  constructor","pos":{"x":0.02212605473869725,"y":0.5499543049297098},"pos3":{"x":0.9610827590876312,"y":0.9038563299007787,"z":0.31861236960863554}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_observableB","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e13_observableB","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":25,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":99},"snippet":"private lemma e13_observableB : System.Event.observableB (sys := sys) e13 s2 = true := by\n  decide\n","pos":{"x":0.5892631673171209,"y":0.5752945179697304},"pos3":{"x":0.012397316279707957,"y":0.09281829289427342,"z":0.8940649495970077}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_observableB","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e23_observableB","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":28,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":99},"snippet":"private lemma e23_observableB : System.Event.observableB (sys := sys) e23 s2 = true := by\n  decide\n","pos":{"x":0.5867260976136824,"y":0.5702942029351998},"pos3":{"x":0.017968985396602646,"y":0.10169017923024196,"z":0.892920767374292}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_observableB","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.e12_observableB","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":31,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":100},"snippet":"private lemma e12_observableB : System.Event.observableB (sys := sys) e12 s2 = false := by\n  decide\n","pos":{"x":0.5921781596292367,"y":0.5769187717809982},"pos3":{"x":0.012910949409851403,"y":0.10141969084984877,"z":0.89550408522687}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idxs_short","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idxs_short","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":34,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":89},"snippet":"private lemma idxs_short : sys.observableIdxs [e13] s2 = [⟨0, by decide⟩] := by\n  decide\n","pos":{"x":0.5632309463331198,"y":0.5765136350413022},"pos3":{"x":0.03608186995728519,"y":0.13359282628295235,"z":0.9107165209149004}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idxs_long","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.idxs_long","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":37,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":1,"length":93},"snippet":"private lemma idxs_long : sys.observableIdxs [e12, e23] s2 = [⟨1, by decide⟩] := by\n  decide\n","pos":{"x":0.5677985810733902,"y":0.5873727442304728},"pos3":{"x":0.04241909159411153,"y":0.14300775752699127,"z":0.906934659341665}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_n_short","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_n_short","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":40,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":143},"snippet":"private lemma gc_n_short : (sys.causalGraphGCOf [e13] s2).n = 1 := by\n  simp (config := { zeta := true }) [System.causalGraphGCOf, idxs_short]\n","pos":{"x":0.5952467913137137,"y":0.5835561215786518},"pos3":{"x":0.0026611543746605597,"y":0.08889082567735812,"z":0.9007835712784181}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_n_long","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_n_long","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":43,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":146},"snippet":"private lemma gc_n_long : (sys.causalGraphGCOf [e12, e23] s2).n = 1 := by\n  simp (config := { zeta := true }) [System.causalGraphGCOf, idxs_long]\n","pos":{"x":0.5927939928722021,"y":0.5802633190970498},"pos3":{"x":0.008483433763335815,"y":0.0981449068412532,"z":0.8959281404799948}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_edge_false_short","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_edge_false_short","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":46,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":212},"snippet":"private lemma gc_edge_false_short (i j : Fin (sys.causalGraphGCOf [e13] s2).n) :\n    (sys.causalGraphGCOf [e13] s2).edge i j ↔ False := by\n  simp (config := { zeta := true }) [System.causalGraphGCOf, idxs_short]\n","pos":{"x":0.33000271159827566,"y":0.9295027677709445},"pos3":{"x":0.7139496388955385,"y":0.08200745589595637,"z":0.5911897605694886}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_edge_false_long","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.gc_edge_false_long","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":50,"family":"Counterexamples","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":351},"snippet":"private lemma gc_edge_false_long (i j : Fin (sys.causalGraphGCOf [e12, e23] s2).n) :\n    (sys.causalGraphGCOf [e12, e23] s2).edge i j ↔ False := by\n  simp (config := { zeta := true }) [System.causalGraphGCOf, idxs_long]\n\n/-- In CE1, the *short* evolution `[e13]` and the *long* evolution `[e12, e23]` have isomorphic\nobservable-event causal graphs. -/","pos":{"x":0.1462860676185284,"y":0.5168377197138246},"pos3":{"x":0.7721531383567515,"y":0.6780918262834108,"z":0.42763558889626907}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.causalGraphGC_iso_short_long","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE1.causalGraphGC_iso_short_long","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":56,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":3,"length":903},"snippet":"theorem causalGraphGC_iso_short_long :\n    CausalGraph.Iso (sys.causalGraphGCOf [e13] s2) (sys.causalGraphGCOf [e12, e23] s2) := by\n  have hn : (sys.causalGraphGCOf [e13] s2).n = (sys.causalGraphGCOf [e12, e23] s2).n := by\n    simp [gc_n_short, gc_n_long]\n  refine ⟨Equiv.cast (congrArg Fin hn), ?_⟩\n  intro i j","pos":{"x":0.2089468380696097,"y":0.64406545684278},"pos3":{"x":0.8224360470235378,"y":0.5225544053257882,"z":0.48140418930279844}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.s0_not_normalForm","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.s0_not_normalForm","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":80,"family":"Counterexamples","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":0,"length":96},"snippet":"private lemma s0_not_normalForm : ¬ sys.NormalForm s0 := by\n  intro hn\n  exact hn e_id e_id_app\n","pos":{"x":0.0001549826431449323,"y":0.5691362908938343},"pos3":{"x":0.9934449243111785,"y":0.9052951082359837,"z":0.29608597139010556}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sigma_eq_e_id_or_swap","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.sigma_eq_e_id_or_swap","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":84,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":1,"forall":0,"exists":0,"eq":20,"tactics":36,"parenDepth":2,"length":1825},"snippet":"private lemma sigma_eq_e_id_or_swap (e : sys.Event) (happ : e.Applicable (sys := sys) s0) :\n    e.σ = e_id.σ ∨ e.σ = e_swap.σ := by\n  have hmem01 : ([e.σ 0, e.σ 1] : Expr V) ∈ s0 := by\n    have hidx : e.idx = ⟨0, by decide⟩ := by\n      simpa [sys] using (Fin.eq_zero e.idx)\n    have hmemIn : ([e.σ 0, e.σ 1] : Expr V) ∈ e.input (sys := sys) := by","pos":{"x":0.2853788428771229,"y":0.7504637702372913},"pos3":{"x":0.7572429714122249,"y":0.34125693913754945,"z":0.5570951676211923}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.apply_eq_of_sigma_eq","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.apply_eq_of_sigma_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":137,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":8,"parenDepth":1,"length":422},"snippet":"private lemma apply_eq_of_sigma_eq {e e' : sys.Event} (hσ : e.σ = e'.σ) (s : HGraph V) :\n    e.apply (sys := sys) s = e'.apply (sys := sys) s := by\n  have hidxe : e.idx = ⟨0, by decide⟩ := by\n    simpa [sys] using (Fin.eq_zero e.idx)\n  have hidxe' : e'.idx = ⟨0, by decide⟩ := by\n    simpa [sys] using (Fin.eq_zero e'.idx)","pos":{"x":0.5005330803618495,"y":0.6321757231360532},"pos3":{"x":0.08794916927807163,"y":0.23087101407692026,"z":0.9127089667068096}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.normalForm_apply_s0_of_app","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.normalForm_apply_s0_of_app","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":145,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":1,"forall":0,"exists":0,"eq":6,"tactics":9,"parenDepth":2,"length":679},"snippet":"private lemma normalForm_apply_s0_of_app {e : sys.Event} (happ : e.Applicable (sys := sys) s0) :\n    sys.NormalForm (e.apply (sys := sys) s0) := by\n  have hσ : e.σ = e_id.σ ∨ e.σ = e_swap.σ := sigma_eq_e_id_or_swap (e := e) happ\n  cases hσ with\n  | inl hσ =>\n      have happly : e.apply (sys := sys) s0 = nf1 := by","pos":{"x":0.2719430474562397,"y":0.7729997427545634},"pos3":{"x":0.7538308797975432,"y":0.3026121389530785,"z":0.5563542145666959}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.length_eq_one_of_nf","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.length_eq_one_of_nf","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":160,"family":"Counterexamples","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":8,"parenDepth":2,"length":503},"snippet":"private lemma length_eq_one_of_nf {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s0 es t → sys.NormalForm t → es.length = 1 := by\n  intro hev hnf\n  cases hev with\n  | nil =>\n      exact (s0_not_normalForm (by simpa using hnf)).elim","pos":{"x":0.40703910278860495,"y":0.0734729104515591},"pos3":{"x":0.9061110222559459,"y":0.782637885428137,"z":0.6348970338326604}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_observableB_of_evolves_singleton","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.e_observableB_of_evolves_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":175,"family":"Counterexamples","features":{"implies":0,"not":1,"and":1,"or":0,"forall":0,"exists":0,"eq":7,"tactics":17,"parenDepth":4,"length":1708},"snippet":"private lemma e_observableB_of_evolves_singleton {e : sys.Event} {t : HGraph V}\n    (hev : sys.Evolves s0 [e] t) : System.Event.observableB (sys := sys) e t = true := by\n  cases hev with\n  | cons e' _happ hrest =>\n      cases hrest with\n      | nil =>","pos":{"x":0.05896867342068617,"y":0.5589670868906266},"pos3":{"x":0.9774545726453248,"y":0.8783461539778208,"z":0.33068842826849043}},{"id":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.causalInvariantGC","name":"HeytingLean.WPP.Wolfram.Counterexamples.CE2.causalInvariantGC","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceCausalInvarianceGC.lean","line":204,"family":"Counterexamples","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":19,"tactics":37,"parenDepth":2,"length":2715},"snippet":"theorem causalInvariantGC : Properties.GCausalInvariant (sys := sys) := by\n  intro es₁ es₂ t₁ t₂ hev₁ hn₁ hev₂ hn₂\n  have hlen1 : es₁.length = 1 := length_eq_one_of_nf (es := es₁) (t := t₁) hev₁ hn₁\n  have hlen2 : es₂.length = 1 := length_eq_one_of_nf (es := es₂) (t := t₂) hev₂ hn₂\n  cases es₁ with\n  | nil => cases hlen1","pos":{"x":0.2863064365712006,"y":0.7540305422880799},"pos3":{"x":0.7562022872742635,"y":0.3345019442660329,"z":0.5641622686558514}},{"id":"HeytingLean.WPP.Wolfram.System.Step","name":"HeytingLean.WPP.Wolfram.System.Step","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":33,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":1,"tactics":1,"parenDepth":1,"length":159},"snippet":"def Step (s t : HGraph V) : Prop :=\n  ∃ e : sys.Event, e.Applicable (sys := sys) s ∧ e.apply (sys := sys) s = t\n\n/-- Reflexive–transitive closure of `Step`. -/","pos":{"x":0.17504765809906186,"y":0.2969641204611089},"pos3":{"x":0.5292996004240683,"y":0.6267164622663876,"z":0.4246986121414176}},{"id":"HeytingLean.WPP.Wolfram.System.StepStar","name":"HeytingLean.WPP.Wolfram.System.StepStar","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":37,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":145},"snippet":"abbrev StepStar : HGraph V → HGraph V → Prop :=\n  Relation.ReflTransGen (Step (sys := sys))\n\n/-- `Step`-normal form: no outgoing `Step` edges. -/","pos":{"x":0.4161618295761204,"y":0.0746195420750019},"pos3":{"x":0.9053927934036168,"y":0.8154575930356706,"z":0.6302409755318793}},{"id":"HeytingLean.WPP.Wolfram.System.NormalFormStep","name":"HeytingLean.WPP.Wolfram.System.NormalFormStep","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":41,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":75},"snippet":"def NormalFormStep (s : HGraph V) : Prop :=\n  ∀ t, ¬ Step (sys := sys) s t\n","pos":{"x":0.010134287706900402,"y":0.565504285514002},"pos3":{"x":0.9770008079840847,"y":0.8990470102084779,"z":0.31046936849349827}},{"id":"HeytingLean.WPP.Wolfram.System.normalForm_iff_normalFormStep","name":"HeytingLean.WPP.Wolfram.System.normalForm_iff_normalFormStep","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":44,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":2,"length":362},"snippet":"lemma normalForm_iff_normalFormStep (s : HGraph V) :\n    sys.NormalForm s ↔ NormalFormStep (sys := sys) s := by\n  constructor\n  · intro hn t hstep\n    rcases hstep with ⟨e, happ, _ht⟩\n    exact (hn e) happ","pos":{"x":0.31356772028949936,"y":0.8388420410053058},"pos3":{"x":0.7547694776591775,"y":0.18106384438520476,"z":0.5763603168305949}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves.toStepStar","name":"HeytingLean.WPP.Wolfram.System.Evolves.toStepStar","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":56,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":2,"length":318},"snippet":"theorem Evolves.toStepStar {s : HGraph V} {es : List sys.Event} {t : HGraph V} :\n    sys.Evolves s es t → StepStar (sys := sys) s t := by\n  intro hev\n  induction hev with\n  | nil s =>\n      exact Relation.ReflTransGen.refl","pos":{"x":0.40132320099551977,"y":0.032600753870305484},"pos3":{"x":0.9535975352107326,"y":0.7724831028295981,"z":0.6211062574453303}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves.append","name":"HeytingLean.WPP.Wolfram.System.Evolves.append","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":65,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":1,"length":355},"snippet":"theorem Evolves.append {s : HGraph V} {es₁ es₂ : List sys.Event} {m t : HGraph V} :\n    sys.Evolves s es₁ m → sys.Evolves m es₂ t → sys.Evolves s (es₁ ++ es₂) t := by\n  intro h₁ h₂\n  induction h₁ with\n  | nil s =>\n      simpa using h₂","pos":{"x":0.4793240584934742,"y":0.1824996397546831},"pos3":{"x":0.6811854023095737,"y":0.8648202065050843,"z":0.6953438395658705}},{"id":"HeytingLean.WPP.Wolfram.System.StepStar.exists_evolves","name":"HeytingLean.WPP.Wolfram.System.StepStar.exists_evolves","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":74,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":2,"tactics":6,"parenDepth":2,"length":848},"snippet":"theorem StepStar.exists_evolves {s t : HGraph V} :\n    StepStar (sys := sys) s t → ∃ es : List sys.Event, System.Evolves (sys := sys) s es t := by\n  intro h\n  induction h with\n  | refl =>\n      refine ⟨[], ?_⟩","pos":{"x":0.1898099614400298,"y":0.27975368916130755},"pos3":{"x":0.49447039562999556,"y":0.6453283357039294,"z":0.42361333468787327}},{"id":"HeytingLean.WPP.Wolfram.System.Joinable","name":"HeytingLean.WPP.Wolfram.System.Joinable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":95,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":158},"snippet":"def Joinable (b c : HGraph V) : Prop :=\n  Relation.Join (StepStar (sys := sys)) b c\n\n/-- Confluence (Church–Rosser): any fork under `StepStar` is joinable. -/","pos":{"x":0.3229585256077174,"y":0.951222117186662},"pos3":{"x":0.6912830814767795,"y":0.06329634001819533,"z":0.585295183692537}},{"id":"HeytingLean.WPP.Wolfram.System.Confluent","name":"HeytingLean.WPP.Wolfram.System.Confluent","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":99,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":198},"snippet":"def Confluent : Prop :=\n  ∀ a b c, StepStar (sys := sys) a b → StepStar (sys := sys) a c → Joinable (sys := sys) b c\n\n/-- A sufficient condition for confluence, matching `Relation.church_rosser`. -/","pos":{"x":0.373005481034996,"y":0.2148045977631962},"pos3":{"x":0.7098523991263153,"y":0.875478343692503,"z":0.6139421812466636}},{"id":"HeytingLean.WPP.Wolfram.System.SemiConfluent","name":"HeytingLean.WPP.Wolfram.System.SemiConfluent","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":103,"family":"System","features":{"implies":2,"not":0,"and":1,"or":0,"forall":1,"exists":1,"eq":0,"tactics":0,"parenDepth":2,"length":165},"snippet":"def SemiConfluent : Prop :=\n  ∀ a b c, Step (sys := sys) a b → Step (sys := sys) a c →\n    ∃ d, Relation.ReflGen (Step (sys := sys)) b d ∧ StepStar (sys := sys) c d\n","pos":{"x":0.18578803686326525,"y":0.29423831061194},"pos3":{"x":0.5161013361255304,"y":0.6400258950218369,"z":0.426602934468982}},{"id":"HeytingLean.WPP.Wolfram.System.semiConfluent_confluent","name":"HeytingLean.WPP.Wolfram.System.semiConfluent_confluent","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":107,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":394},"snippet":"theorem semiConfluent_confluent (h : SemiConfluent (sys := sys)) : Confluent (sys := sys) := by\n  intro a b c hab hac\n  -- Use Mathlib's `Relation.church_rosser` lemma.\n  exact Relation.church_rosser (r := Step (sys := sys)) h hab hac\n\n/-! ## A simple bounded termination predicate (from a start state) -/","pos":{"x":0.33222498056859234,"y":0.8768896102342982},"pos3":{"x":0.7390459880604913,"y":0.14325368276986689,"z":0.5744271977115772}},{"id":"HeytingLean.WPP.Wolfram.System.BoundedFrom","name":"HeytingLean.WPP.Wolfram.System.BoundedFrom","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":115,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":190},"snippet":"def BoundedFrom (s : HGraph V) (n : Nat) : Prop :=\n  ∀ es t, sys.Evolves s es t → es.length ≤ n\n\n/-- Termination-from-`s` (strong form): there exists a uniform bound on evolution lengths. -/","pos":{"x":0.36046308065856775,"y":0.23350765846478627},"pos3":{"x":0.6847267335513993,"y":0.8969401982383449,"z":0.6090592962761795}},{"id":"HeytingLean.WPP.Wolfram.System.TerminatingFrom","name":"HeytingLean.WPP.Wolfram.System.TerminatingFrom","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/ConfluenceTheory.lean","line":119,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":130},"snippet":"def TerminatingFrom (s : HGraph V) : Prop :=\n  ∃ n, BoundedFrom (sys := sys) s n\n\nend System\n\nend Wolfram","pos":{"x":0.18246456781006837,"y":0.27598436292936396},"pos3":{"x":0.4888169820448331,"y":0.6293740594919581,"z":0.4202693264800388}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.allocList","name":"HeytingLean.WPP.Wolfram.FreshSupply.allocList","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":35,"family":"FreshSupply","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":3,"parenDepth":2,"length":425},"snippet":"noncomputable def allocList : Nat → Finset V → List V\n  | 0, _forbidden => []\n  | n + 1, forbidden =>\n      let v := FreshSupply.fresh forbidden\n      v :: allocList n (insert v forbidden)\n","pos":{"x":0.4095206602972382,"y":0.06791910683938704},"pos3":{"x":0.910284880943255,"y":0.7940974662549614,"z":0.6330816167092567}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.allocList_mem_not_mem_forbidden","name":"HeytingLean.WPP.Wolfram.FreshSupply.allocList_mem_not_mem_forbidden","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":48,"family":"FreshSupply","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":7,"parenDepth":2,"length":650},"snippet":"lemma allocList_mem_not_mem_forbidden {n : Nat} {forbidden : Finset V} {v : V} :\n    v ∈ allocList (V := V) n forbidden → v ∉ forbidden := by\n  classical\n  induction n generalizing forbidden with\n  | zero =>\n      intro hv","pos":{"x":0.39295650908376,"y":0.04992610812783099},"pos3":{"x":0.9343609820455787,"y":0.762330522710139,"z":0.62449105407396}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.allocList_nodup","name":"HeytingLean.WPP.Wolfram.FreshSupply.allocList_nodup","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":65,"family":"FreshSupply","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":6,"parenDepth":3,"length":712},"snippet":"lemma allocList_nodup (n : Nat) (forbidden : Finset V) :\n    (allocList (V := V) n forbidden).Nodup := by\n  classical\n  induction n generalizing forbidden with\n  | zero =>\n      simp [allocList]","pos":{"x":0.20327989061219795,"y":0.634728569191082},"pos3":{"x":0.825575561574423,"y":0.5327660231939731,"z":0.48130335364373106}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.allocVec","name":"HeytingLean.WPP.Wolfram.FreshSupply.allocVec","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":83,"family":"FreshSupply","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":219},"snippet":"noncomputable def allocVec (n : Nat) (forbidden : Finset V) : List.Vector V n :=\n  ⟨allocList (V := V) n forbidden, allocList_length (V := V) n forbidden⟩\n\n/-- The corresponding fresh assignment function `Fin n → V`. -/","pos":{"x":0.4144847816810202,"y":0.024270976757525608},"pos3":{"x":0.9843325875272413,"y":0.7994012879657195,"z":0.6151948005108313}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.alloc","name":"HeytingLean.WPP.Wolfram.FreshSupply.alloc","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":87,"family":"FreshSupply","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":110},"snippet":"noncomputable def alloc (n : Nat) (forbidden : Finset V) : Fin n → V :=\n  (allocVec (V := V) n forbidden).get\n","pos":{"x":0.4194106590983766,"y":0.02318934093728826},"pos3":{"x":0.9657054707839338,"y":0.7995659430901411,"z":0.6157764946053134}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.alloc_injective","name":"HeytingLean.WPP.Wolfram.FreshSupply.alloc_injective","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":90,"family":"FreshSupply","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":313},"snippet":"lemma alloc_injective (n : Nat) (forbidden : Finset V) :\n    Function.Injective (alloc (V := V) n forbidden) := by\n  classical\n  have hnodup : (allocVec (V := V) n forbidden).toList.Nodup := by\n    simpa [allocVec] using allocList_nodup (V := V) n forbidden\n  exact (List.Vector.nodup_iff_injective_get).1 hnodup","pos":{"x":0.33367972323671224,"y":0.8859557901126835},"pos3":{"x":0.7322410278628619,"y":0.1329859609223904,"z":0.5805700675688228}},{"id":"HeytingLean.WPP.Wolfram.FreshSupply.alloc_not_mem","name":"HeytingLean.WPP.Wolfram.FreshSupply.alloc_not_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/FreshSupply.lean","line":97,"family":"FreshSupply","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":3,"length":844},"snippet":"lemma alloc_not_mem (n : Nat) (forbidden : Finset V) (i : Fin n) :\n    alloc (V := V) n forbidden i ∉ forbidden := by\n  have hi : alloc (V := V) n forbidden i ∈ allocList (V := V) n forbidden := by\n    -- `Vector.get_mem` gives membership in the underlying list.\n    simpa [alloc, allocVec] using (List.Vector.get_mem i (allocVec (V := V) n forbidden))\n  exact allocList_mem_not_mem_forbidden (V := V) (n := n) (forbidden := forbidden) (v := alloc (V := V) n forbidden i) hi","pos":{"x":0.1959835203801321,"y":0.6435810333103766},"pos3":{"x":0.8026379596609198,"y":0.5437569302920361,"z":0.47645487383409413}},{"id":"HeytingLean.WPP.Wolfram.Expr","name":"HeytingLean.WPP.Wolfram.Expr","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":24,"family":"Expr","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":124},"snippet":"abbrev Expr (V : Type u) : Type u := List V\n\n/-- A hypergraph state: multiset of expressions (edge multiplicity matters). -/","pos":{"x":0.8430835617289673,"y":0.007332794251388349},"pos3":{"x":0.3882407097418837,"y":0.7788354722586497,"z":0.9929296226671399}},{"id":"HeytingLean.WPP.Wolfram.HGraph","name":"HeytingLean.WPP.Wolfram.HGraph","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":27,"family":"HGraph","features":{"implies":8,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":16,"tactics":13,"parenDepth":3,"length":1787},"snippet":"abbrev HGraph (V : Type u) : Type u := Multiset (Expr V)\n\nnamespace Expr\n\n/-- Rename vertices in an expression. -/\n@[simp] def rename {V : Type u} {W : Type v} (f : V → W) : Expr V → Expr W :=","pos":{"x":0.40602499019910515,"y":0.13274579980662315},"pos3":{"x":0.8151662606805721,"y":0.8415436235929147,"z":0.6393149376088507}},{"id":"HeytingLean.WPP.Wolfram.HGraph.Iso","name":"HeytingLean.WPP.Wolfram.HGraph.Iso","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":76,"family":"HGraph","features":{"implies":3,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":5,"tactics":7,"parenDepth":1,"length":1185},"snippet":"def Iso {V : Type u} (g₁ g₂ : HGraph V) : Prop :=\n  ∃ e : Equiv.Perm V, rename e g₁ = g₂\n\n@[refl] lemma Iso.refl {V : Type u} (g : HGraph V) : Iso g g := by\n  refine ⟨Equiv.refl V, ?_⟩\n  simp [rename]","pos":{"x":0.19494602230726613,"y":0.27811429486667444},"pos3":{"x":0.4955752043270075,"y":0.6377925459339124,"z":0.4292722760133602}},{"id":"HeytingLean.WPP.Wolfram.HGraph.vertsStep","name":"HeytingLean.WPP.Wolfram.HGraph.vertsStep","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":111,"family":"HGraph","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":2,"length":392},"snippet":"def vertsStep [DecidableEq V] : Finset V → Expr V → Finset V :=\n  fun acc e => acc ∪ e.toFinset\n\ninstance instRightCommutative_vertsStep [DecidableEq V] :\n    RightCommutative (vertsStep (V := V)) := by\n  refine ⟨?_⟩","pos":{"x":0.4167281084560996,"y":0.08136606126872135},"pos3":{"x":0.9035657538387766,"y":0.806690178273087,"z":0.6319852690237201}},{"id":"HeytingLean.WPP.Wolfram.HGraph.verts","name":"HeytingLean.WPP.Wolfram.HGraph.verts","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":121,"family":"HGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":97},"snippet":"def verts [DecidableEq V] (g : HGraph V) : Finset V :=\n  Multiset.foldl (vertsStep (V := V)) ∅ g\n","pos":{"x":0.3360463804977847,"y":0.9676885940176677},"pos3":{"x":0.6816733977042152,"y":0.032283082609408986,"z":0.5900380438955851}},{"id":"HeytingLean.WPP.Wolfram.HGraph.mem_foldl_of_mem_acc","name":"HeytingLean.WPP.Wolfram.HGraph.mem_foldl_of_mem_acc","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":124,"family":"HGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":2,"length":527},"snippet":"private lemma mem_foldl_of_mem_acc [DecidableEq V] {v : V} {b : Finset V} {g : HGraph V}\n    (hv : v ∈ b) : v ∈ Multiset.foldl (vertsStep (V := V)) b g := by\n  classical\n  induction g using Multiset.induction_on generalizing b with\n  | empty =>\n      simpa using hv","pos":{"x":0.30913412509367316,"y":0.8690622525444454},"pos3":{"x":0.6946556950627155,"y":0.1892487643757426,"z":0.57334858317311}},{"id":"HeytingLean.WPP.Wolfram.HGraph.foldl_mono","name":"HeytingLean.WPP.Wolfram.HGraph.foldl_mono","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":135,"family":"HGraph","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":2,"tactics":3,"parenDepth":3,"length":673},"snippet":"private lemma foldl_mono [DecidableEq V] {b b' : Finset V} {g : HGraph V} (hb : b ⊆ b') :\n    Multiset.foldl (vertsStep (V := V)) b g ⊆ Multiset.foldl (vertsStep (V := V)) b' g := by\n  classical\n  induction g using Multiset.induction_on generalizing b b' with\n  | empty =>\n      simpa using hb","pos":{"x":0.16250856832067342,"y":0.5537476085876818},"pos3":{"x":0.7800383768524991,"y":0.6321121922282442,"z":0.4482666517535396}},{"id":"HeytingLean.WPP.Wolfram.HGraph.mem_verts_of_mem","name":"HeytingLean.WPP.Wolfram.HGraph.mem_verts_of_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Hypergraph.lean","line":150,"family":"HGraph","features":{"implies":0,"not":0,"and":0,"or":1,"forall":0,"exists":0,"eq":7,"tactics":10,"parenDepth":3,"length":1548},"snippet":"lemma mem_verts_of_mem {v : V} [DecidableEq V] {e : Expr V} {g : HGraph V}\n    (he : e ∈ g) (hv : v ∈ e) : v ∈ verts (V := V) g := by\n  classical\n  -- Induct on the multiset of expressions.\n  induction g using Multiset.induction_on generalizing e with\n  | empty =>","pos":{"x":0.2516209543001324,"y":0.7376264228895845},"pos3":{"x":0.7627630835609845,"y":0.3286290875255029,"z":0.5459419466307011}},{"id":"HeytingLean.WPP.Wolfram.System.EventData","name":"HeytingLean.WPP.Wolfram.System.EventData","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":37,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":191},"snippet":"abbrev EventData : Type (max u v) := Fin sys.rules.length × (P → V)\n\nnamespace EventData\n\nvariable {sys}\n","pos":{"x":0.5102610774276524,"y":0.21844651345050176},"pos3":{"x":0.6031059277573566,"y":0.8340367790853179,"z":0.7127155322586457}},{"id":"HeytingLean.WPP.Wolfram.System.EventData.Applicable","name":"HeytingLean.WPP.Wolfram.System.EventData.Applicable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":44,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":311},"snippet":"def Applicable (ed : sys.EventData) (s : HGraph V) : Prop :=\n  (sys.rules.get ed.1).instLhs ed.2 ≤ s\n\ninstance (ed : sys.EventData) (s : HGraph V) : Decidable (ed.Applicable (sys := sys) s) := by\n  dsimp [Applicable]\n  infer_instance","pos":{"x":0.33086324813103823,"y":0.9088694798775455},"pos3":{"x":0.7054072706798257,"y":0.11043671205104055,"z":0.5801076684121717}},{"id":"HeytingLean.WPP.Wolfram.System.EventData.apply","name":"HeytingLean.WPP.Wolfram.System.EventData.apply","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":52,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":205},"snippet":"def apply (ed : sys.EventData) (s : HGraph V) : HGraph V :=\n  s - (sys.rules.get ed.1).instLhs ed.2 + (sys.rules.get ed.1).instRhs ed.2\n\nend EventData\n\n/-- All substitutions `P → V` (finite enumerator). -/","pos":{"x":0.5206541451419864,"y":0.2097577006024735},"pos3":{"x":0.5917927646028903,"y":0.8476630952982915,"z":0.7195869655410732}},{"id":"HeytingLean.WPP.Wolfram.System.allSubsts","name":"HeytingLean.WPP.Wolfram.System.allSubsts","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":58,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":3,"length":205},"snippet":"def allSubsts : Finset (P → V) :=\n  ((Finset.univ : Finset P).pi (fun _ : P => (Finset.univ : Finset V))).image (fun f a =>\n    f a (by simp))\n\n/-- `allSubsts` really enumerates *all* functions `P → V`. -/","pos":{"x":0.17607977578317774,"y":0.5943523224551499},"pos3":{"x":0.8172858540621812,"y":0.596212023029604,"z":0.5021994049573539}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allSubsts","name":"HeytingLean.WPP.Wolfram.System.mem_allSubsts","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":63,"family":"System","features":{"implies":3,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":3,"parenDepth":2,"length":449},"snippet":"lemma mem_allSubsts (σ : P → V) : σ ∈ allSubsts (P := P) (V := V) := by\n  let f : ∀ a, a ∈ (Finset.univ : Finset P) → V := fun a _ => σ a\n  have hf : f ∈ (Finset.univ : Finset P).pi (fun _ : P => (Finset.univ : Finset V)) := by\n    -- Membership in `pi` is pointwise membership in `Finset.univ`.\n    simp [f]\n  refine Finset.mem_image.mpr ?_","pos":{"x":0.386979931346698,"y":0.17822262585509382},"pos3":{"x":0.7460719113992823,"y":0.8558108144536999,"z":0.6260537438765682}},{"id":"HeytingLean.WPP.Wolfram.System.allInjSubsts","name":"HeytingLean.WPP.Wolfram.System.allInjSubsts","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":74,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":95},"snippet":"def allInjSubsts : Finset (P → V) :=\n  (allSubsts (P := P) (V := V)).filter Function.Injective\n","pos":{"x":0.4154812886962791,"y":0.020689764519084004},"pos3":{"x":0.9641564191018648,"y":0.8137456015657386,"z":0.6188413948207729}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allInjSubsts_iff","name":"HeytingLean.WPP.Wolfram.System.mem_allInjSubsts_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":77,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":284},"snippet":"lemma mem_allInjSubsts_iff (σ : P → V) :\n    σ ∈ allInjSubsts (P := P) (V := V) ↔ Function.Injective σ := by\n  have hmem : σ ∈ allSubsts (P := P) (V := V) := mem_allSubsts (P := P) (V := V) σ\n  simp [System.allInjSubsts, hmem]\n\n/-- All event-data pairs (rule index × substitution). -/","pos":{"x":0.5191598447603366,"y":0.2152468823026116},"pos3":{"x":0.6089683726140208,"y":0.8426602421394151,"z":0.7201255797782188}},{"id":"HeytingLean.WPP.Wolfram.System.allEventData","name":"HeytingLean.WPP.Wolfram.System.allEventData","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":83,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":3,"length":116},"snippet":"def allEventData (sys : System V P) : Finset sys.EventData :=\n  (Finset.univ.product (allSubsts (P := P) (V := V)))\n","pos":{"x":0.18395541473322974,"y":0.6205056666108607},"pos3":{"x":0.7937562682007686,"y":0.5524762300744035,"z":0.4766007533495129}},{"id":"HeytingLean.WPP.Wolfram.System.mem_allEventData_iff","name":"HeytingLean.WPP.Wolfram.System.mem_allEventData_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":86,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":227},"snippet":"lemma mem_allEventData_iff {ed : sys.EventData} :\n    ed ∈ sys.allEventData ↔ ed.2 ∈ allSubsts (P := P) (V := V) := by\n  simp [System.allEventData]\n\n/-- Outgoing edges from a state in the multiway graph (event-data labeled). -/","pos":{"x":0.826412936982817,"y":0.010080089891661688},"pos3":{"x":0.3849304309127211,"y":0.7503099071555739,"z":0.9963746381825279}},{"id":"HeytingLean.WPP.Wolfram.System.stepEdges","name":"HeytingLean.WPP.Wolfram.System.stepEdges","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":91,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":1,"parenDepth":4,"length":211},"snippet":"def stepEdges (s : HGraph V) : Finset (sys.EventData × HGraph V) :=\n  ((sys.allEventData.filter (fun ed => EventData.Applicable (sys := sys) ed s))).image (fun ed =>\n    (ed, EventData.apply (sys := sys) ed s))\n","pos":{"x":0.20485467813766625,"y":0.6195140727382465},"pos3":{"x":0.8235772145009854,"y":0.5421495540360824,"z":0.46395211872282444}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepEdges_iff","name":"HeytingLean.WPP.Wolfram.System.mem_stepEdges_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":95,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":0,"exists":0,"eq":4,"tactics":11,"parenDepth":2,"length":1030},"snippet":"lemma mem_stepEdges_iff {s t : HGraph V} {ed : sys.EventData} :\n    (ed, t) ∈ sys.stepEdges s ↔\n      ed ∈ sys.allEventData ∧\n      EventData.Applicable (sys := sys) ed s ∧\n      EventData.apply (sys := sys) ed s = t := by\n  constructor","pos":{"x":0.15355808491907352,"y":0.5184739448740202},"pos3":{"x":0.771445298855121,"y":0.671240972819416,"z":0.4319652967713429}},{"id":"HeytingLean.WPP.Wolfram.System.stepStates","name":"HeytingLean.WPP.Wolfram.System.stepStates","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":120,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":88},"snippet":"def stepStates (s : HGraph V) : Finset (HGraph V) :=\n  (sys.stepEdges s).image Prod.snd\n","pos":{"x":0.8480873175553685,"y":0.01795368348371202},"pos3":{"x":0.40070824401982424,"y":0.7841420258359618,"z":0.9914007543595045}},{"id":"HeytingLean.WPP.Wolfram.System.mem_stepStates_iff","name":"HeytingLean.WPP.Wolfram.System.mem_stepStates_iff","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":123,"family":"System","features":{"implies":0,"not":0,"and":2,"or":0,"forall":0,"exists":1,"eq":1,"tactics":6,"parenDepth":3,"length":713},"snippet":"lemma mem_stepStates_iff {s t : HGraph V} :\n    t ∈ sys.stepStates s ↔\n      ∃ ed, ed ∈ sys.allEventData ∧\n        EventData.Applicable (sys := sys) ed s ∧\n        EventData.apply (sys := sys) ed s = t := by\n  constructor","pos":{"x":0.18050193270991272,"y":0.3153045871162746},"pos3":{"x":0.5519172316498505,"y":0.6302275407703851,"z":0.42297002703350634}},{"id":"HeytingLean.WPP.Wolfram.System.toWppRule","name":"HeytingLean.WPP.Wolfram.System.toWppRule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":141,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":156},"snippet":"def toWppRule : WppRule (HGraph V) :=\n  { step := fun s => sys.stepStates s }\n\n/-- States reachable in exactly `n` multiway steps (finite approximation). -/","pos":{"x":0.6099444551647318,"y":0.579130767714767},"pos3":{"x":0,"y":0.07131875431308064,"z":0.8822717297050525}},{"id":"HeytingLean.WPP.Wolfram.System.statesAtDepth","name":"HeytingLean.WPP.Wolfram.System.statesAtDepth","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":145,"family":"System","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":3,"tactics":0,"parenDepth":1,"length":344},"snippet":"def statesAtDepth : Nat → Finset (HGraph V)\n  | 0 => {sys.init}\n  | n + 1 => (statesAtDepth n).biUnion (fun s => sys.stepStates s)\n\nend Finite\n","pos":{"x":0.15188798555209385,"y":0.4761440278656716},"pos3":{"x":0.7711536698779903,"y":0.7162916058229939,"z":0.4179499116968987}},{"id":"HeytingLean.WPP.Wolfram.System.Ordering","name":"HeytingLean.WPP.Wolfram.System.Ordering","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":158,"family":"System","features":{"implies":2,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":226},"snippet":"structure Ordering where\n  choose : HGraph V → Option sys.Event\n  sound : ∀ {s e}, choose s = some e → e.Applicable (sys := sys) s\n\nnamespace Ordering\n","pos":{"x":0.3725062245603223,"y":0.21317792488205095},"pos3":{"x":0.7007634725556603,"y":0.8704618496262585,"z":0.6186319108519314}},{"id":"HeytingLean.WPP.Wolfram.System.Ordering.EvolvesBy","name":"HeytingLean.WPP.Wolfram.System.Ordering.EvolvesBy","kind":"inductive","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":167,"family":"System","features":{"implies":5,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":327},"snippet":"inductive EvolvesBy (ord : Ordering (sys := sys)) : HGraph V → List sys.Event → HGraph V → Prop\n| nil (s : HGraph V) : EvolvesBy ord s [] s\n| cons {s : HGraph V} {es : List sys.Event} {t : HGraph V} (e : sys.Event) :\n    ord.choose s = some e →\n    EvolvesBy ord (e.apply (sys := sys) s) es t →\n    EvolvesBy ord s (e :: es) t","pos":{"x":0.40864175475782927,"y":0.13285594766231773},"pos3":{"x":0.8106858028610161,"y":0.8440858886938278,"z":0.6426849507929117}},{"id":"HeytingLean.WPP.Wolfram.System.Ordering.EvolvesBy.toEvolves","name":"HeytingLean.WPP.Wolfram.System.Ordering.EvolvesBy.toEvolves","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/Multiway.lean","line":174,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":2,"length":459},"snippet":"theorem EvolvesBy.toEvolves {ord : Ordering (sys := sys)} {s : HGraph V} {es : List sys.Event} {t : HGraph V} :\n    ord.EvolvesBy s es t → sys.Evolves s es t := by\n  intro h\n  induction h with\n  | nil s =>\n      simpa using (System.Evolves.nil (sys := sys) s)","pos":{"x":0.3977450358012773,"y":0.03633427015616424},"pos3":{"x":0.9452348867628588,"y":0.7732967198702148,"z":0.6195604788622778}},{"id":"HeytingLean.WPP.Wolfram.System.stepStates_iff_step","name":"HeytingLean.WPP.Wolfram.System.stepStates_iff_step","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/MultiwayBridge.lean","line":32,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":12,"parenDepth":2,"length":1257},"snippet":"theorem stepStates_iff_step {s t : HGraph V} :\n    t ∈ sys.stepStates s ↔ Step (sys := sys) s t := by\n  constructor\n  · intro ht\n    rcases (sys.mem_stepStates_iff (P := P) (V := V) (s := s) (t := t)).1 ht with\n      ⟨ed, hedAll, hedApp, hEq⟩","pos":{"x":0.31578133191917096,"y":0.816172729160709},"pos3":{"x":0.7657349651902433,"y":0.22421103676952875,"z":0.5704039063906842}},{"id":"HeytingLean.WPP.Wolfram.System.wpp_stepStar_iff_stepStar","name":"HeytingLean.WPP.Wolfram.System.wpp_stepStar_iff_stepStar","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/MultiwayBridge.lean","line":55,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":4,"tactics":11,"parenDepth":2,"length":1221},"snippet":"theorem wpp_stepStar_iff_stepStar {s t : HGraph V} :\n    WppRule.StepStar (R := sys.toWppRule) s t ↔ StepStar (sys := sys) s t := by\n  constructor\n  · intro h\n    induction h with\n    | refl s =>","pos":{"x":0.2949895048733591,"y":0.7941663937823448},"pos3":{"x":0.7588642108619716,"y":0.2668033791011312,"z":0.5676006708220087}},{"id":"HeytingLean.WPP.Wolfram.System.toWppRel","name":"HeytingLean.WPP.Wolfram.System.toWppRel","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/MultiwayRel.lean","line":27,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":380},"snippet":"def toWppRel : WppRel (HGraph V) where\n  stepRel := Step (sys := sys)\n\n@[simp] theorem toWppRel_stepRel {s t : HGraph V} :\n    (sys.toWppRel).stepRel s t ↔ Step (sys := sys) s t := Iff.rfl\n","pos":{"x":0.8228826072728356,"y":0.00524792817235513},"pos3":{"x":0.3878004478381664,"y":0.7407789667454348,"z":0.9991110313421162}},{"id":"HeytingLean.WPP.Wolfram.Rule","name":"HeytingLean.WPP.Wolfram.Rule","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":23,"family":"Rule","features":{"implies":4,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":1,"length":539},"snippet":"structure Rule (P : Type u) where\n  lhs : HGraph P\n  rhs : HGraph P\n\nnamespace Rule\n","pos":{"x":0.42505835215845134,"y":0.14854504472640276},"pos3":{"x":0.7895529618421879,"y":0.8499712506049321,"z":0.6578262291640343}},{"id":"HeytingLean.WPP.Wolfram.System","name":"HeytingLean.WPP.Wolfram.System","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":42,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":254},"snippet":"structure System (V : Type u) (P : Type v) where\n  rules : List (Rule P)\n  init : HGraph V\n\nnamespace System\n","pos":{"x":0.8266598174000279,"y":0},"pos3":{"x":0.3891728134642457,"y":0.7537596062001147,"z":0.9953628938414836}},{"id":"HeytingLean.WPP.Wolfram.System.Event","name":"HeytingLean.WPP.Wolfram.System.Event","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":51,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":512},"snippet":"structure Event (sys : System V P) where\n  idx : Fin sys.rules.length\n  σ : P → V\n\nnamespace Event\n","pos":{"x":0.5221960402589181,"y":0.22421359815418973},"pos3":{"x":0.6085486864585709,"y":0.8374645616846427,"z":0.7210800885732855}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Applicable","name":"HeytingLean.WPP.Wolfram.System.Event.Applicable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":68,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":349},"snippet":"def Applicable (e : sys.Event) (s : HGraph V) : Prop :=\n  e.input ≤ s\n\ninstance decidableApplicable [DecidableEq V] (e : sys.Event) (s : HGraph V) :\n    Decidable (e.Applicable (sys := sys) s) := by\n  dsimp [Applicable]","pos":{"x":0.3285605398866037,"y":0.9005816999901887},"pos3":{"x":0.7175150038022069,"y":0.12201450733392724,"z":0.5840811358339015}},{"id":"HeytingLean.WPP.Wolfram.System.Event.apply","name":"HeytingLean.WPP.Wolfram.System.Event.apply","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":79,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":197},"snippet":"def apply (e : sys.Event) (s : HGraph V) : HGraph V :=\n  s - e.input + e.output\n\n/-- Causal dependency (SetReplace): `e₁` causes `e₂` if some expression is created by `e₁`\nand destroyed by `e₂`. -/","pos":{"x":0.14935444301927825,"y":0.4792173889376579},"pos3":{"x":0.7728142875806194,"y":0.7028357898437337,"z":0.41546338974167757}},{"id":"HeytingLean.WPP.Wolfram.System.Event.Causes","name":"HeytingLean.WPP.Wolfram.System.Event.Causes","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":84,"family":"System","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":1,"eq":0,"tactics":1,"parenDepth":1,"length":195},"snippet":"def Causes (e₁ e₂ : sys.Event) : Prop :=\n  ∃ x, x ∈ e₁.output ∧ x ∈ e₂.input\n\nend Event\n\nvariable [DecidableEq V]","pos":{"x":0.1767667180137359,"y":0.2990630400122216},"pos3":{"x":0.5225010795161252,"y":0.6237305544615596,"z":0.4165210279150569}},{"id":"HeytingLean.WPP.Wolfram.System.Evolves","name":"HeytingLean.WPP.Wolfram.System.Evolves","kind":"inductive","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":92,"family":"System","features":{"implies":5,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":2,"length":338},"snippet":"inductive Evolves : HGraph V → List sys.Event → HGraph V → Prop\n| nil (s : HGraph V) : Evolves s [] s\n| cons {s : HGraph V} {es : List sys.Event} {t : HGraph V}\n    (e : sys.Event) :\n    e.Applicable (sys := sys) s →\n    Evolves (e.apply (sys := sys) s) es t →","pos":{"x":0.410309009929833,"y":0.12928739992045313},"pos3":{"x":0.8141807231680369,"y":0.8382714602456997,"z":0.6453577657145412}},{"id":"HeytingLean.WPP.Wolfram.System.Reachable","name":"HeytingLean.WPP.Wolfram.System.Reachable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":101,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":0,"tactics":0,"parenDepth":1,"length":132},"snippet":"def Reachable (t : HGraph V) : Prop :=\n  ∃ es, sys.Evolves sys.init es t\n\n/-- A normal form is a state with no applicable events. -/","pos":{"x":0.18963483461228556,"y":0.2779932981274481},"pos3":{"x":0.4768274680846258,"y":0.6284995763674984,"z":0.42115962768072435}},{"id":"HeytingLean.WPP.Wolfram.System.NormalForm","name":"HeytingLean.WPP.Wolfram.System.NormalForm","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/Rewrite.lean","line":105,"family":"System","features":{"implies":0,"not":1,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":138},"snippet":"def NormalForm (s : HGraph V) : Prop :=\n  ∀ e : sys.Event, ¬ e.Applicable (sys := sys) s\n\nend System\n\nend Wolfram","pos":{"x":0.01363787330064654,"y":0.5590156972083397},"pos3":{"x":0.966843782042751,"y":0.9033461423120317,"z":0.31819341515843147}},{"id":"HeytingLean.WPP.Wolfram.RuleFresh","name":"HeytingLean.WPP.Wolfram.RuleFresh","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":29,"family":"RuleFresh","features":{"implies":3,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":498},"snippet":"structure RuleFresh (P : Type u) where\n  nFresh : Nat\n  lhs : HGraph P\n  rhs : HGraph (Sum P (Fin nFresh))\n\nnamespace RuleFresh","pos":{"x":0.41926865646642303,"y":0.09762892431104536},"pos3":{"x":0.8674571043946325,"y":0.8207621824596015,"z":0.6374154937169152}},{"id":"HeytingLean.WPP.Wolfram.RuleFresh.WellFormed","name":"HeytingLean.WPP.Wolfram.RuleFresh.WellFormed","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":44,"family":"RuleFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":2,"eq":0,"tactics":0,"parenDepth":2,"length":210},"snippet":"def WellFormed {P : Type u} (r : RuleFresh P) : Prop :=\n  ∀ p : P, (∃ e ∈ r.rhs, (Sum.inl p) ∈ e) → (∃ e ∈ r.lhs, p ∈ e)\n\nend RuleFresh\n\n/-- A Wolfram-model system with fresh-vertex rules (SetReplace-style). -/","pos":{"x":0.20107678037355348,"y":0.29864675004320246},"pos3":{"x":0.4960563095603462,"y":0.6465351490171671,"z":0.4345598779430727}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh","name":"HeytingLean.WPP.Wolfram.SystemFresh","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":50,"family":"SystemFresh","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":269},"snippet":"structure SystemFresh (V : Type u) (P : Type v) where\n  rules : List (RuleFresh P)\n  init : HGraph V\n\nnamespace SystemFresh\n","pos":{"x":0.1505287394094159,"y":0.4829082597606125},"pos3":{"x":0.7731305046554995,"y":0.6965817698558295,"z":0.4093318037342173}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event","kind":"structure","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":59,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":403},"snippet":"structure Event (sys : SystemFresh V P) where\n  idx : Fin sys.rules.length\n  σ : P → V\n\nnamespace Event\n","pos":{"x":0.517066760171947,"y":0.2179549852681195},"pos3":{"x":0.5940615293758115,"y":0.826409469521861,"z":0.7175778169259157}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.FreshAssign","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.FreshAssign","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":75,"family":"SystemFresh","features":{"implies":2,"not":0,"and":1,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":425},"snippet":"def FreshAssign [DecidableEq V] (e : sys.Event) (τ : Fin (e.rule.nFresh) → V) (s : HGraph V) : Prop :=\n  Function.Injective τ ∧ ∀ i, τ i ∉ HGraph.verts (V := V) s\n\ninstance [DecidableEq V] (e : sys.Event) (τ : Fin (e.rule.nFresh) → V) (s : HGraph V) :\n    Decidable (e.FreshAssign τ s) := by\n  classical","pos":{"x":0.35426807424064655,"y":0.2093825460812009},"pos3":{"x":0.7033803270057677,"y":0.857773790486877,"z":0.6035242271431303}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.Applicable","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.Applicable","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":85,"family":"SystemFresh","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":310},"snippet":"def Applicable (e : sys.Event) (s : HGraph V) : Prop :=\n  e.input ≤ s\n\ninstance decidableApplicable [DecidableEq V] (e : sys.Event) (s : HGraph V) :\n    Decidable (e.Applicable s) := by\n  dsimp [Applicable]","pos":{"x":0.8297303449220153,"y":0.0044286759624177375},"pos3":{"x":0.39599821360320303,"y":0.7427566876697123,"z":1}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":96,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":234},"snippet":"def applyWith (e : sys.Event) (τ : Fin (e.rule.nFresh) → V) (s : HGraph V) : HGraph V :=\n  s - e.input + (e.rule).instRhs e.σ τ\n\n/-- Apply the event using a `FreshSupply`, allocating fresh vertices from the current state's support. -/","pos":{"x":0.4114739008585296,"y":0.029313129992361863},"pos3":{"x":0.9753686924648493,"y":0.809077744250235,"z":0.6215046612886944}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.apply","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.apply","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":100,"family":"SystemFresh","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":3,"length":228},"snippet":"noncomputable def apply (e : sys.Event) [FreshSupply V] (s : HGraph V) : HGraph V :=\n  e.applyWith (FreshSupply.alloc (V := V) (e.rule.nFresh) (HGraph.verts (V := V) s)) s\n\n/-- Fresh-supply allocation satisfies `FreshAssign`. -/","pos":{"x":0.19055746709433707,"y":0.6307047142005071},"pos3":{"x":0.8040156915831229,"y":0.5554551760709941,"z":0.4746417494512671}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.freshAssign_alloc","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.freshAssign_alloc","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":104,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":3,"length":348},"snippet":"lemma freshAssign_alloc [FreshSupply V] (e : sys.Event) (s : HGraph V) :\n    e.FreshAssign (FreshSupply.alloc (V := V) (e.rule.nFresh) (HGraph.verts (V := V) s)) s := by\n  refine ⟨FreshSupply.alloc_injective (V := V) _ _, ?_⟩\n  intro i\n  exact FreshSupply.alloc_not_mem (V := V) _ _ i\n","pos":{"x":0.18163022576511595,"y":0.608246292521319},"pos3":{"x":0.8097996830709382,"y":0.5651249429056714,"z":0.48753230178228246}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.rangeFinset","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.rangeFinset","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":111,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":97},"snippet":"def rangeFinset {n : Nat} (τ : Fin n → V) : Finset V :=\n  (Finset.univ : Finset (Fin n)).image τ\n","pos":{"x":0.41582200953319115,"y":0.020205757015004842},"pos3":{"x":0.9680497656115019,"y":0.8031275361504012,"z":0.6151300549650319}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.mem_rangeFinset","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.mem_rangeFinset","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":114,"family":"SystemFresh","features":{"implies":1,"not":1,"and":1,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":247},"snippet":"lemma mem_rangeFinset {n : Nat} (τ : Fin n → V) (i : Fin n) : τ i ∈ rangeFinset (V := V) τ := by\n  classical\n  refine Finset.mem_image.2 ?_\n  exact ⟨i, by simp, rfl⟩\n\n/-- Cross-disjointness: the ranges of `τ₁` and `τ₂` do not overlap pointwise. -/","pos":{"x":0.01734155551831214,"y":0.5443001101279533},"pos3":{"x":0.9599585850180024,"y":0.8821261930665645,"z":0.29996801306578774}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.CrossDisjoint","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.CrossDisjoint","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":120,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":79},"snippet":"def CrossDisjoint {n : Nat} (τ₁ τ₂ : Fin n → V) : Prop :=\n  ∀ i j, τ₁ i ≠ τ₂ j\n","pos":{"x":0.36348727898674155,"y":0.23517891096004936},"pos3":{"x":0.6830385718997799,"y":0.8877776583916368,"z":0.6091897537377282}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.crossDisjoint_of_not_mem_range","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.crossDisjoint_of_not_mem_range","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":123,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":3,"parenDepth":2,"length":371},"snippet":"lemma crossDisjoint_of_not_mem_range {n : Nat} {τ₁ τ₂ : Fin n → V}\n    (h : ∀ j, τ₂ j ∉ rangeFinset (V := V) τ₁) : CrossDisjoint (V := V) τ₁ τ₂ := by\n  intro i j hij\n  have : τ₂ j ∈ rangeFinset (V := V) τ₁ := by\n    simpa [hij] using mem_rangeFinset (V := V) τ₁ i\n  exact (h j this).elim","pos":{"x":0.3485485088886651,"y":0.22541668069736573},"pos3":{"x":0.6841571345279095,"y":0.8684136191100202,"z":0.598779608733377}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":131,"family":"SystemFresh","features":{"implies":4,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":4,"tactics":0,"parenDepth":2,"length":232},"snippet":"def swapPerm : ∀ {n : Nat}, (Fin n → V) → (Fin n → V) → Equiv.Perm V\n  | 0, _τ₁, _τ₂ => Equiv.refl V\n  | n + 1, τ₁, τ₂ =>\n      (Equiv.swap (τ₁ 0) (τ₂ 0)).trans <|\n        swapPerm (n := n) (fun i => τ₁ i.succ) (fun i => τ₂ i.succ)\n","pos":{"x":0.4017824407034317,"y":0.16075831566167043},"pos3":{"x":0.7694366331275916,"y":0.8520742215769571,"z":0.635775289166627}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_apply_of_forall_ne","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_apply_of_forall_ne","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":137,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":4,"exists":0,"eq":10,"tactics":7,"parenDepth":1,"length":670},"snippet":"lemma swapPerm_apply_of_forall_ne {n : Nat} {τ₁ τ₂ : Fin n → V} {x : V}\n    (h₁ : ∀ i, x ≠ τ₁ i) (h₂ : ∀ i, x ≠ τ₂ i) :\n    swapPerm τ₁ τ₂ x = x := by\n  induction n generalizing x with\n  | zero =>\n      simp [swapPerm]","pos":{"x":0.3078346484315726,"y":0.27032381309754533},"pos3":{"x":0.6039108616079614,"y":0.8686879380079627,"z":0.5699316409234861}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_apply_left","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_apply_left","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":153,"family":"SystemFresh","features":{"implies":1,"not":0,"and":1,"or":0,"forall":2,"exists":0,"eq":24,"tactics":34,"parenDepth":2,"length":2445},"snippet":"lemma swapPerm_apply_left {n : Nat} {τ₁ τ₂ : Fin n → V}\n    (hτ₁ : Function.Injective τ₁) (hτ₂ : Function.Injective τ₂)\n    (hdis : CrossDisjoint (V := V) τ₁ τ₂) (i : Fin n) :\n    swapPerm τ₁ τ₂ (τ₁ i) = τ₂ i := by\n  induction n with\n  | zero =>","pos":{"x":0.29749267610773605,"y":0.26814341132846214},"pos3":{"x":0.6006913752516526,"y":0.8481581110398594,"z":0.56384618758359}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_fix_of_mem_verts","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.swapPerm_fix_of_mem_verts","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":204,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":450},"snippet":"lemma swapPerm_fix_of_mem_verts {n : Nat} {τ₁ τ₂ : Fin n → V} {s : HGraph V}\n    (hτ₁ : ∀ i, τ₁ i ∉ HGraph.verts (V := V) s)\n    (hτ₂ : ∀ i, τ₂ i ∉ HGraph.verts (V := V) s)\n    {x : V} (hx : x ∈ HGraph.verts (V := V) s) :\n    swapPerm τ₁ τ₂ x = x := by\n  refine swapPerm_apply_of_forall_ne (V := V) (τ₁ := τ₁) (τ₂ := τ₂) (x := x) ?_ ?_","pos":{"x":0.3171286654282813,"y":0.23694255262030273},"pos3":{"x":0.6405743215860636,"y":0.8601967475488346,"z":0.5775952643097993}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.expr_rename_eq_self_of_forall_mem","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.expr_rename_eq_self_of_forall_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":216,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":7,"tactics":8,"parenDepth":1,"length":471},"snippet":"private lemma expr_rename_eq_self_of_forall_mem (f : V → V) (e : Expr V) (h : ∀ x ∈ e, f x = x) :\n    Expr.rename f e = e := by\n  induction e with\n  | nil =>\n      simp [Expr.rename]\n  | cons a e ih =>","pos":{"x":0.3152790307817824,"y":0.2525271400034754},"pos3":{"x":0.6089938636038198,"y":0.8663397754969542,"z":0.574711007177294}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_forall_mem","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_forall_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":230,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":9,"tactics":10,"parenDepth":1,"length":667},"snippet":"private lemma hgraph_rename_eq_self_of_forall_mem (f : V → V) (g : HGraph V)\n    (h : ∀ e ∈ g, Expr.rename f e = e) : HGraph.rename f g = g := by\n  classical\n  induction g using Multiset.induction_on with\n  | empty =>\n      simp [HGraph.rename]","pos":{"x":0.3073419605593753,"y":0.26293491996266294},"pos3":{"x":0.6115091491537739,"y":0.8570517512669186,"z":0.5680217128576666}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_fix_verts","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_fix_verts","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":248,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":6,"parenDepth":2,"length":426},"snippet":"private lemma hgraph_rename_eq_self_of_fix_verts (f : V → V) (s : HGraph V)\n    (hfix : ∀ x ∈ HGraph.verts (V := V) s, f x = x) : HGraph.rename f s = s := by\n  apply hgraph_rename_eq_self_of_forall_mem (V := V) (f := f) (g := s)\n  intro e he\n  apply expr_rename_eq_self_of_forall_mem (V := V) (f := f) (e := e)\n  intro x hx","pos":{"x":0.35203550666126393,"y":0.2202479781339558},"pos3":{"x":0.6824401331078147,"y":0.8653260611633863,"z":0.5975092589949073}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_le","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.hgraph_rename_eq_self_of_le","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":257,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":8,"parenDepth":2,"length":617},"snippet":"private lemma hgraph_rename_eq_self_of_le (f : V → V) {t s : HGraph V} (ht : t ≤ s)\n    (hfix : ∀ x ∈ HGraph.verts (V := V) s, f x = x) : HGraph.rename f t = t := by\n  apply hgraph_rename_eq_self_of_forall_mem (V := V) (f := f) (g := t)\n  intro e he\n  have he' : e ∈ s := Multiset.mem_of_le ht he\n  have := hgraph_rename_eq_self_of_fix_verts (V := V) (f := f) (s := s) hfix","pos":{"x":0.34588554178069353,"y":0.22606194531460222},"pos3":{"x":0.6787178889915155,"y":0.8610750315289665,"z":0.5948612553320263}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.sigma_mem_verts_of_inLhs","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.sigma_mem_verts_of_inLhs","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":269,"family":"SystemFresh","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":1,"eq":1,"tactics":4,"parenDepth":2,"length":673},"snippet":"private lemma sigma_mem_verts_of_inLhs (e : sys.Event) {s : HGraph V} (happ : e.Applicable s)\n    {p : P} (hp : ∃ ex ∈ (e.rule.lhs), p ∈ ex) : e.σ p ∈ HGraph.verts (V := V) s := by\n  rcases hp with ⟨ex, hex, hp⟩\n  have hexInput : Expr.rename e.σ ex ∈ e.input (sys := sys) := by\n    -- `input = rename σ lhs`\n    simpa [SystemFresh.Event.input, RuleFresh.instLhs, HGraph.rename] using","pos":{"x":0.18005821613150552,"y":0.2831855192553695},"pos3":{"x":0.49929293397400987,"y":0.6281796673162479,"z":0.42114428194303594}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.sigma_fixed_of_inRhs","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.sigma_fixed_of_inRhs","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":281,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":2,"eq":1,"tactics":2,"parenDepth":2,"length":689},"snippet":"private lemma sigma_fixed_of_inRhs (e : sys.Event) {s : HGraph V} (happ : e.Applicable s)\n    (hwell : (e.rule).WellFormed) {p : P}\n    (hpRhs : ∃ ex ∈ (e.rule.rhs), (Sum.inl p) ∈ ex)\n    {n : Nat} {τ₁ τ₂ : Fin n → V} (hτ₁ : ∀ i, τ₁ i ∉ HGraph.verts (V := V) s)\n    (hτ₂ : ∀ i, τ₂ i ∉ HGraph.verts (V := V) s) :\n    swapPerm τ₁ τ₂ (e.σ p) = e.σ p := by","pos":{"x":0.20252657927662115,"y":0.2873522644845723},"pos3":{"x":0.5012080024454378,"y":0.6467058524716328,"z":0.43449668557423293}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_rename_of_crossDisjoint","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_rename_of_crossDisjoint","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":292,"family":"SystemFresh","features":{"implies":2,"not":0,"and":1,"or":0,"forall":3,"exists":2,"eq":19,"tactics":22,"parenDepth":3,"length":4009},"snippet":"lemma applyWith_rename_of_crossDisjoint (e : sys.Event) {s : HGraph V}\n    (happ : e.Applicable s) (hwell : (e.rule).WellFormed)\n    {τ₁ τ₂ : Fin (e.rule.nFresh) → V}\n    (hτ₁ : e.FreshAssign τ₁ s) (hτ₂ : e.FreshAssign τ₂ s)\n    (hdis : CrossDisjoint (V := V) τ₁ τ₂) :\n    HGraph.rename (swapPerm τ₁ τ₂) (e.applyWith τ₁ s) = e.applyWith τ₂ s := by","pos":{"x":0.20990644326948119,"y":0.2869093524802707},"pos3":{"x":0.5169352985588717,"y":0.6544724655731542,"z":0.44013562152298896}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_iso_of_crossDisjoint","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_iso_of_crossDisjoint","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":382,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":445},"snippet":"lemma applyWith_iso_of_crossDisjoint (e : sys.Event) {s : HGraph V}\n    (happ : e.Applicable s) (hwell : (e.rule).WellFormed)\n    {τ₁ τ₂ : Fin (e.rule.nFresh) → V}\n    (hτ₁ : e.FreshAssign τ₁ s) (hτ₂ : e.FreshAssign τ₂ s)\n    (hdis : CrossDisjoint (V := V) τ₁ τ₂) :\n    HGraph.Iso (e.applyWith τ₁ s) (e.applyWith τ₂ s) := by","pos":{"x":0.4044958821087999,"y":0.039844411551070234},"pos3":{"x":0.9692210960535462,"y":0.8003117735534091,"z":0.6217168631518809}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_iso","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.applyWith_iso","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/RewriteFresh.lean","line":391,"family":"SystemFresh","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":33,"parenDepth":2,"length":2298},"snippet":"lemma applyWith_iso (e : sys.Event) [FreshSupply V] {s : HGraph V}\n    (happ : e.Applicable s) (hwell : (e.rule).WellFormed)\n    {τ₁ τ₂ : Fin (e.rule.nFresh) → V}\n    (hτ₁ : e.FreshAssign τ₁ s) (hτ₂ : e.FreshAssign τ₂ s) :\n    HGraph.Iso (e.applyWith τ₁ s) (e.applyWith τ₂ s) := by\n  classical","pos":{"x":0.40034111218521024,"y":0.0691569020208284},"pos3":{"x":0.9092749580975084,"y":0.77929038872849,"z":0.6305819298516178}},{"id":"HeytingLean.WPP.Wolfram.HGraph.SimpleEdges","name":"HeytingLean.WPP.Wolfram.HGraph.SimpleEdges","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/SimpleHypergraph.lean","line":29,"family":"HGraph","features":{"implies":0,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":172},"snippet":"def SimpleEdges (g : HGraph V) : Prop :=\n  ∀ e ∈ g, (e : Expr V).Nodup\n\nend HGraph\n\nnamespace System","pos":{"x":0.3613348592745169,"y":0.2411597689229114},"pos3":{"x":0.6917639179570941,"y":0.8903617541962588,"z":0.6091079514579045}},{"id":"HeytingLean.WPP.Wolfram.System.Event.injectiveOn_of_applicable_of_mem_lhs","name":"HeytingLean.WPP.Wolfram.System.Event.injectiveOn_of_applicable_of_mem_lhs","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/SimpleHypergraph.lean","line":39,"family":"System","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":2,"tactics":5,"parenDepth":2,"length":932},"snippet":"lemma injectiveOn_of_applicable_of_mem_lhs [DecidableEq V] (e : sys.Event) (s : HGraph V)\n    (hs : HGraph.SimpleEdges (V := V) s) (happ : e.Applicable (sys := sys) s)\n    {ex : Expr P} (hex : ex ∈ (sys.rules.get e.idx).lhs) :\n    ∀ x ∈ ex, ∀ y ∈ ex, e.σ x = e.σ y → x = y := by\n  classical\n  -- `σ(ex)` is one of the instantiated input edges.","pos":{"x":0.32107705353845106,"y":0.24575562600441989},"pos3":{"x":0.6443788133227687,"y":0.8500789187438241,"z":0.5733206524318818}},{"id":"HeytingLean.WPP.Wolfram.System.Event.injective_of_applicable_of_finRange_mem_lhs","name":"HeytingLean.WPP.Wolfram.System.Event.injective_of_applicable_of_finRange_mem_lhs","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/SimpleHypergraph.lean","line":55,"family":"System","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":2,"length":638},"snippet":"theorem injective_of_applicable_of_finRange_mem_lhs [DecidableEq V] {n : Nat}\n    (sys : System V (Fin n)) (e : sys.Event) (s : HGraph V)\n    (hs : HGraph.SimpleEdges (V := V) s) (happ : e.Applicable (sys := sys) s)\n    (hfin : List.finRange n ∈ (sys.rules.get e.idx).lhs) :\n    Function.Injective e.σ := by\n  intro i j hij","pos":{"x":0.33101427396516564,"y":0.8421477480834418},"pos3":{"x":0.7577220528917356,"y":0.17297907568239881,"z":0.5673259880473533}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.injectiveOn_of_applicable_of_mem_lhs","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.injectiveOn_of_applicable_of_mem_lhs","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/SimpleHypergraph.lean","line":73,"family":"SystemFresh","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":2,"tactics":5,"parenDepth":2,"length":892},"snippet":"lemma injectiveOn_of_applicable_of_mem_lhs [DecidableEq V] (e : sys.Event) (s : HGraph V)\n    (hs : HGraph.SimpleEdges (V := V) s) (happ : e.Applicable s)\n    {ex : Expr P} (hex : ex ∈ (e.rule).lhs) :\n    ∀ x ∈ ex, ∀ y ∈ ex, e.σ x = e.σ y → x = y := by\n  classical\n  -- `σ(ex)` is one of the instantiated input edges.","pos":{"x":0.3174731415771909,"y":0.24499156767539004},"pos3":{"x":0.6374629859793542,"y":0.8629992009982548,"z":0.5809515161735244}},{"id":"HeytingLean.WPP.Wolfram.SystemFresh.Event.injective_of_applicable_of_finRange_mem_lhs","name":"HeytingLean.WPP.Wolfram.SystemFresh.Event.injective_of_applicable_of_finRange_mem_lhs","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/SimpleHypergraph.lean","line":89,"family":"SystemFresh","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":3,"parenDepth":2,"length":561},"snippet":"theorem injective_of_applicable_of_finRange_mem_lhs [DecidableEq V] {n : Nat}\n    (sys : SystemFresh V (Fin n)) (e : sys.Event) (s : HGraph V)\n    (hs : HGraph.SimpleEdges (V := V) s) (happ : e.Applicable s)\n    (hfin : List.finRange n ∈ (e.rule).lhs) :\n    Function.Injective e.σ := by\n  intro i j hij","pos":{"x":0.3355340527011917,"y":0.8522574468037163},"pos3":{"x":0.7468391414154412,"y":0.16946446133541287,"z":0.5623990150150806}},{"id":"HeytingLean.WPP.Wolfram.WM148.P","name":"HeytingLean.WPP.Wolfram.WM148.P","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":23,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":24},"snippet":"abbrev P : Type := Fin 2","pos":{"x":0.9919318224006693,"y":0.623203925782902},"pos3":{"x":0.7372126187340745,"y":0.9926386348976085,"z":0.011123998055510783}},{"id":"HeytingLean.WPP.Wolfram.WM148.V","name":"HeytingLean.WPP.Wolfram.WM148.V","kind":"abbrev","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":24,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":23},"snippet":"abbrev V : Type := Nat\n","pos":{"x":0.9975207197558562,"y":0.63066078214335},"pos3":{"x":0.7448596688365365,"y":0.9987006722758887,"z":0.011334007711842616}},{"id":"HeytingLean.WPP.Wolfram.WM148.rule","name":"HeytingLean.WPP.Wolfram.WM148.rule","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":26,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":4,"length":175},"snippet":"def rule : RuleFresh P where\n  nFresh := 1\n  lhs := ([[0, 1]] : List (Expr P))\n  rhs := ([[Sum.inl 0, Sum.inl 1], [Sum.inl 1, Sum.inr 0]] :\n      List (Expr (Sum P (Fin 1))))\n","pos":{"x":0.19883036661677655,"y":0.6184101207327485},"pos3":{"x":0.8128317817123082,"y":0.5412710888516099,"z":0.46981149805767086}},{"id":"HeytingLean.WPP.Wolfram.WM148.init","name":"HeytingLean.WPP.Wolfram.WM148.init","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":32,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":2,"length":52},"snippet":"def init : HGraph V :=\n  ([[0, 0]] : List (Expr V))\n","pos":{"x":0.3306569912836551,"y":0.9934476250947889},"pos3":{"x":0.6879989501800251,"y":0.009350284607182473,"z":0.5968137849227007}},{"id":"HeytingLean.WPP.Wolfram.WM148.sys","name":"HeytingLean.WPP.Wolfram.WM148.sys","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":35,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":2,"parenDepth":0,"length":166},"snippet":"def sys : SystemFresh V P where\n  rules := [rule]\n  init := init\n\n@[simp] lemma sys_rules_length : sys.rules.length = 1 := by\n  simp [sys]","pos":{"x":0.9800533736818877,"y":0.6075088050640969},"pos3":{"x":0.7167517517286589,"y":0.9740999291868215,"z":0}},{"id":"HeytingLean.WPP.Wolfram.WM148.rule_wellFormed","name":"HeytingLean.WPP.Wolfram.WM148.rule_wellFormed","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":44,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":3,"tactics":7,"parenDepth":1,"length":411},"snippet":"lemma rule_wellFormed : RuleFresh.WellFormed rule := by\n  intro p _hpRhs\n  refine ⟨[0, 1], by simp [rule], ?_⟩\n  cases p using Fin.cases with\n  | zero => simp\n  | succ p =>","pos":{"x":0.508217560112723,"y":0.6281991378651017},"pos3":{"x":0.07398469454886372,"y":0.22722730659971066,"z":0.9125372731993662}},{"id":"HeytingLean.WPP.Wolfram.WM148.freshNat","name":"HeytingLean.WPP.Wolfram.WM148.freshNat","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":59,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":70},"snippet":"def freshNat (forbidden : Finset Nat) : Nat :=\n  forbidden.sup id + 1\n","pos":{"x":0.8518467775874634,"y":0.01098987029881636},"pos3":{"x":0.3929096019139039,"y":0.7953693964654556,"z":0.9869338791017764}},{"id":"HeytingLean.WPP.Wolfram.WM148.freshNat_not_mem","name":"HeytingLean.WPP.Wolfram.WM148.freshNat_not_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":62,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":4,"parenDepth":2,"length":604},"snippet":"lemma freshNat_not_mem (forbidden : Finset Nat) : freshNat forbidden ∉ forbidden := by\n  classical\n  intro hmem\n  have hle : freshNat forbidden ≤ forbidden.sup id := by\n    -- `freshNat forbidden ∈ forbidden` implies `freshNat forbidden ≤ sup`.\n    simpa [freshNat] using (Finset.le_sup (f := id) (s := forbidden) hmem)","pos":{"x":0.3299809700889471,"y":0.8407672384178214},"pos3":{"x":0.7515576464259197,"y":0.171462428683929,"z":0.5662956335506601}},{"id":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat","name":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":74,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":110},"snippet":"def allocFreshNat (n : Nat) (forbidden : Finset Nat) : Fin n → Nat :=\n  fun i => (forbidden.sup id + 1) + i.1\n","pos":{"x":0.520215169403712,"y":0.20100937504116106},"pos3":{"x":0.5965165239468804,"y":0.836564846991435,"z":0.7145239115402696}},{"id":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat_injective","name":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat_injective","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":77,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":5,"parenDepth":1,"length":258},"snippet":"lemma allocFreshNat_injective (n : Nat) (forbidden : Finset Nat) :\n    Function.Injective (allocFreshNat n forbidden) := by\n  intro i j hij\n  apply Fin.ext\n  -- cancel the common prefix\n  have : i.1 = j.1 := by","pos":{"x":0.5366254956020424,"y":0.6124435922328274},"pos3":{"x":0.07366767757995049,"y":0.197510811595073,"z":0.9179319991428672}},{"id":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat_not_mem","name":"HeytingLean.WPP.Wolfram.WM148.allocFreshNat_not_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":86,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":6,"parenDepth":2,"length":891},"snippet":"lemma allocFreshNat_not_mem (n : Nat) (forbidden : Finset Nat) (i : Fin n) :\n    allocFreshNat n forbidden i ∉ forbidden := by\n  classical\n  intro hmem\n  have hle : allocFreshNat n forbidden i ≤ forbidden.sup id := by\n    simpa using (Finset.le_sup (f := id) (s := forbidden) hmem)","pos":{"x":0.3277270520913221,"y":0.8367821121753767},"pos3":{"x":0.7650560501376442,"y":0.1858922841940762,"z":0.568225154020378}},{"id":"HeytingLean.WPP.Wolfram.WM148.idx0","name":"HeytingLean.WPP.Wolfram.WM148.idx0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":107,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":124},"snippet":"def idx0 : Fin sys.rules.length :=\n  ⟨0, by simp [sys]⟩\n\n/-- Build an event for the unique rule, from a substitution `σ`. -/","pos":{"x":0.8330614108184333,"y":0.027614186448889234},"pos3":{"x":0.42887973859756323,"y":0.7509877725912618,"z":0.9940166936173463}},{"id":"HeytingLean.WPP.Wolfram.WM148.mkEvent","name":"HeytingLean.WPP.Wolfram.WM148.mkEvent","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":111,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":1,"parenDepth":1,"length":168},"snippet":"def mkEvent (σ : P → V) : sys.Event :=\n  { idx := idx0, σ := σ }\n\n/-- Deterministically apply an event, allocating fresh vertices as `allocFreshNat` above `verts s`. -/","pos":{"x":0.5186560124697541,"y":0.21320230307538848},"pos3":{"x":0.6056752911027029,"y":0.8361965415877269,"z":0.713715122038847}},{"id":"HeytingLean.WPP.Wolfram.WM148.applyDet","name":"HeytingLean.WPP.Wolfram.WM148.applyDet","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148.lean","line":115,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":3,"length":178},"snippet":"def applyDet (e : sys.Event) (s : HGraph V) : HGraph V :=\n  e.applyWith (allocFreshNat e.rule.nFresh (HGraph.verts (V := V) s)) s\n\nend WM148\n\nend Wolfram","pos":{"x":0.1898947678593431,"y":0.6290671164604009},"pos3":{"x":0.8005476324072972,"y":0.5438697015227086,"z":0.4775149331284572}},{"id":"HeytingLean.WPP.Wolfram.WM148.expr_rename_eq_self_of_forall_mem","name":"HeytingLean.WPP.Wolfram.WM148.expr_rename_eq_self_of_forall_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":35,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":7,"tactics":8,"parenDepth":1,"length":458},"snippet":"private lemma expr_rename_eq_self_of_forall_mem {V : Type} (f : V → V) (e : Expr V)\n    (h : ∀ x ∈ e, f x = x) : Expr.rename f e = e := by\n  induction e with\n  | nil =>\n      simp [Expr.rename]\n  | cons a e ih =>","pos":{"x":0.31054918412637145,"y":0.2591792275130101},"pos3":{"x":0.613414312018562,"y":0.8652699260230211,"z":0.5740024210312487}},{"id":"HeytingLean.WPP.Wolfram.WM148.hgraph_rename_eq_self_of_forall_mem","name":"HeytingLean.WPP.Wolfram.WM148.hgraph_rename_eq_self_of_forall_mem","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":48,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":9,"tactics":10,"parenDepth":1,"length":654},"snippet":"private lemma hgraph_rename_eq_self_of_forall_mem {V : Type} (f : V → V) (g : HGraph V)\n    (h : ∀ e ∈ g, Expr.rename f e = e) : HGraph.rename f g = g := by\n  classical\n  induction g using Multiset.induction_on with\n  | empty =>\n      simp [HGraph.rename]","pos":{"x":0.30964536007178445,"y":0.26331162044976636},"pos3":{"x":0.6128913007557244,"y":0.8679772446457489,"z":0.572529968369988}},{"id":"HeytingLean.WPP.Wolfram.WM148.hgraph_rename_eq_self_of_fix_verts","name":"HeytingLean.WPP.Wolfram.WM148.hgraph_rename_eq_self_of_fix_verts","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":66,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":2,"tactics":6,"parenDepth":2,"length":435},"snippet":"private lemma hgraph_rename_eq_self_of_fix_verts {V : Type} [DecidableEq V] (f : V → V) (s : HGraph V)\n    (hfix : ∀ x ∈ HGraph.verts (V := V) s, f x = x) : HGraph.rename f s = s := by\n  apply hgraph_rename_eq_self_of_forall_mem (f := f) (g := s)\n  intro e he\n  apply expr_rename_eq_self_of_forall_mem (f := f) (e := e)\n  intro x hx","pos":{"x":0.3479764499972903,"y":0.22148852301666225},"pos3":{"x":0.6836020302440846,"y":0.8703468090211165,"z":0.5987300032749863}},{"id":"HeytingLean.WPP.Wolfram.WM148.multiset_foldl_singleton","name":"HeytingLean.WPP.Wolfram.WM148.multiset_foldl_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":75,"family":"WM148","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":169},"snippet":"private lemma multiset_foldl_singleton {α β : Type} (f : β → α → β) [RightCommutative f] (b : β) (a : α) :\n    Multiset.foldl f b ({a} : Multiset α) = f b a := by\n  rfl\n","pos":{"x":0.47888856122179574,"y":0.18236579451663026},"pos3":{"x":0.6935121979301411,"y":0.874493727735019,"z":0.6957893693261419}},{"id":"HeytingLean.WPP.Wolfram.WM148.verts_add_singleton","name":"HeytingLean.WPP.Wolfram.WM148.verts_add_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":79,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":552},"snippet":"private lemma verts_add_singleton {V : Type} [DecidableEq V] (g : HGraph V) (e : Expr V) :\n    HGraph.verts (V := V) (g + ({e} : HGraph V)) = HGraph.verts (V := V) g ∪ e.toFinset := by\n  classical\n  -- `verts` is a commutative `foldl`, so `verts (g + {e})` is `verts g` union the vertices of `e`.\n  simp [HGraph.verts, Multiset.foldl_add, multiset_foldl_singleton, HGraph.vertsStep]\n","pos":{"x":0.318746000352434,"y":0.8630306543521945},"pos3":{"x":0.7165201829541135,"y":0.16624585556033608,"z":0.5696487312765376}},{"id":"HeytingLean.WPP.Wolfram.WM148.wm148_rule_eq","name":"HeytingLean.WPP.Wolfram.WM148.wm148_rule_eq","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":92,"family":"WM148","features":{"implies":0,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":5,"tactics":11,"parenDepth":1,"length":545},"snippet":"private lemma wm148_rule_eq (e : sys.Event) : e.rule = rule := by\n  -- `sys.rules = [rule]`, and `e.idx : Fin 1`, so the only possible `get` is `rule`.\n  have hlen : sys.rules.length = 1 := by\n    simp [sys]\n  have hlt : (e.idx : Nat) < 1 :=\n    lt_of_lt_of_eq e.idx.isLt hlen","pos":{"x":0.14506929095494348,"y":0.48552044101882647},"pos3":{"x":0.7726824718017764,"y":0.7068875076306066,"z":0.41828505166420676}},{"id":"HeytingLean.WPP.Wolfram.WM148.wm148_nFresh","name":"HeytingLean.WPP.Wolfram.WM148.wm148_nFresh","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":107,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":2,"length":141},"snippet":"private lemma wm148_nFresh (e : sys.Event) : e.rule.nFresh = 1 := by\n  simpa [rule] using congrArg RuleFresh.nFresh (wm148_rule_eq (e := e))\n","pos":{"x":0.30484036581793944,"y":0.9039125597353275},"pos3":{"x":0.6732253125026963,"y":0.1453080520040054,"z":0.58507281594866}},{"id":"HeytingLean.WPP.Wolfram.WM148.fresh0","name":"HeytingLean.WPP.Wolfram.WM148.fresh0","kind":"def","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":110,"family":"WM148","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":218},"snippet":"private def fresh0 (e : sys.Event) : Fin e.rule.nFresh :=\n  ⟨0, by\n    have hn : e.rule.nFresh = 1 := wm148_nFresh (e := e)\n    -- Avoid `simp`: it can rewrite `0 < 1` to `True`.\n    rw [hn]\n    exact Nat.zero_lt_one⟩","pos":{"x":0.3041032333668673,"y":0.8621952352786351},"pos3":{"x":0.7262310919217849,"y":0.19147333391767082,"z":0.5912139084401591}},{"id":"HeytingLean.WPP.Wolfram.WM148.input_eq_singleton","name":"HeytingLean.WPP.Wolfram.WM148.input_eq_singleton","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":117,"family":"WM148","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":1,"parenDepth":1,"length":357},"snippet":"private lemma input_eq_singleton (e : sys.Event) :\n    e.input (sys := sys) = ({[e.σ 0, e.σ 1]} : HGraph Nat) := by\n  classical\n  -- Keep `e.rule` intact (do not unfold it to `sys.rules.get ...`) so we can rewrite it.\n  simp [-SystemFresh.Event.rule, SystemFresh.Event.input, RuleFresh.instLhs, wm148_rule_eq (e := e),\n    rule, HGraph.rename, Expr.rename]","pos":{"x":0.012308913483766167,"y":0.5773617671235503},"pos3":{"x":0.9817886250366397,"y":0.8907383686596485,"z":0.3066352951022562}},{"id":"HeytingLean.WPP.Wolfram.WM148.instRhs_eq_input_add_new","name":"HeytingLean.WPP.Wolfram.WM148.instRhs_eq_input_add_new","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":124,"family":"WM148","features":{"implies":1,"not":0,"and":1,"or":0,"forall":0,"exists":0,"eq":7,"tactics":11,"parenDepth":3,"length":1093},"snippet":"private lemma instRhs_eq_input_add_new (e : sys.Event) (τ : Fin e.rule.nFresh → Nat) :\n    e.rule.instRhs e.σ τ =\n      e.input (sys := sys) + ({[e.σ 1, τ (fresh0 (e := e))]} : HGraph Nat) := by\n  classical\n  -- We cannot use numerals for `Fin sys.rules.length`, so we case-split on the unique rule index.\n  cases e with","pos":{"x":0.15939636052758008,"y":0.5497597971255225},"pos3":{"x":0.7906317683763424,"y":0.626659764147732,"z":0.45283504992831014}},{"id":"HeytingLean.WPP.Wolfram.WM148.applyWith_eq_add_new","name":"HeytingLean.WPP.Wolfram.WM148.applyWith_eq_add_new","kind":"lemma","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":149,"family":"WM148","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":6,"tactics":4,"parenDepth":4,"length":1305},"snippet":"private lemma applyWith_eq_add_new (e : sys.Event) (τ : Fin e.rule.nFresh → Nat) (s : HGraph Nat)\n    (happ : e.Applicable (sys := sys) s) :\n    e.applyWith (sys := sys) τ s =\n      s + ({[e.σ 1, τ (fresh0 (e := e))]} : HGraph Nat) := by\n  classical\n  have hcancel : s - e.input (sys := sys) + e.input (sys := sys) = s := Multiset.sub_add_cancel happ","pos":{"x":0.1986898850042804,"y":0.6072083647719599},"pos3":{"x":0.8181966047832465,"y":0.5664580192654016,"z":0.4755942782345402}},{"id":"HeytingLean.WPP.Wolfram.WM148.causalInvariant","name":"HeytingLean.WPP.Wolfram.WM148.causalInvariant","kind":"theorem","path":"lean/HeytingLean/WPP/Wolfram/WM148CausalInvariant.lean","line":179,"family":"WM148","features":{"implies":4,"not":1,"and":6,"or":9,"forall":0,"exists":0,"eq":69,"tactics":231,"parenDepth":3,"length":19731},"snippet":"theorem causalInvariant : SystemFresh.CausalInvariant (sys := sys) := by\n  classical\n  intro a b c hab hac\n  rcases hab with ⟨e1, τ1, happ1, hfresh1, rfl⟩\n  rcases hac with ⟨e2, τ2, happ2, hfresh2, rfl⟩\n","pos":{"x":0.27337719629469087,"y":0.7234340343775685},"pos3":{"x":0.7658538300470703,"y":0.37275656648867767,"z":0.5454612794550318}},{"id":"HeytingLean.WPP.WppRule","name":"HeytingLean.WPP.WppRule","kind":"structure","path":"lean/HeytingLean/WPP/Multiway.lean","line":28,"family":"WppRule","features":{"implies":1,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":197},"snippet":"structure WppRule (State : Type u) where\n  step : State → Finset State\n\nnamespace WppRule\n\nvariable {State : Type u} (R : WppRule State)","pos":{"x":0.5186262684982516,"y":0.21748520056029552},"pos3":{"x":0.615612008848697,"y":0.8326347531685303,"z":0.7113104388090821}},{"id":"HeytingLean.WPP.WppRule.stepRel","name":"HeytingLean.WPP.WppRule.stepRel","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":36,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":51},"snippet":"def stepRel (s t : State) : Prop := t ∈ (R.step s)\n","pos":{"x":0.8510758238044184,"y":0.010144863480801087},"pos3":{"x":0.4003376655099837,"y":0.7917711320429461,"z":0.987569205018415}},{"id":"HeytingLean.WPP.WppRule.StepStar","name":"HeytingLean.WPP.WppRule.StepStar","kind":"inductive","path":"lean/HeytingLean/WPP/Multiway.lean","line":38,"family":"WppRule","features":{"implies":4,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":179},"snippet":"inductive StepStar : State → State → Prop\n| refl (s : State) : StepStar s s\n| tail {s t u : State} : stepRel R s t → StepStar t u → StepStar s u\n\nnamespace StepStar\n","pos":{"x":0.4258710484883293,"y":0.1474357451349484},"pos3":{"x":0.7863763386440694,"y":0.8513696383357162,"z":0.6534779543313786}},{"id":"HeytingLean.WPP.WppRule.StepStar.trans","name":"HeytingLean.WPP.WppRule.StepStar.trans","kind":"theorem","path":"lean/HeytingLean/WPP/Multiway.lean","line":46,"family":"WppRule","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":2,"tactics":2,"parenDepth":1,"length":311},"snippet":"theorem trans {s t u : State} :\n    StepStar (R := R) s t → StepStar (R := R) t u → StepStar (R := R) s u := by\n  intro hst htu\n  induction hst with\n  | refl =>\n      simpa using htu","pos":{"x":0.4843330872045587,"y":0.1873269223353651},"pos3":{"x":0.6772959769722195,"y":0.8598102415171445,"z":0.6933484803249367}},{"id":"HeytingLean.WPP.WppRule.cone","name":"HeytingLean.WPP.WppRule.cone","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":58,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":149},"snippet":"def cone (s : State) : Set State := fun t => StepStar (R := R) s t\n\n/-- Interior view: `JR U s` means the forward cone of `s` is contained in `U`. -/","pos":{"x":0.610107300236658,"y":0.5783188590113433},"pos3":{"x":0.0059505041267200725,"y":0.07620114915402097,"z":0.8863760411186773}},{"id":"HeytingLean.WPP.WppRule.JR","name":"HeytingLean.WPP.WppRule.JR","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":61,"family":"WppRule","features":{"implies":2,"not":0,"and":0,"or":0,"forall":2,"exists":0,"eq":1,"tactics":1,"parenDepth":2,"length":228},"snippet":"def JR (U : Set State) : Set State := fun s => ∀ t, cone (R := R) s t → U t\n\n@[simp] lemma JR_mem_iff {U : Set State} {s : State} :\n    JR (R := R) U s ↔ (∀ t, StepStar (R := R) s t → U t) := Iff.rfl\n\nnamespace JR","pos":{"x":0.32135991772971256,"y":0.2456120272929344},"pos3":{"x":0.6460599952665986,"y":0.8575411215020846,"z":0.579664392710002}},{"id":"HeytingLean.WPP.WppRule.JR.mono","name":"HeytingLean.WPP.WppRule.JR.mono","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":70,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":92},"snippet":"lemma mono : Monotone (JR (R := R)) := by\n  intro U V hUV s hs t hst\n  exact hUV (hs _ hst)\n","pos":{"x":0.33046435582386097,"y":0.9498860264097955},"pos3":{"x":0.7043061522075426,"y":0.053896134166842774,"z":0.5961938281180722}},{"id":"HeytingLean.WPP.WppRule.JR.contractive","name":"HeytingLean.WPP.WppRule.JR.contractive","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":74,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":104},"snippet":"lemma contractive (U : Set State) : JR (R := R) U ⊆ U := by\n  intro s hs\n  exact hs s (StepStar.refl s)\n","pos":{"x":0.8378897810352591,"y":0.03460393587095262},"pos3":{"x":0.4227733277587953,"y":0.7639773458037282,"z":0.993277673970565}},{"id":"HeytingLean.WPP.WppRule.JR.idem","name":"HeytingLean.WPP.WppRule.JR.idem","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":78,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":247},"snippet":"lemma idem (U : Set State) : JR (R := R) (JR (R := R) U) = JR (R := R) U := by\n  ext s\n  constructor\n  · intro hs t hst\n    exact (contractive (R := R) (U := U)) (hs t hst)\n  · intro hs t hst u htu","pos":{"x":0.3042596818815336,"y":0.8572858515442713},"pos3":{"x":0.7320639183635932,"y":0.19397995396332476,"z":0.5881328819719672}},{"id":"HeytingLean.WPP.WppRule.JR.inf","name":"HeytingLean.WPP.WppRule.JR.inf","kind":"lemma","path":"lean/HeytingLean/WPP/Multiway.lean","line":86,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":1,"length":492},"snippet":"lemma inf (U V : Set State) :\n    JR (R := R) (U ∩ V) = JR (R := R) U ∩ JR (R := R) V := by\n  ext s\n  constructor\n  · intro hs\n    refine And.intro ?_ ?_","pos":{"x":0.5185074742519552,"y":0.6194668987075608},"pos3":{"x":0.06953004239986307,"y":0.1875110046952746,"z":0.9134667379902329}},{"id":"HeytingLean.WPP.WppRule.unreachableFrom","name":"HeytingLean.WPP.WppRule.unreachableFrom","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":110,"family":"WppRule","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":201},"snippet":"def unreachableFrom : Set State :=\n  {s | ¬ StepStar (R := R) s₀ s}\n\n/-- Inflationary nucleus on predicates: “treat unreachable states as vacuously admissible”\nby unioning them into every predicate. -/","pos":{"x":0.008952270360148954,"y":0.5735620352149929},"pos3":{"x":1,"y":0.9031561390389613,"z":0.3083309246124412}},{"id":"HeytingLean.WPP.WppRule.reachabilityNucleus","name":"HeytingLean.WPP.WppRule.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/WPP/Multiway.lean","line":115,"family":"WppRule","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":14,"parenDepth":1,"length":847},"snippet":"def reachabilityNucleus : Nucleus (Set State) where\n  toFun U := U ∪ unreachableFrom (R := R) s₀\n  map_inf' U V := by\n    ext s\n    constructor\n    · intro hs","pos":{"x":0.49710628575032395,"y":0.6372733217514766},"pos3":{"x":0.09318595501862822,"y":0.2421610310292927,"z":0.9158226203725907}},{"id":"HeytingLean.WPP.WppRel","name":"HeytingLean.WPP.WppRel","kind":"structure","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":33,"family":"WppRel","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":199},"snippet":"structure WppRel (State : Type u) where\n  stepRel : State → State → Prop\n\nnamespace WppRel\n\nvariable {State : Type u} (R : WppRel State)","pos":{"x":0.48178102149309976,"y":0.1831761374980538},"pos3":{"x":0.6878834888300773,"y":0.8670970906699463,"z":0.6926133453029212}},{"id":"HeytingLean.WPP.WppRel.StepStar","name":"HeytingLean.WPP.WppRel.StepStar","kind":"abbrev","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":41,"family":"WppRel","features":{"implies":2,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":0,"length":127},"snippet":"abbrev StepStar : State → State → Prop :=\n  Relation.ReflTransGen R.stepRel\n\n/-- Forward cone of a state under the relation. -/","pos":{"x":0.4965067107187406,"y":0.19233130118931796},"pos3":{"x":0.6521583337547534,"y":0.86393778312945,"z":0.7070163620888162}},{"id":"HeytingLean.WPP.WppRel.cone","name":"HeytingLean.WPP.WppRel.cone","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":45,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":147},"snippet":"def cone (s : State) : Set State := fun t => StepStar (R := R) s t\n\n/-- Kernel view: `JR U s` means the forward cone of `s` is contained in `U`. -/","pos":{"x":0.60401169814601,"y":0.5808710128261595},"pos3":{"x":0.010893765367561791,"y":0.0804026370540724,"z":0.8822460553192801}},{"id":"HeytingLean.WPP.WppRel.JR","name":"HeytingLean.WPP.WppRel.JR","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":48,"family":"WppRel","features":{"implies":1,"not":0,"and":0,"or":0,"forall":1,"exists":0,"eq":1,"tactics":0,"parenDepth":1,"length":108},"snippet":"def JR (U : Set State) : Set State := fun s => ∀ t, StepStar (R := R) s t → U t\n\nnamespace JR\n\nvariable {R}\n","pos":{"x":0.3600312602223039,"y":0.2387833103288235},"pos3":{"x":0.6849868698019465,"y":0.8862791267994816,"z":0.6102745453631535}},{"id":"HeytingLean.WPP.WppRel.JR.mono","name":"HeytingLean.WPP.WppRel.JR.mono","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":54,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":2,"length":92},"snippet":"lemma mono : Monotone (JR (R := R)) := by\n  intro U V hUV s hs t hst\n  exact hUV (hs _ hst)\n","pos":{"x":0.3318872658616795,"y":0.9444367603630507},"pos3":{"x":0.7080893877746409,"y":0.05612123011953149,"z":0.597054355990577}},{"id":"HeytingLean.WPP.WppRel.JR.contractive","name":"HeytingLean.WPP.WppRel.JR.contractive","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":58,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":2,"parenDepth":1,"length":115},"snippet":"lemma contractive (U : Set State) : JR (R := R) U ⊆ U := by\n  intro s hs\n  exact hs s (Relation.ReflTransGen.refl)\n","pos":{"x":0.8393030534452539,"y":0.03222520627921102},"pos3":{"x":0.429867465402476,"y":0.758005442759979,"z":0.9917090393751209}},{"id":"HeytingLean.WPP.WppRel.JR.idem","name":"HeytingLean.WPP.WppRel.JR.idem","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":62,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":4,"parenDepth":2,"length":251},"snippet":"lemma idem (U : Set State) : JR (R := R) (JR (R := R) U) = JR (R := R) U := by\n  ext s\n  constructor\n  · intro hs t hst\n    exact (contractive (R := R) (U := U)) (hs t hst)\n  · intro hs t hst u htu","pos":{"x":0.3051630927414608,"y":0.8526983281803224},"pos3":{"x":0.732738827121326,"y":0.19019820975678872,"z":0.5849891624798755}},{"id":"HeytingLean.WPP.WppRel.JR.inf","name":"HeytingLean.WPP.WppRel.JR.inf","kind":"lemma","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":70,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":1,"tactics":8,"parenDepth":1,"length":478},"snippet":"lemma inf (U V : Set State) :\n    JR (R := R) (U ∩ V) = JR (R := R) U ∩ JR (R := R) V := by\n  ext s\n  constructor\n  · intro hs\n    refine And.intro ?_ ?_","pos":{"x":0.525525855610384,"y":0.6147810486438199},"pos3":{"x":0.0697650751262501,"y":0.18979879823208196,"z":0.9187969841994555}},{"id":"HeytingLean.WPP.WppRel.unreachableFrom","name":"HeytingLean.WPP.WppRel.unreachableFrom","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":92,"family":"WppRel","features":{"implies":0,"not":1,"and":0,"or":0,"forall":0,"exists":0,"eq":0,"tactics":0,"parenDepth":1,"length":201},"snippet":"def unreachableFrom : Set State :=\n  {s | ¬ StepStar (R := R) s₀ s}\n\n/-- Inflationary nucleus on predicates: “treat unreachable states as vacuously admissible”\nby unioning them into every predicate. -/","pos":{"x":0.010782942366807255,"y":0.5747925558354736},"pos3":{"x":0.9891984588883379,"y":0.8929841663182787,"z":0.30262637502575146}},{"id":"HeytingLean.WPP.WppRel.reachabilityNucleus","name":"HeytingLean.WPP.WppRel.reachabilityNucleus","kind":"def","path":"lean/HeytingLean/WPP/MultiwayRel.lean","line":97,"family":"WppRel","features":{"implies":0,"not":0,"and":0,"or":0,"forall":0,"exists":0,"eq":5,"tactics":14,"parenDepth":1,"length":847},"snippet":"def reachabilityNucleus : Nucleus (Set State) where\n  toFun U := U ∪ unreachableFrom (R := R) s₀\n  map_inf' U V := by\n    ext s\n    constructor\n    · intro hs","pos":{"x":0.49728603186720055,"y":0.6378392191799536},"pos3":{"x":0.09575853502338812,"y":0.24221306419131644,"z":0.9143791834708305}}],"edges":[[0,151],[0,2],[0,19],[0,177],[0,59],[1,123],[1,87],[1,136],[1,243],[1,253],[2,151],[2,19],[2,177],[2,24],[3,190],[3,72],[3,116],[3,71],[3,200],[4,64],[4,167],[4,250],[4,58],[4,68],[5,210],[5,218],[5,223],[5,13],[5,126],[6,148],[6,11],[6,147],[6,18],[6,242],[7,152],[7,249],[7,77],[7,43],[7,79],[8,43],[8,79],[8,134],[8,214],[8,77],[9,14],[9,133],[9,153],[9,160],[9,227],[10,162],[10,69],[10,191],[10,149],[10,199],[11,147],[11,18],[11,27],[11,30],[12,179],[12,194],[12,130],[12,53],[12,36],[13,218],[13,223],[13,201],[13,126],[14,133],[14,227],[14,27],[14,107],[15,87],[15,132],[15,157],[15,99],[16,34],[16,219],[16,234],[16,128],[16,145],[17,121],[17,135],[17,21],[17,146],[17,235],[18,242],[18,252],[18,244],[18,232],[19,177],[19,151],[19,59],[20,168],[20,175],[20,114],[20,241],[20,142],[21,161],[21,121],[21,135],[21,146],[22,33],[22,32],[22,185],[22,68],[22,240],[23,173],[23,129],[23,174],[23,41],[23,226],[24,180],[24,146],[24,235],[24,135],[25,156],[25,238],[25,248],[25,103],[25,104],[26,155],[26,202],[26,109],[26,28],[26,216],[27,107],[27,154],[27,176],[27,30],[28,109],[28,216],[28,204],[28,97],[28,86],[29,93],[29,172],[29,161],[29,73],[29,169],[30,176],[30,147],[31,182],[31,237],[31,153],[31,160],[31,181],[32,33],[32,185],[32,68],[32,240],[33,68],[33,185],[33,240],[34,234],[34,219],[34,201],[34,128],[35,59],[35,58],[35,167],[35,64],[35,177],[36,222],[36,50],[36,53],[36,179],[37,140],[37,127],[37,178],[37,165],[37,70],[38,113],[38,193],[38,189],[38,197],[38,196],[39,75],[39,206],[39,40],[39,76],[39,207],[40,76],[40,75],[40,206],[40,207],[41,129],[41,137],[41,245],[41,173],[41,217],[42,78],[42,49],[42,212],[42,48],[42,119],[43,79],[43,134],[43,214],[43,77],[44,45],[44,46],[44,80],[44,81],[44,186],[45,46],[45,80],[45,81],[45,186],[46,80],[46,81],[46,186],[47,82],[47,76],[47,75],[48,49],[48,212],[48,54],[48,55],[49,212],[49,54],[49,55],[50,52],[50,53],[50,199],[50,222],[51,205],[51,224],[51,225],[51,166],[51,95],[52,53],[52,199],[52,222],[52,191],[53,222],[53,194],[54,55],[54,56],[54,88],[54,89],[55,56],[55,88],[55,89],[56,88],[56,89],[57,90],[57,181],[57,153],[57,182],[58,59],[58,215],[58,64],[58,167],[58,250],[59,215],[59,64],[59,167],[60,96],[60,139],[60,164],[60,229],[60,163],[61,62],[61,103],[61,156],[61,238],[62,103],[62,156],[62,238],[63,91],[63,66],[63,67],[63,187],[63,165],[64,167],[64,250],[64,215],[65,86],[65,97],[65,216],[65,243],[65,253],[66,67],[66,120],[66,91],[66,187],[67,120],[67,91],[67,187],[68,240],[68,185],[69,162],[69,149],[69,191],[69,220],[70,211],[70,92],[70,112],[70,130],[70,178],[71,200],[71,72],[71,190],[71,85],[72,190],[72,200],[72,116],[73,159],[73,183],[73,169],[73,108],[73,93],[74,230],[74,163],[74,94],[74,164],[74,139],[75,206],[75,76],[75,207],[76,206],[76,207],[77,134],[77,79],[77,152],[78,119],[79,134],[79,214],[80,81],[80,186],[81,156],[83,84],[83,209],[83,233],[84,209],[84,233],[85,200],[85,111],[85,138],[86,97],[86,216],[86,204],[86,109],[87,132],[87,157],[87,99],[88,89],[89,212],[90,181],[90,153],[90,182],[91,187],[91,165],[92,211],[92,178],[92,112],[92,194],[93,161],[93,172],[93,121],[94,144],[94,230],[94,163],[94,164],[95,213],[95,195],[95,205],[95,203],[96,229],[96,139],[96,164],[96,155],[97,216],[97,204],[97,109],[98,116],[98,190],[99,132],[99,157],[99,197],[99,143],[100,101],[100,102],[100,141],[100,184],[100,104],[101,102],[101,141],[101,184],[101,104],[102,141],[102,239],[102,184],[103,104],[103,156],[104,238],[104,248],[104,110],[105,106],[105,226],[105,246],[105,118],[105,236],[106,246],[106,236],[106,118],[106,226],[107,154],[107,176],[107,133],[107,147],[108,169],[108,183],[108,122],[108,228],[109,216],[109,204],[110,141],[111,138],[111,115],[111,144],[112,194],[112,130],[112,211],[113,196],[113,143],[113,193],[113,189],[114,175],[114,241],[114,168],[114,251],[115,138],[115,144],[116,190],[117,124],[117,158],[117,210],[118,246],[118,226],[118,236],[119,186],[119,212],[120,228],[120,187],[121,135],[121,235],[121,146],[122,228],[122,169],[122,183],[122,159],[123,136],[123,243],[123,253],[124,158],[124,236],[124,126],[125,244],[125,232],[125,170],[125,242],[126,218],[126,223],[126,210],[127,140],[127,178],[127,165],[128,145],[128,232],[128,171],[129,173],[129,137],[129,245],[130,194],[130,179],[130,222],[131,221],[131,203],[131,193],[131,196],[131,143],[132,157],[132,197],[133,227],[134,214],[135,146],[135,180],[135,235],[136,243],[136,253],[137,217],[137,245],[137,173],[138,144],[139,164],[139,163],[139,229],[140,178],[140,165],[141,184],[141,150],[142,168],[142,166],[142,224],[142,225],[143,196],[143,189],[143,197],[143,193],[144,230],[145,232],[145,171],[145,170],[146,180],[146,235],[147,148],[147,242],[147,252],[148,154],[149,191],[149,199],[149,162],[150,184],[150,238],[150,248],[151,177],[152,249],[153,182],[153,160],[153,237],[154,176],[155,229],[155,202],[157,197],[157,196],[158,236],[158,246],[159,169],[159,183],[160,237],[160,182],[161,172],[162,191],[162,220],[163,164],[163,230],[164,230],[165,187],[166,224],[166,225],[166,205],[166,168],[167,250],[168,175],[168,241],[169,183],[170,171],[170,232],[170,244],[171,232],[172,183],[173,174],[174,226],[175,241],[175,251],[178,211],[179,194],[180,235],[181,182],[182,237],[185,240],[188,237],[189,193],[189,196],[189,221],[190,200],[191,199],[192,220],[192,251],[192,241],[193,221],[193,196],[194,222],[195,213],[195,203],[195,221],[196,197],[201,208],[201,218],[201,223],[201,219],[202,204],[202,216],[203,213],[203,221],[204,216],[205,224],[205,225],[206,207],[208,219],[208,234],[209,233],[210,218],[210,223],[214,247],[215,250],[217,245],[218,223],[219,234],[224,225],[226,246],[232,244],[236,246],[238,248],[240,250],[241,251],[242,252],[242,244],[243,253],[244,252]],"edgesSemantic":[]};